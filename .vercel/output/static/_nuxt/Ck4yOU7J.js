import{_ as L}from"./dOA9az_O.js";import{_ as J}from"./W3k4iq7y.js";import{g as se,v as c,x as d,O as F,H as p,y as a,B as R,z as b,I as V,T as H,A as oe,C as D,N as M,V as ae,U,r,M as te,F as le,o as re,X as B}from"./HfdH-K36.js";import{_ as ne,a as ie,b as K,e as de,c as ue}from"./BPQMX-rU.js";import{a as x}from"./xsH4HHeE.js";import{u as j}from"./BUsOIeYI.js";import{s as ce}from"./x_rD_Ya3.js";import{_ as ve}from"./DlAUqK2U.js";const fe={components:{Alert:L,useSeo:j},setup(){const n=r(!1),s=te(),C=r("忘記密碼"),e=r(!1),v=r(!1),w=r(""),A=r(""),I=r(!1),m=r("forgetPassword"),t=r(!1),f=r(!1),l=r(["","","","",""]),g=r([]),_=r(60),S=r(null),y=r(""),T=r(""),G=r(""),N=r("");j({title:"",description:"NeuroPlus神經調節家提供專業的自律神經檢測服務，運用FDA認證AI技術，透過人臉辨識快速分析HRV數據，幫助您了解自律神經狀態。",url:"https://neuroplus.com.tw"}),le(l,o=>{o.every(i=>i!=="")&&O()});const W=()=>{v.value=!1},z=()=>{I.value=!I.value},X=()=>{e.value=!e.value},q=()=>{y.value.length<8?G.value="密碼長度必須至少 8 位":G.value=""},Q=()=>{T.value!==y.value?N.value="兩次輸入的密碼不一致":N.value=""},E=()=>{_.value=60,t.value=!1,S.value=ce(()=>{_.value>0?(_.value--,f.value=!1):(clearInterval(S.value),_.value="驗證碼已失效，請重新發送",t.value=!0,f.value=!0,l.value=["","","","",""])},1e3)},Y=async()=>{n.value=!0;try{const o=await x.post("https://23700999.com:8081/HMA/API_ForgetPassword.jsp",{Mobile:A.value});o.status===200&&(console.log(o.data),n.value=!1,o.data?(localStorage.setItem("userData",JSON.stringify({MID:o.data.MID,Mobile:A.value})),E(),m.value!="verify"&&(m.value="verify",C.value="輸入驗證碼")):n.value=!1)}catch(o){v.value=!0,w.value=o}finally{n.value=!1}},O=async()=>{n.value=!0;const o=l.value.join(""),i=localStorage.getItem("userData"),{MID:h,Mobile:u}=i?JSON.parse(i):{};_.value>0?(await x.post("https://23700999.com:8081/HMA/API_doExamAuthPassword.jsp",{Mobile:u,MID:h,D1:o[0],D2:o[1],D3:o[2],D4:o[3],D5:o[4]})).data.PASS==="OK"?(m.value="resetPassword",C.value="重新設定密碼"):(l.value=["","","","",""],B(()=>{var k;(k=g.value[0])==null||k.focus()}),v.value=!0,w.value="驗證碼輸入錯誤"):(l.value=["","","","",""],B(()=>{var P;(P=g.value[0])==null||P.focus()}),v.value=!0,w.value="驗證碼時間已過"),n.value=!1},Z=async()=>{const o=localStorage.getItem("userData"),{MID:i,Mobile:h}=o?JSON.parse(o):{};if(y.value.length<8){v.value=!0,w.value="密碼小於8位數";return}if(y.value!==T.value){v.value=!0,w.value="密碼不一致";return}n.value=!0;try{const u=await x.post("https://23700999.com:8081/HMA/API_ChangePassword.jsp",{MID:i,Mobile:h,Password:y.value});u.status===200&&(console.log(u.data),n.value=!1,u.data.Result=="OK"&&(v.value=!0,w.value="密碼重新設定完成，請用新密碼登入",s.push("/")))}catch(u){alert(u)}finally{n.value=!1}},$=(o,i)=>{var u,P;if((i==null?void 0:i.key)==="Backspace"&&l.value[o]===""&&o>0){(u=g.value[o-1])==null||u.focus();return}(l.value[o]<0||l.value[o]>9)&&(l.value[o]=""),l.value[o]!==""&&o<l.value.length-1&&((P=g.value[o+1])==null||P.focus()),l.value.every(k=>k!=="")&&O()},ee=o=>{const i=String.fromCharCode(o.which);/[0-9]/.test(i)||o.preventDefault()};return re(()=>{B(()=>{g.value=g.value.slice(0,l.value.length)})}),{loading:n,router:s,mobile:A,passwordVisible:I,currentStep:m,verificationTitle:C,API_ForgetPassword:Y,API_doExamAuthPassword:O,handleClose:W,alertVisable:v,verificationCodes:l,verificationInput:g,countdownTime:_,countdownInterval:S,handleInput:$,allowOnlyNumbers:ee,startCountdown:E,isReSend:t,isDisabled:f,passwordAgainVisible:e,RaphaelLoading:J,eyesCloseGreen:ue,eyesOpenGreen:de,togglePasswordVisibility:z,togglePasswordAgainVisibility:X,validatePassword:q,validatePasswordAgain:Q,password:y,passwordAgain:T,passwordError:G,passwordAgainError:N,API_reset:Z,alertContent:w}}},we={class:"forgetPassword"},ge={class:"forgetPasswordGroup"},pe={key:0,class:"forgetPasswordWrap"},me={class:"forgetPasswordBox"},_e={class:"phoneGroup"},ye=["disabled"],Pe={class:"returnLogin"},be={key:1,class:"verfifyWrap"},Ae={class:"verificationCodeGroup"},Ie=["onUpdate:modelValue","onInput","onKeydown","disabled"],Ce={class:"verificationCodeHintText"},he={class:"reSendTextGroup"},ke=["disabled"],Ve={key:2,class:"resetPasswordWrap"},De={class:"resetPasswordBox"},Me={class:"passwordGroup"},Se=["type"],Te=["src"],Ge={key:0,class:"passwordHintText"},Ne={class:"passwordAgainGroup"},Oe=["type"],Be=["src"],xe={key:1,class:"passwordAgainHintText"};function Ee(n,s,C,e,v,w){const A=L,I=J,m=se("router-link");return d(),c(M,null,[e.alertVisable===!0?(d(),F(A,{key:0,showRedirectButton:!1,redirectTarget:n.handleRedirect,onClose:e.handleClose},{default:R(()=>[a("span",null,b(e.alertContent),1)]),_:1},8,["redirectTarget","onClose"])):p("",!0),a("div",we,[e.loading?(d(),F(I,{key:0})):p("",!0),a("div",ge,[s[17]||(s[17]=a("div",{class:"raphaelIconImgGroup"},[a("img",{class:"raphaelIcon",src:ne,alt:""})],-1)),a("h1",null,b(e.verificationTitle),1),e.currentStep==="forgetPassword"?(d(),c("div",pe,[a("div",me,[a("div",_e,[V(a("input",{type:"tel","onUpdate:modelValue":s[0]||(s[0]=t=>e.mobile=t),placeholder:"請輸入您的手機號碼"},null,512),[[H,e.mobile]]),s[11]||(s[11]=a("img",{class:"icon1",src:ie,alt:""},null,-1))])]),a("button",{class:"vertificationBtn",onClick:s[1]||(s[1]=(...t)=>e.API_ForgetPassword&&e.API_ForgetPassword(...t)),disabled:!e.mobile}," 取得驗證碼 ",8,ye),a("div",Pe,[oe(m,{to:"/"},{default:R(()=>s[12]||(s[12]=[D("返回")])),_:1})])])):p("",!0),e.currentStep==="verify"?(d(),c("div",be,[a("div",Ae,[(d(!0),c(M,null,ae(e.verificationCodes,(t,f)=>V((d(),c("input",{key:f,ref_for:!0,ref:"verificationInput",type:"number",maxlength:"1",class:"vertifyCode","onUpdate:modelValue":l=>e.verificationCodes[f]=l,onInput:l=>e.handleInput(f),onKeydown:l=>e.handleInput(f,l),onKeypress:s[2]||(s[2]=(...l)=>e.allowOnlyNumbers&&e.allowOnlyNumbers(...l)),disabled:e.isDisabled},null,40,Ie)),[[H,e.verificationCodes[f]]])),128))]),a("div",Ce,[typeof e.countdownTime=="number"?(d(),c(M,{key:0},[s[13]||(s[13]=D(" 驗證碼已傳送至您的裝置，請輸入驗證碼 ")),s[14]||(s[14]=a("br",null,null,-1)),D(" ("+b(e.countdownTime)+"秒後失效) ",1)],64)):(d(),c(M,{key:1},[D(b(e.countdownTime),1)],64))]),a("div",he,[a("button",{class:"reSendText",disabled:!e.isReSend,onClick:s[3]||(s[3]=(...t)=>e.API_ForgetPassword&&e.API_ForgetPassword(...t))}," 重新發送 ",8,ke)])])):p("",!0),e.currentStep==="resetPassword"?(d(),c("div",Ve,[a("div",De,[a("div",Me,[V(a("input",{type:e.passwordVisible?"text":"password","onUpdate:modelValue":s[4]||(s[4]=t=>e.password=t),placeholder:"請輸入密碼",onInput:s[5]||(s[5]=(...t)=>e.validatePassword&&e.validatePassword(...t))},null,40,Se),[[U,e.password]]),s[15]||(s[15]=a("img",{class:"icon1",src:K,alt:""},null,-1)),a("img",{class:"icon2",src:e.passwordVisible?e.eyesOpenGreen:e.eyesCloseGreen,onClick:s[6]||(s[6]=(...t)=>e.togglePasswordVisibility&&e.togglePasswordVisibility(...t)),alt:""},null,8,Te)]),e.passwordError?(d(),c("div",Ge,b(e.passwordError),1)):p("",!0),a("div",Ne,[V(a("input",{type:e.passwordAgainVisible?"text":"password","onUpdate:modelValue":s[7]||(s[7]=t=>e.passwordAgain=t),placeholder:"再次輸入您的密碼",onInput:s[8]||(s[8]=(...t)=>e.validatePasswordAgain&&e.validatePasswordAgain(...t))},null,40,Oe),[[U,e.passwordAgain]]),s[16]||(s[16]=a("img",{class:"icon1",src:K,alt:""},null,-1)),a("img",{class:"icon2",src:e.passwordAgainVisible?e.eyesOpenGreen:e.eyesCloseGreen,onClick:s[9]||(s[9]=(...t)=>e.togglePasswordAgainVisibility&&e.togglePasswordAgainVisibility(...t)),alt:""},null,8,Be)]),e.passwordAgainError?(d(),c("div",xe,b(e.passwordAgainError),1)):p("",!0)]),a("button",{class:"resetPasswordBtn",onClick:s[10]||(s[10]=(...t)=>e.API_reset&&e.API_reset(...t))},"確定")])):p("",!0)])])],64)}const We=ve(fe,[["render",Ee]]);export{We as default};
