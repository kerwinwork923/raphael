import{_ as E}from"./W3k4iq7y.js";import{_ as j}from"./1SqYRxzD.js";import{P as g,_ as G}from"./Cyv9YNxQ.js";import{a as b,c as D,s as I}from"./6FQ55jJ2.js";import{j as P,v as p,x as m,y as o,H as C,z as c,A as x,S as d,C as _,J as A,O as B,N as M,V,E as L,r as R,o as O}from"./HfdH-K36.js";import{a as W}from"./xsH4HHeE.js";import{_ as $}from"./DlAUqK2U.js";const z={class:"resultList"},H={class:"titleGroup"},J={key:0},q={key:1},F={__name:"SymptomResult2Compare",props:{symptomName:String,current:{type:Object,default:null},previous:{type:Object,default:null},sex:String},setup(e){const s=e;P(()=>{if(!s.current||!s.previous)return null;const t=parseFloat(s.current.Ratio)||0,a=parseFloat(s.previous.Ratio)||0;return(t-a).toFixed(2)});function n(t){if(!t)return 0;const a=parseFloat(t.replace("%",""));return isNaN(a)?0:a}return(t,a)=>(m(),p("div",z,[o("div",H,[o("h3",null,c(e.symptomName),1)]),e.current?(m(),p("div",J,[o("h5",null,"(本次) "+c(d(b)(e.current.CheckTime||"")),1),x(g,{score:n(e.current.Ratio),emojiSrc:d(D)(n(e.current.Ratio))},null,8,["score","emojiSrc"]),o("h4",null,[a[0]||(a[0]=_(" 嚴重程度 : ")),o("span",{style:A({color:d(I)(n(e.current.Ratio),e.sex)})},c(e.current.Ratio)+"% ("+c(e.current.Serious)+") ",5)])])):C("",!0),e.previous?(m(),p("div",q,[o("h5",null,"(前次) "+c(d(b)(e.previous.CheckTime||"")),1),x(g,{score:n(e.previous.Ratio),emojiSrc:d(D)(n(e.previous.Ratio))},null,8,["score","emojiSrc"]),o("h4",null,[a[1]||(a[1]=_(" 嚴重程度 : ")),o("span",{style:A({color:d(I)(n(e.previous.Ratio),e.sex)})},c(e.previous.Ratio)+"% ("+c(e.previous.Serious)+") ",5)])])):C("",!0)]))}},K={components:{SymptomResult2Compare:F,TitleMenu:j},setup(){const e=L(),s=R({}),n=R([]),t=R(!0),a=async()=>{const f=JSON.parse(localStorage.getItem("userData")||"{}"),{MID:h,Token:k,MAID:S,Mobile:y}=f,l=e.params.detail;try{const i=await W.post("https://23700999.com:8081/HMA/API_BB_GrowthCompare.jsp",{MID:String(h),Token:String(k),MAID:String(S),Mobile:String(y),AID:l});if(i.status===200){s.value=i.data;const T=i.data.ChildScore||[],N=i.data.preChildScore||[],v=T.map(r=>{const u=N.find(w=>w.Type===r.Type);return{Type:r.Type,TypeName:r.TypeName,current:{CheckTime:r.CheckTime,Ratio:r.Ratio,Score:r.Score,Serious:r.Serious},previous:u?{CheckTime:u.CheckTime,Ratio:u.Ratio,Score:u.Score,Serious:u.Serious}:null}});N.forEach(r=>{v.find(u=>u.Type===r.Type)||v.push({Type:r.Type,TypeName:r.TypeName,current:null,previous:{CheckTime:r.CheckTime,Ratio:r.Ratio,Score:r.Score,Serious:r.Serious}})}),n.value=v}}catch(i){console.error("Error fetching data:",i)}finally{t.value=!1}};return O(()=>{a()}),{compareData:s,combinedScores:n,loading:t,backToUser:()=>{window.location.href="/user"}}}},Q={class:"resultWrapDetail"},X={class:"resultTopGroup"},Y={class:"resultInfo"},Z={class:"resultListGroup"},ee={class:"backToUserBtnGroupWeekly"};function oe(e,s,n,t,a,U){var S,y;const f=E,h=j,k=F;return m(),p(M,null,[t.loading?(m(),B(f,{key:0})):C("",!0),o("div",Q,[x(h,{Text:"結果分析",link:"/weekly2",scrollToBottom:!0}),o("div",X,[o("div",Y,[o("h4",null,"姓名 : "+c(((y=(S=t.compareData.ChildInfo)==null?void 0:S[0])==null?void 0:y.Name)||"寶貝"),1)]),s[1]||(s[1]=o("img",{class:"doctorImg",src:G,alt:""},null,-1))]),s[2]||(s[2]=o("h4",{class:"textResultText"},"以下為兒童指標的綜合分析結果，僅供醫師參考，不具診斷功能．",-1)),o("div",Z,[(m(!0),p(M,null,V(t.combinedScores,(l,i)=>{var T;return m(),B(k,{key:i,symptomName:l.TypeName,current:l.current||{},previous:l.previous||{},sex:((T=t.compareData.ChildInfo)==null?void 0:T.Sex)||""},null,8,["symptomName","current","previous","sex"])}),128))]),o("div",ee,[o("button",{class:"backToUserBtnWeekly",onClick:s[0]||(s[0]=(...l)=>t.backToUser&&t.backToUser(...l))}," 返回會員中心 ")])])],64)}const le=$(K,[["render",oe]]);export{le as default};
