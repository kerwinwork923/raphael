import{_ as Y,a as tt,b as F,c as et}from"./D2zbH8I4.js";import{v as Z,x as R,y as t,H as P,z as r,O as st,_ as ot,C as w,A as nt,J as it,B as lt,I as rt,K as at,W as ut,M as dt,E as ct,r as m,o as ft,j as b}from"./HfdH-K36.js";import{u as mt}from"./BUsOIeYI.js";import{_ as vt}from"./BYaUl-Yl.js";import{_ as pt}from"./C9Uwk0Jw.js";import{_ as gt}from"./DlAUqK2U.js";import"./DSWhhf30.js";mt({title:"",description:"NeuroPlus神經調節家提供專業的自律神經檢測服務，運用FDA認證AI技術，透過人臉辨識快速分析HRV數據，幫助您了解自律神經狀態。",url:"https://neuroplus.com.tw"});function B(i){if(!i||i.length<14)return null;const e=Number(i.slice(0,4)),g=Number(i.slice(4,6))-1,s=Number(i.slice(6,8)),h=Number(i.slice(8,10)),_=Number(i.slice(10,12));return new Date(e,g,s,h,_)}function ht(i){if(!i||isNaN(i.getTime()))return"-";const e=i.getFullYear(),g=i.getMonth()+1,s=i.getDate(),h=String(i.getHours()).padStart(2,"0"),_=String(i.getMinutes()).padStart(2,"0");return`${e}/${g}/${s} ${h}:${_}`}const _t={name:"UsageHRVResultView",components:{ResultChart:Y},setup(){const i=dt(),e=ct(),g=m(""),s=m(""),h=m(""),_=m(""),C=m(0),a=m(null),f=m(null),S=m([]),T=m(""),M=e.params.HRVID,G=localStorage.getItem("userData"),{MID:x,Token:y,MAID:N,Mobile:A}=G?JSON.parse(G):{},v=(o,n)=>{if(!o)return 0;switch(n){case"balance":const u=parseFloat(o.lf_hf);return u>2?5:u>1.5?4:u>=1?3:u>=.5?2:1;case"fatigue":const c=parseFloat(o.sdnn);return c<20?5:c<30?4:c<50?3:c<70?2:1;case"mood":const p=parseInt(o.hbr),d=parseInt(o.rr),k=parseFloat(o.lf),U=parseFloat(o.hf);if(!p||!d||!k||!U)return 0;let l=0;p>90?l+=5:p>80?l+=4:p>70?l+=3:p>60?l+=2:l+=1,d>18?l+=5:d>15?l+=4:d>12?l+=3:d>10?l+=2:l+=1;const I=k/U;return I>2?l+=5:I>1.5?l+=4:I>1?l+=3:I>.5?l+=2:l+=1,l>=14?5:l>=12?4:l>=9?3:l>=5?2:1;case"pressure":const V=parseInt(o.sbp),D=parseInt(o.dbp);return V>145||D>95?5:V>=130||D>=85?4:V>=110&&V<=129&&D>=70&&D<=84?3:V>=95&&D>=60?2:1;default:return 0}},E=()=>{if(!a.value||!f.value)return null;const o={balance:v(a.value,"balance"),fatigue:v(a.value,"fatigue"),mood:v(a.value,"mood"),pressure:v(a.value,"pressure")},n={balance:v(f.value,"balance"),fatigue:v(f.value,"fatigue"),mood:v(f.value,"mood"),pressure:v(f.value,"pressure")},u={balance:n.balance-o.balance,fatigue:n.fatigue-o.fatigue,mood:n.mood-o.mood,pressure:n.pressure-o.pressure};return{beforeScores:o,afterScores:n,improvements:u}},W=()=>f.value&&f.value.Desc?f.value.Desc:"無法生成建議";async function J(){try{const n=await(await fetch("https://23700999.com:8081/HMA/API_UIDInfo.jsp",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({MID:x,Token:y,MAID:N,Mobile:A,UID:M})})).json();n.Result==="OK"&&(g.value=n.StartTime,s.value=n.EndTime,C.value=L(n.StartTime,n.EndTime),T.value=n.ProductName||"")}catch(o){console.error("fetchUIDInfo error:",o)}}async function z(){var o,n,u,c;try{const d=await(await fetch("https://23700999.com:8081/HMA/API_HRV3UseAf_Compare.jsp",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({MID:x,Token:y,MAID:N,Mobile:A,UID:M})})).json();d.Result==="OK"&&(a.value=d.HRV3.BcUse,f.value=d.HRV3.AfUse,h.value=((n=(o=d.HRV3)==null?void 0:o.BcUse)==null?void 0:n.CheckTime)||"",_.value=((c=(u=d.HRV3)==null?void 0:u.AfUse)==null?void 0:c.CheckTime)||"",S.value=d.HRV3.listBioage||[])}catch(p){console.error("fetchHRVCompare error:",p)}}function L(o,n){const u=B(o),c=B(n);return!u||!c||c<u?0:Math.round((c-u)/6e4)}function K(o){const n=B(o);return ht(n)}function O(){i.push(`/usage/${T.value}`)}ft(async()=>{await Promise.all([J(),z()])});function j(o){console.log("你點擊了：",o),o&&o.AID?i.push(`/healthData/${o.AID}`):alert("沒有檢測資料可查看")}const H=m(!0);function q(){H.value=!H.value}const Q=b(()=>E()),X=b(()=>W()),$=b(()=>H.value?"rotate(90deg)":"rotate(0deg)");return{startTime:g,endTime:s,beforeHRVTime:h,afterHRVTime:_,totalUsedMin:C,HRVBeforeData:a,HRVAfterData:f,listBioage:S,productName:T,improvement:Q,advice:X,isDetailVisible:H,toggleDetail:q,arrowRotation:$,formatTime:K,calcUsedMin:L,goNext:O,handleWatchClick:j}}},Vt={class:"usageHRVResultWrap"},Dt={class:"thxGroup"},Ct={class:"textGroup"},Ht={class:"nameText"},It={class:"resultChartGroup"},wt={class:"resultTimeGroup"},Tt={class:"hintContentGroup"},Rt={class:"hintContent"},bt={class:"hintText"},Bt={class:"hintContent"},St={class:"hintContentIcon"},Mt={class:"hintText"},Gt={class:"hintContent"},xt={class:"hintText"},yt={class:"hintContent"},Nt={class:"hintContentIcon"},At={class:"hintText"},Lt={key:0,class:"detailDataGroup"},kt={class:"detailDataTitleGroup"},Ut={class:"detailDataItem"},Ft={class:"detailDataInnerGroup2"},Zt={class:"useBeforeGroup"},Pt={class:"useValue"},Yt={class:"useBeforeGroup"},Et={class:"useValue"},Wt={class:"detailDataItem"},Jt={class:"detailDataInnerGroup2"},zt={class:"useBeforeGroup"},Kt={class:"useValue"},Ot={class:"useBeforeGroup"},jt={class:"useValue"},qt={class:"detailDataItem"},Qt={class:"detailDataInnerGroup2"},Xt={class:"useBeforeGroup"},$t={class:"useValue"},te={class:"useBeforeGroup"},ee={class:"useValue"},se={class:"detailDataItem"},oe={class:"detailDataInnerGroup2"},ne={class:"useBeforeGroup"},ie={class:"useValue"},le={class:"useBeforeGroup"},re={class:"useValue"},ae={class:"personalizedAdviceGroup"},ue={class:"usageBtnGroup"};function de(i,e,g,s,h,_){const C=Y;return R(),Z("div",Vt,[e[31]||(e[31]=t("h1",null,"結果分析",-1)),t("div",Dt,[t("div",Ct,[t("h3",Ht,"總共使用 "+r(s.totalUsedMin)+" 分鐘",1)]),e[4]||(e[4]=t("div",{class:"imgGroup"},[t("img",{src:vt,class:"doctorImg",alt:""})],-1))]),t("div",It,[e[5]||(e[5]=t("h2",null,"生理年齡",-1)),s.listBioage.length>0?(R(),st(C,{key:0,bioageData:s.listBioage},null,8,["bioageData"])):P("",!0)]),t("div",wt,[e[12]||(e[12]=ot('<div class="leftHintGroup" data-v-45a014cf><div class="resultHint" data-v-45a014cf></div><div class="resultHint" data-v-45a014cf></div><div class="resultHint" data-v-45a014cf></div><div class="resultHint" data-v-45a014cf></div></div>',1)),t("div",Tt,[t("div",Rt,[e[7]||(e[7]=t("div",{class:"hintContentIcon"},[t("img",{src:tt,alt:""})],-1)),t("div",bt,[e[6]||(e[6]=t("h5",null,"開始時間",-1)),w(" "+r(s.formatTime(s.startTime)||"-"),1)])]),t("div",Bt,[t("div",St,[t("img",{src:F,alt:"",onClick:e[0]||(e[0]=a=>s.handleWatchClick(s.HRVBeforeData))})]),t("div",Mt,[e[8]||(e[8]=t("h5",null,"(使用前)HRV檢測",-1)),w(" "+r(s.beforeHRVTime||"-"),1)])]),t("div",Gt,[e[10]||(e[10]=t("div",{class:"hintContentIcon"},[t("img",{src:et,alt:""})],-1)),t("div",xt,[e[9]||(e[9]=t("h5",null,"結束時間",-1)),w(" "+r(s.formatTime(s.endTime)||"-"),1)])]),t("div",yt,[t("div",Nt,[t("img",{src:F,alt:"",onClick:e[1]||(e[1]=a=>s.handleWatchClick(s.HRVAfterData))})]),t("div",At,[e[11]||(e[11]=t("h5",null,"(使用後)HRV檢測",-1)),w(" "+r(s.afterHRVTime||"-"),1)])])])]),s.improvement?(R(),Z("div",Lt,[t("div",kt,[e[13]||(e[13]=t("h3",null,"詳細數據比對",-1)),t("img",{src:pt,alt:"",onClick:e[2]||(e[2]=(...a)=>s.toggleDetail&&s.toggleDetail(...a)),style:it({transform:s.arrowRotation})},null,4)]),nt(ut,{name:"fade"},{default:lt(()=>[rt(t("div",null,[t("div",Ut,[e[17]||(e[17]=t("div",{class:"detailDataInnerGroup1"},[t("div",{class:"detailDataItemTag"}),t("h4",null,"自律神經平衡")],-1)),t("div",Ft,[t("div",Zt,[t("div",Pt,r(s.improvement.beforeScores.balance),1),e[14]||(e[14]=t("small",null,"使用前",-1))]),e[16]||(e[16]=t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"17",height:"8",viewBox:"0 0 17 8",fill:"none"},[t("path",{d:"M16.3536 4.05668C16.5488 3.86142 16.5488 3.54483 16.3536 3.34957L13.1716 0.167591C12.9763 -0.0276711 12.6597 -0.0276711 12.4645 0.167591C12.2692 0.362853 12.2692 0.679436 12.4645 0.874698L15.2929 3.70312L12.4645 6.53155C12.2692 6.72681 12.2692 7.0434 12.4645 7.23866C12.6597 7.43392 12.9763 7.43392 13.1716 7.23866L16.3536 4.05668ZM0 3.70312V4.20312H16V3.70312V3.20312H0V3.70312Z",fill:"#74BC1F"})],-1)),t("div",Yt,[t("div",Et,r(s.improvement.afterScores.balance),1),e[15]||(e[15]=t("small",null,"使用後",-1))])])]),t("div",Wt,[e[21]||(e[21]=t("div",{class:"detailDataInnerGroup1"},[t("div",{class:"detailDataItemTag"}),t("h4",null,"生理疲勞")],-1)),t("div",Jt,[t("div",zt,[t("div",Kt,r(s.improvement.beforeScores.fatigue),1),e[18]||(e[18]=t("small",null,"使用前",-1))]),e[20]||(e[20]=t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"17",height:"8",viewBox:"0 0 17 8",fill:"none"},[t("path",{d:"M16.3536 4.05668C16.5488 3.86142 16.5488 3.54483 16.3536 3.34957L13.1716 0.167591C12.9763 -0.0276711 12.6597 -0.0276711 12.4645 0.167591C12.2692 0.362853 12.2692 0.679436 12.4645 0.874698L15.2929 3.70312L12.4645 6.53155C12.2692 6.72681 12.2692 7.0434 12.4645 7.23866C12.6597 7.43392 12.9763 7.43392 13.1716 7.23866L16.3536 4.05668ZM0 3.70312V4.20312H16V3.70312V3.20312H0V3.70312Z",fill:"#1FBCB3"})],-1)),t("div",Ot,[t("div",jt,r(s.improvement.afterScores.fatigue),1),e[19]||(e[19]=t("small",null,"使用後",-1))])])]),t("div",qt,[e[25]||(e[25]=t("div",{class:"detailDataInnerGroup1"},[t("div",{class:"detailDataItemTag"}),t("h4",null,"心情指北針")],-1)),t("div",Qt,[t("div",Xt,[t("div",$t,r(s.improvement.beforeScores.mood),1),e[22]||(e[22]=t("small",null,"使用前",-1))]),e[24]||(e[24]=t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"17",height:"8",viewBox:"0 0 17 8",fill:"none"},[t("path",{d:"M16.3536 4.05668C16.5488 3.86142 16.5488 3.54483 16.3536 3.34957L13.1716 0.167591C12.9763 -0.0276711 12.6597 -0.0276711 12.4645 0.167591C12.2692 0.362853 12.2692 0.679436 12.4645 0.874698L15.2929 3.70312L12.4645 6.53155C12.2692 6.72681 12.2692 7.0434 12.4645 7.23866C12.6597 7.43392 12.9763 7.43392 13.1716 7.23866L16.3536 4.05668ZM0 3.70312V4.20312H16V3.70312V3.20312H0V3.70312Z",fill:"#EC4F4F"})],-1)),t("div",te,[t("div",ee,r(s.improvement.afterScores.mood),1),e[23]||(e[23]=t("small",null,"使用後",-1))])])]),t("div",se,[e[29]||(e[29]=t("div",{class:"detailDataInnerGroup1"},[t("div",{class:"detailDataItemTag"}),t("h4",null,"血壓氣球")],-1)),t("div",oe,[t("div",ne,[t("div",ie,r(s.improvement.beforeScores.pressure),1),e[26]||(e[26]=t("small",null,"使用前",-1))]),e[28]||(e[28]=t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"17",height:"8",viewBox:"0 0 17 8",fill:"none"},[t("path",{d:"M16.3536 4.05668C16.5488 3.86142 16.5488 3.54483 16.3536 3.34957L13.1716 0.167591C12.9763 -0.0276711 12.6597 -0.0276711 12.4645 0.167591C12.2692 0.362853 12.2692 0.679436 12.4645 0.874698L15.2929 3.70312L12.4645 6.53155C12.2692 6.72681 12.2692 7.0434 12.4645 7.23866C12.6597 7.43392 12.9763 7.43392 13.1716 7.23866L16.3536 4.05668ZM0 3.70312V4.20312H16V3.70312V3.20312H0V3.70312Z",fill:"#74BC1F"})],-1)),t("div",le,[t("div",re,r(s.improvement.afterScores.pressure),1),e[27]||(e[27]=t("small",null,"使用後",-1))])])])],512),[[at,s.isDetailVisible]])]),_:1})])):P("",!0),t("div",ae,[e[30]||(e[30]=t("h3",null,"個人化建議",-1)),t("p",null,r(s.advice),1)]),t("div",ue,[t("button",{class:"nextBtn",onClick:e[3]||(e[3]=(...a)=>s.goNext&&s.goNext(...a))},"返回穿衣紀錄")])])}const _e=gt(_t,[["render",de],["__scopeId","data-v-45a014cf"]]);export{_e as default};
