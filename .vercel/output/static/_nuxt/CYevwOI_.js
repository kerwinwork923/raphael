import{u as D,r as I,o as M,v as g,x as S,A as k,y as o,I as u,a4 as d,z as m,S as y}from"./HfdH-K36.js";import{_ as f}from"./Drq3M-sN.js";import{C as A}from"./zbPE8Z49.js";import{u as b}from"./O0ivr2ua.js";import{u as h}from"./BdfeuyLY.js";import{_ as C}from"./DlAUqK2U.js";const R={class:"invoiceTypeWrap"},G={class:"invoiceTypeGroup"},N={class:"invoiceType"},V={class:"invoiceTypeRadioGroup"},$={for:"invoiceType1"},x={class:"invoiceType"},B={class:"invoiceTypeRadioGroup"},L={for:"invoiceType2"},O={class:"invoiceType"},U={class:"invoiceTypeRadioGroup"},w={for:"invoiceType3"},z={__name:"invoiceType",setup(P){const l=D(),a=JSON.parse(localStorage.getItem("userData")),s=I([]),i=I("1"),r=b(),T=async function(){var n,e;try{const{data:t}=await h("https://23700999.com:8081/HMA/api/fr/maGetRelated",{method:"POST",body:{MID:a.MID,Token:a.Token,MAID:a.MAID,Mobile:a.Mobile,Lang:"zhtw"}},"$z1tfUpAOvN");if(((n=t.value)==null?void 0:n.Result)==="OK"&&((e=t.value)!=null&&e.MInvoiceList)&&(s.value=t.value.MInvoiceList,r.selectedInvoiceId&&s.value.length>0)){const c=s.value.find(p=>String(p.AID)===String(r.selectedInvoiceId));if(c){const p={電子發票:"1",載具:"2",三聯式發票:"3"};i.value=p[c.Desc22]||"1"}}}catch(t){console.error("獲取發票資料失敗：",t)}},v=n=>{const e=s.value.find(t=>t.Desc22===n);return e?e.Content:null},_=()=>{if(!i.value){alert("請選擇發票類型");return}const e={1:"電子發票",2:"載具",3:"三聯式發票"}[i.value],t=s.value.find(c=>c.Desc22===e);t&&t.AID?(r.setSelectedInvoice(t.AID),console.log("已儲存的發票AID至Pinia：",t.AID),l.back()):alert(`請先點擊右方箭頭，設定您的「${e}」資訊。`)};return M(()=>{T()}),(n,e)=>(S(),g("div",R,[k(A,{title:"發票類型",backPath:"/cart/pay"}),e[9]||(e[9]=o("h5",null,"發票類型",-1)),o("div",G,[o("div",N,[o("div",V,[u(o("input",{type:"radio",name:"invoiceType",id:"invoiceType1",value:"1","onUpdate:modelValue":e[0]||(e[0]=t=>i.value=t)},null,512),[[d,i.value]]),o("label",$,[e[6]||(e[6]=o("h4",null,"電子發票",-1)),o("p",null,m(v("電子發票")||"未填寫"),1)])]),o("img",{onClick:e[1]||(e[1]=t=>y(l).push("/cart/invoiceSelect1")),src:f,alt:""})]),o("div",x,[o("div",B,[u(o("input",{type:"radio",name:"invoiceType",id:"invoiceType2",value:"2","onUpdate:modelValue":e[2]||(e[2]=t=>i.value=t)},null,512),[[d,i.value]]),o("label",L,[e[7]||(e[7]=o("h4",null,"載具",-1)),o("p",null,m(v("載具")||"未填寫"),1)])]),o("img",{onClick:e[3]||(e[3]=t=>y(l).push("/cart/invoiceSelect2")),src:f,alt:""})]),o("div",O,[o("div",U,[u(o("input",{type:"radio",name:"invoiceType",id:"invoiceType3",value:"3","onUpdate:modelValue":e[4]||(e[4]=t=>i.value=t)},null,512),[[d,i.value]]),o("label",w,[e[8]||(e[8]=o("h4",null,"三聯式發票",-1)),o("p",null,m(v("三聯式發票")||"未填寫"),1)])]),o("img",{onClick:e[5]||(e[5]=t=>y(l).push("/cart/invoiceSelect3")),src:f,alt:""})])]),o("div",{class:"btnGroup"},[o("button",{onClick:_},"確認")])]))}},j=C(z,[["__scopeId","data-v-4afc78f1"]]);export{j as default};
