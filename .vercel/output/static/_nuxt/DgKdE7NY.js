import{a as A}from"./xsH4HHeE.js";import{a1 as M,r as c,g as D,v as a,x as g,y as o,H as w,z as v,A as L,L as E,B as b,N as V,V as O,W as F,C as U,M as j,j as l,o as H}from"./HfdH-K36.js";import{_ as B}from"./C7_Xho3L.js";import{_ as z}from"./DlAUqK2U.js";const K=M("point",()=>{const f=c(null),s=c([]),t=c([]),n=c(""),_=c(""),p=c(""),d=c(""),i=c(""),m=c("");function I(e){f.value=e,s.value=(e==null?void 0:e.BonusPaperList)||[],t.value=(e==null?void 0:e.TaskList)||[],n.value=(e==null?void 0:e.MemberGradeName)||"",_.value=(e==null?void 0:e.MemberGrade)||"",p.value=(e==null?void 0:e.NowAvaPoints)||"",d.value=(e==null?void 0:e.upInfo)||"",i.value=(e==null?void 0:e.KeepGrade)||"",m.value=(e==null?void 0:e.Privillage)||""}return{nowBonusState:f,bonusPaperList:s,taskList:t,memberGrade:_,memberGradeName:n,nowAvaPoints:p,upInfo:d,keepGrade:i,privillage:m,setNowBonusState:I}}),W=""+new URL("normal.BwsPNDWC.svg",import.meta.url).href,q=""+new URL("titanium.cnygh9cy.svg",import.meta.url).href,J=""+new URL("silver.DVOdN4i2.svg",import.meta.url).href,Z=""+new URL("gold.DT3Fj1Kq.svg",import.meta.url).href,Q={name:"memberGroup",props:{showExchangeGroup:{type:Boolean,default:!1}},setup(f){const s=j(),t=K(),n=c(!1),_=()=>{n.value=!n.value},p=l(()=>t.memberGradeName||""),d=l(()=>t.keepGrade||""),i=l(()=>t.upInfo||""),m=l(()=>{const r=i.value.match(/\d+/);return r?r[0]:""}),I=l(()=>i.value.replace(/\d+/,"")),e=l(()=>(Number(m.value)||0).toLocaleString()),G=l(()=>{const h=(t.nowAvaPoints||"").match(/\d+/);return h?Number(h[0]):0}),P=l(()=>{switch(p.value){case"鈦金會員":return q;case"金卡會員":return Z;case"銀卡會員":return J;case"雲端會員":return W;default:return null}}),k=l(()=>t.bonusPaperList.filter(r=>r.Info==="兌換")),R=l(()=>k.value.length),S=l(()=>(t.privillage||"").split(",").map(r=>r.trim()).filter(r=>r!=="")),y=async()=>{const r=localStorage.getItem("userData"),{MID:h,Token:N,MAID:C,Mobile:x,Name:T}=r?JSON.parse(r):{};if(!h||!N||!C||!x){localStorage.removeItem("userData"),s.push("/");return}else if(T===""){s.push("/changeMember");return}try{const u=await A.post("https://23700999.com:8081/HMA/API_Bonus.jsp",{MID:h,Token:N,MAID:C,Mobile:x});u.status===200?(t.setNowBonusState(u.data.NowBonusState),console.log("NowBonusState:",u.data.NowBonusState),console.log("API_Bonus 資料:",u.data.NowBonusState.Privillage),t.setNowBonusState(u.data.NowBonusState),console.log("Store狀態:",t.privillage)):console.log("API_Bonus error:",u)}catch(u){console.log("API_Bonus catch error:",u)}};return H(()=>{y()}),{privilegeOpen:n,togglePrivilege:_,memberGradeName:p,keepGrade:d,upInfoRaw:i,upInfoNumber:m,upInfoText:I,upInfoNumberFormatted:e,nowPoints:G,levelIcon:P,canExchangeCount:R,privilegeList:S}}},X={class:"memberGroup"},Y={class:"memberTitleGroup"},$={key:0,class:"memberImage"},ee=["src"],oe={class:"memberTitleTextGroup"},se={class:"consumingRecords"},ne={class:"consumingRecordsItem consumingRecordsItem1"},te={class:"consumingRecordsItemContent"},re={class:"consumingRecordsNumber"},le={class:"consumingRecordsItem consumingRecordsItem2"},ie={class:"consumingRecordsItemContent"},ce={class:"consumingRecordsNumber"},ue={class:"privilege"},me={key:0,class:"privilegeContent"},ae={key:0,class:"privilegeHR"},ge={key:1,class:"exchangeGroup"},ve={class:"exchangeText"};function pe(f,s,t,n,_,p){const d=D("router-link");return g(),a("div",X,[o("div",Y,[n.levelIcon?(g(),a("div",$,[o("img",{src:n.levelIcon,alt:"會員等級圖示"},null,8,ee)])):w("",!0),o("div",oe,[o("h3",null,v(n.memberGradeName),1),o("p",null,v(n.keepGrade),1)])]),o("div",se,[o("div",ne,[s[1]||(s[1]=o("h5",null,"再消費",-1)),o("div",te,[o("div",re,v(n.upInfoNumberFormatted),1),o("h6",null,v(n.upInfoText),1)])]),s[3]||(s[3]=o("div",{class:"consumingRecordsLine"},null,-1)),o("div",le,[s[2]||(s[2]=o("h5",null,"累積積分",-1)),o("div",ie,[o("div",ce,v(n.nowPoints)+"點",1)])])]),o("div",ue,[o("div",{class:"privilegeTitleGroup",onClick:s[0]||(s[0]=(...i)=>n.togglePrivilege&&n.togglePrivilege(...i))},[s[4]||(s[4]=o("h4",null,"當前等級特權",-1)),o("img",{class:E(["arrowIcon",{down:n.privilegeOpen}]),src:B,alt:"arrow"},null,2)]),L(F,{name:"fade"},{default:b(()=>[n.privilegeOpen?(g(),a("div",me,[o("ul",null,[(g(!0),a(V,null,O(n.privilegeList,(i,m)=>(g(),a("li",{key:m},v(i),1))),128))])])):w("",!0)]),_:1})]),t.showExchangeGroup?(g(),a("div",ae)):w("",!0),t.showExchangeGroup?(g(),a("div",ge,[s[6]||(s[6]=o("h5",null,"可兌換獎品",-1)),L(d,{to:"pointExange"},{default:b(()=>[o("div",ve,[U(v(n.canExchangeCount)+"項 ",1),s[5]||(s[5]=o("img",{src:B,alt:""},null,-1))])]),_:1})])):w("",!0)])}const we=z(Q,[["render",pe]]),Ie="data:image/svg+xml,%3csvg%20width='17'%20height='16'%20viewBox='0%200%2017%2016'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20id='icon%20/%20close'%3e%3cpath%20id='Vector'%20d='M12.6543%203.84575C12.7246%203.91607%2012.7641%204.01146%2012.7641%204.11091C12.7641%204.21037%2012.7246%204.30575%2012.6543%204.37608L9.03036%208L12.6543%2011.6239C12.7246%2011.6942%2012.7641%2011.7896%2012.7641%2011.8891C12.7641%2011.9885%2012.7246%2012.0839%2012.6543%2012.1543C12.584%2012.2246%2012.4886%2012.2641%2012.3891%2012.2641C12.2897%2012.2641%2012.1943%2012.2246%2012.124%2012.1543L8.50003%208.53033L4.87611%2012.1543C4.80578%2012.2246%204.7104%2012.2641%204.61095%2012.2641C4.51149%2012.2641%204.41611%2012.2246%204.34578%2012.1543C4.27545%2012.0839%204.23595%2011.9885%204.23595%2011.8891C4.23595%2011.7896%204.27545%2011.6942%204.34578%2011.6239L7.9697%208L4.34578%204.37608C4.27545%204.30575%204.23595%204.21037%204.23595%204.11091C4.23595%204.01146%204.27545%203.91607%204.34578%203.84575C4.41611%203.77542%204.51149%203.73591%204.61095%203.73591C4.7104%203.73591%204.80578%203.77542%204.87611%203.84575L8.50003%207.46967L12.124%203.84575C12.1943%203.77542%2012.2897%203.73591%2012.3891%203.73591C12.4886%203.73591%2012.584%203.77542%2012.6543%203.84575Z'%20fill='white'/%3e%3c/g%3e%3c/svg%3e";export{we as _,Ie as a,K as u};
