import{_ as x}from"./W3k4iq7y.js";import{_ as Ye}from"./1SqYRxzD.js";import{_ as xe}from"./DZ0QEswA.js";import{_ as as}from"./0vb5oUBQ.js";import{a1 as ds,M as Q,r as R,F as Z,o as es,e as ss,j as cs,v as a,x as n,y as s,H as h,L,z as r,N as y,V as b,d as ls,J as I,C as D,I as K,$ as Ke,a0 as os,T as ts,A as T,O as $}from"./HfdH-K36.js";import{a as Y}from"./xsH4HHeE.js";import{_ as B}from"./DlAUqK2U.js";import{_ as us}from"./B_UQCELI.js";import{_ as ps,P as ms}from"./Cyv9YNxQ.js";import{c as Ss,s as vs,d as Rs,e as gs}from"./6FQ55jJ2.js";/* empty css        */import{U as hs}from"./CMVGoev_.js";import{u as Xe}from"./BUsOIeYI.js";import"./LVasnhF1.js";import"./BPIBTVAH.js";import"./C7_Xho3L.js";import"./B0rTVoH9.js";import"./fh2N3Yhm.js";const E=ds("sleepRecord",{state:()=>({sleepState:"",bedTime:null,layTimeToSleep:null,getupTime:null,leaveTime:null,sleepTime:null,sleepBreak:null,specialDiet:null,medhelp:null,SleepAgainTime:null,sleepProperty:"很滿意",emotionalState:"還不錯",physicalStrength:"還不錯",dayTimeSleepiness:"沒有嗜睡",workStress:"無",relationshipStress:"無",healthStress:"無",lifestyleChangeStress:"無",financialStress:"無",otherPressureEventt:"",sleepRecData:null,sleepRecIndexData:null,SleepText:"",SleepRecCond:null,SleepRec:null}),getters:{sleepQualityOptions:()=>[{label:"睡得不好",value:0},{label:"睡眠一般",value:1},{label:"睡眠尚可",value:2},{label:"睡得很好",value:3}],dayEmotionOptions:()=>[{label:"情緒低落",value:0},{label:"情緒不穩",value:1},{label:"情緒正常",value:2},{label:"情緒愉快",value:3}],dayStateOptions:()=>[{label:"嚴重不足",value:0},{label:"明顯欠佳",value:1},{label:"有點下降",value:2},{label:"還不錯",value:3}],daySleepOptions:()=>[{label:"嚴重嗜睡",value:0},{label:"中度嗜睡",value:1},{label:"輕度嗜睡",value:2},{label:"沒有嗜睡",value:3}],workStressOptions:()=>[{label:"嚴重影響",value:0},{label:"中度影響",value:1},{label:"輕微影響",value:2},{label:"沒有影響",value:3}],relationshipStressOptions:()=>[{label:"非常不順利",value:0},{label:"有些困難",value:1},{label:"稍微順利",value:2},{label:"非常順利",value:3}],healthStressOptions:()=>[{label:"嚴重影響",value:0},{label:"中度影響",value:1},{label:"輕微影響",value:2},{label:"沒有影響",value:3}],lifestyleChangeStressOptions:()=>[{label:"嚴重影響",value:0},{label:"中度影響",value:1},{label:"輕微影響",value:2},{label:"未調整生活習慣",value:3}],financialStressOptions:()=>[{label:"嚴重壓力",value:0},{label:"中度壓力",value:1},{label:"輕微壓力",value:2},{label:"沒有壓力",value:3}]},actions:{updateScore(l,e){this[l]=e,console.log("更新後的狀態:",this.$state)},async saveSleepRecord(){const l=localStorage.getItem("userData"),{MID:e,Token:c,MAID:o,Mobile:u}=l?JSON.parse(l):{},m=Q();try{if(!e||!c||!o||!u){m.push("/");return}const t=await Y.post("https://23700999.com:8081/HMA/API_SleepRecSave.jsp",{MID:String(e),Token:String(c),MAID:String(o),Mobile:String(u),bedTime:String(this.bedTime),LayTimeToSleep:String(this.layTimeToSleep),getupTime:String(this.getupTime),leaveTime:String(this.leaveTime),SleepTime:String(this.sleepTime),SleepBreak:String(this.sleepBreak),SpecialDiet:String(this.specialDiet),SleepAgainTime:String(this.SleepAgainTime),MedHelp:String(this.medhelp),SleepProperty:String(this.sleepProperty),emotionalState:String(this.emotionalState),physicalStrength:String(this.physicalStrength),daytimeSleepiness:String(this.dayTimeSleepiness),OtherPressureEvent:String(this.otherPressureEventt),workStress:String(this.workStress),relationshipStress:String(this.relationshipStress),healthStress:String(this.healthStress),lifestyleChangeStress:String(this.lifestyleChangeStress),financialStress:String(this.financialStress)});t.status===200?console.log("數據成功保存"):console.error("API 返回的狀態碼不是 200:",t.status)}catch(t){console.error("API 調用時發生錯誤:",t)}},async getSleepRecData(){const l=localStorage.getItem("userData"),{MID:e,Token:c,MAID:o,Mobile:u}=l?JSON.parse(l):{},m=Q();if(!e||!c||!o||!u){m.push("/");return}try{const t=await Y.post("https://23700999.com:8081/HMA/API_SleepRecDetail.jsp",{MID:String(e),Token:String(c),MAID:String(o),Mobile:String(u)});t.status===200&&(console.log(t.data),this.SleepRec=t.data.SleepRec)}catch(t){console.log(t)}},async getIndexSleepRecData(){const l=localStorage.getItem("userData"),{MID:e,Token:c,MAID:o,Mobile:u}=l?JSON.parse(l):{},m=Q();if(!e||!c||!o||!u){m.push("/");return}try{const t=await Y.post("https://23700999.com:8081/HMA/API_SleepRec.jsp",{MID:String(e),Token:String(c),MAID:String(o),Mobile:String(u)});t.status===200&&(console.log(t.data),this.SleepRec=t.data.SleepRec,this.SleepRecCond=t.data.SleepRecCond,Number(t.data.SleepRecCond)<=-1?this.sleepState="sleepRecord":this.sleepState="sleepResult")}catch(t){console.log(t)}}}}),w="data:image/svg+xml,%3csvg%20width='14'%20height='14'%20viewBox='0%200%2014%2014'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20id='Group'%3e%3cpath%20id='Vector'%20d='M7%2013C10.3137%2013%2013%2010.3137%2013%207C13%203.68629%2010.3137%201%207%201C3.68629%201%201%203.68629%201%207C1%2010.3137%203.68629%2013%207%2013Z'%20fill='white'%20stroke='%23B3B3B3'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20id='Vector_2'%20d='M6.33337%204.33333V7.66666H9.66671'%20stroke='%23B3B3B3'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/g%3e%3c/svg%3e",fs={props:{modelValue:{type:String,default:""},currentTimeMode:{type:String,required:!0},placeholder:{type:String,default:"請選擇時間"}},setup(l,{emit:e}){const c=E(),o=R(!1),u=R(l.modelValue),m=R(null);Z(()=>l.modelValue,v=>{v!==u.value&&(u.value=v)});const t=()=>{o.value=!o.value},d=v=>{u.value=v,e("update:modelValue",v),l.currentTimeMode==="layTime"?c.layTimeToSleep=v:l.currentTimeMode==="sleepTime"?c.sleepTime=v:l.currentTimeMode==="sleepAgainTime"&&(c.SleepAgainTime=v),o.value=!1},i=v=>{m.value&&!m.value.contains(v.target)&&(o.value=!1)};es(()=>{document.addEventListener("click",i)}),ss(()=>{document.removeEventListener("click",i)});const p=[];for(let v=0;v<4*8;v++){const _=String(Math.floor(v/4)).padStart(2,"0"),M=String(v%4*15).padStart(2,"0");p.push(`${_}:${M}`)}const f=cs(()=>u.value||l.placeholder);return{showDropdown:o,toggleDropdown:t,selectTime:d,availableTimes:p,formattedTime:f,selectedTime:u,timePicker:m}}},Ts={class:"time-picker",ref:"timePicker"},Ds={key:0,class:"dropdown"},ks=["onClick"];function _s(l,e,c,o,u,m){return n(),a("div",Ts,[s("div",{class:L(["time-display",{"time-picked":o.selectedTime!==""}]),onClick:e[0]||(e[0]=(...t)=>o.toggleDropdown&&o.toggleDropdown(...t))},[e[1]||(e[1]=s("img",{src:w,alt:"Time Icon"},null,-1)),s("span",{class:L({"picked-text":o.selectedTime!==""})},r(o.formattedTime),3)],2),o.showDropdown?(n(),a("div",Ds,[(n(!0),a(y,null,b(o.availableTimes,t=>(n(),a("div",{key:t,class:"time-option",onClick:d=>o.selectTime(t)},r(t),9,ks))),128))])):h("",!0)],512)}const is=B(fs,[["render",_s],["__scopeId","data-v-3a2e4841"]]),ys=ls({props:{modelValue:{type:Number,default:0},options:{type:Array,required:!0},property:{type:String,required:!0}},setup(l){const e=R(l.modelValue),c=E();return{score:e,setScore:(m,t,d)=>{e.value=d,c.updateScore(t,m)},getScoreText:m=>{var d;if(!Array.isArray(l.options))return"";const t=Number(m);return isNaN(t)||t<0||t>=l.options.length?"":((d=l.options[t])==null?void 0:d.label)||""}}}}),bs={class:"scoreBarGroupWrap"},Cs={class:"scoreText"},Ms={class:"scoreBarGroup"},ws={class:"numberGroup"},Is=["onClick"];function Ls(l,e,c,o,u,m){return n(),a("div",bs,[s("div",Cs,r(l.getScoreText(l.score)),1),s("div",Ms,[s("div",{class:"scoreBar",style:I({width:`${l.score*33.3333}%`,backgroundColor:"#74bc1f"})},null,4),s("div",{class:"remainingBar",style:I({width:`${(3-l.score)*33.3333}%`,backgroundColor:"#ccc"})},null,4),s("div",ws,[(n(!0),a(y,null,b(l.options,(t,d)=>(n(),a("div",{key:d,class:L(["number",{selected:l.score>=d}]),onClick:i=>l.setScore(t.label,l.property,d)},r(d),11,Is))),128))])])])}const ns=B(ys,[["render",Ls],["__scopeId","data-v-01bca228"]]),As={props:{value:{type:String,default:""},label:{type:String,default:"選擇時間"}},data(){return{showModal:!1,selectedHour:"",selectedMinute:"",hours:Array.from({length:24},(l,e)=>String(e).padStart(2,"0")),minutes:Array.from({length:60},(l,e)=>String(e).padStart(2,"0"))}},computed:{formattedTime(){return this.selectedHour&&this.selectedMinute?`${this.selectedHour}:${this.selectedMinute}`:this.value}},watch:{value(l){if(l){const[e,c]=l.split(":");this.selectedHour=e,this.selectedMinute=c}}},methods:{confirmTime(){if(this.selectedHour&&this.selectedMinute){const l=`${this.selectedHour}:${this.selectedMinute}`;this.$emit("input",l),this.closeModal()}},closeModal(){this.showModal=!1}}},Bs={class:"select-group"},Gs=["value"],Ps=["value"],Hs={class:"modal-actions"};function Vs(l,e,c,o,u,m){return n(),a("div",null,[s("button",{onClick:e[0]||(e[0]=t=>u.showModal=!0),class:L(["time-picker-btn",{"time-picked":m.formattedTime}])},[e[7]||(e[7]=s("img",{src:w,alt:""},null,-1)),D(" "+r(m.formattedTime||c.label),1)],2),u.showModal?(n(),a("div",{key:0,class:"modal-overlay",onClick:e[6]||(e[6]=(...t)=>m.closeModal&&m.closeModal(...t))},[s("div",{class:"modal-content",onClick:e[5]||(e[5]=os(()=>{},["stop"]))},[s("h3",null,r(c.label),1),s("div",Bs,[K(s("select",{"onUpdate:modelValue":e[1]||(e[1]=t=>u.selectedHour=t)},[e[8]||(e[8]=s("option",{disabled:"",value:""},"小時",-1)),(n(!0),a(y,null,b(u.hours,t=>(n(),a("option",{key:t,value:t},r(t),9,Gs))),128))],512),[[Ke,u.selectedHour]]),e[10]||(e[10]=s("span",null,":",-1)),K(s("select",{"onUpdate:modelValue":e[2]||(e[2]=t=>u.selectedMinute=t)},[e[9]||(e[9]=s("option",{disabled:"",value:""},"分鐘",-1)),(n(!0),a(y,null,b(u.minutes,t=>(n(),a("option",{key:t,value:t},r(t),9,Ps))),128))],512),[[Ke,u.selectedMinute]])]),s("div",Hs,[s("button",{onClick:e[3]||(e[3]=(...t)=>m.confirmTime&&m.confirmTime(...t))},"確認"),s("button",{onClick:e[4]||(e[4]=(...t)=>m.closeModal&&m.closeModal(...t))},"取消")])])])):h("",!0)])}const Os=B(As,[["render",Vs],["__scopeId","data-v-d982c16c"]]),$s={props:{placeholder:{type:String,default:"請選擇睡眠中斷次數"},minValue:{type:Number,default:0},maxValue:{type:Number,default:20}},setup(l){const e=R(!1),c=R(""),o=R("");return{showModal:e,selectedInterruptions:c,confirmSelection:()=>{c.value<l.minValue?c.value=l.minValue:c.value>l.maxValue&&(c.value=l.maxValue),c.value<l.minValue||c.value>l.maxValue?o.value=`次數必須在 ${l.minValue} 到 ${l.maxValue} 之間`:(o.value="",e.value=!1)},closeModal:()=>{e.value=!1,o.value=""},errorMessage:o,placeholder:l.placeholder,minValue:l.minValue,maxValue:l.maxValue}}},Es={class:"sleepInputGroup"},js={class:"select-group"},Ns={class:"modalTitle"},Fs=["min","max"],Us={key:0,class:"error"},Ws={class:"modal-actions"};function Js(l,e,c,o,u,m){return n(),a("div",Es,[s("button",{onClick:e[0]||(e[0]=t=>o.showModal=!0),class:L(["number-picker-btn",{"number-picked":o.selectedInterruptions!==""}])},[e[6]||(e[6]=s("img",{src:w,alt:""},null,-1)),D(" "+r(o.selectedInterruptions!==""?o.selectedInterruptions:o.placeholder),1)],2),o.showModal?(n(),a("div",{key:0,class:"modal-overlay",onClick:e[5]||(e[5]=(...t)=>o.closeModal&&o.closeModal(...t))},[s("div",{class:"modal-content",onClick:e[4]||(e[4]=os(()=>{},["stop"]))},[s("div",js,[s("div",Ns,r(o.placeholder),1),K(s("input",{type:"number","onUpdate:modelValue":e[1]||(e[1]=t=>o.selectedInterruptions=t),min:o.minValue,max:o.maxValue,class:"number-input"},null,8,Fs),[[ts,o.selectedInterruptions,void 0,{number:!0}]]),o.errorMessage?(n(),a("p",Us,r(o.errorMessage),1)):h("",!0)]),s("div",Ws,[s("button",{onClick:e[2]||(e[2]=(...t)=>o.confirmSelection&&o.confirmSelection(...t))},"確認"),s("button",{onClick:e[3]||(e[3]=(...t)=>o.closeModal&&o.closeModal(...t))},"取消")])])])):h("",!0)])}const qs=B($s,[["render",Js],["__scopeId","data-v-572a919c"]]),zs={components:{ScoreBar:ns,TimePicker:is,TimePicker2:Os,TimesOption:qs},setup(){const l=E(),e=R(!1),c=R(),o=R(),u=R(),m=R(),t=R(),d=R(),i=R(!1),p=R(!1),f=R(!1),v=R(!1),_=R(!1),M=R(!1),G=R(!1),A=R(!1),P=R(!1),H=R(!1),V=R(null),j=Array.from({length:24},(S,g)=>String(g).padStart(2,"0")),N=Array.from({length:4},(S,g)=>String(g*15).padStart(2,"0")),F=[0,1,2,3,4,5,6,7,8,9,10,">10"],U=[0,1,2,3,4,5,6,7,8,9,10,">10"],W=[0,1,2,3,4,5,6,7,8,9,10,">10"],J=[0,1,2,3,4,5,6,7];Z([c,o],([S,g])=>{if(S!==void 0&&g!==void 0){const C=`${String(S).padStart(2,"0")}:${String(g).padStart(2,"0")}`;l.bedTime=C}}),Z([u,m],([S,g])=>{if(S!==void 0&&g!==void 0){const C=`${String(S).padStart(2,"0")}:${String(g).padStart(2,"0")}`;l.getupTime=C}}),Z([t,d],([S,g])=>{if(S!==void 0&&g!==void 0){const C=`${String(S).padStart(2,"0")}:${String(g).padStart(2,"0")}`;l.leaveTime=C}});const k=S=>{i.value=S==="1"?!i.value:!1,p.value=S==="1_2"?!p.value:!1,f.value=S==="2"?!f.value:!1,v.value=S==="2_2"?!v.value:!1,_.value=S==="3"?!_.value:!1,M.value=S==="3_2"?!M.value:!1,G.value=S==="5"?!G.value:!1,A.value=S==="5_2"?!A.value:!1,P.value=S==="6"?!P.value:!1,H.value=S==="7"?!H.value:!1},q=(S,g)=>{const C={bedTimeHour:()=>{c.value=g,i.value=!1},bedTimeMinute:()=>{o.value=g,p.value=!1},getupTimeHour:()=>{u.value=g,f.value=!1},getupTimeMinute:()=>{m.value=g,v.value=!1},leaveBedTimeHour:()=>{t.value=g,_.value=!1},leaveBedTimeMinute:()=>{d.value=g,M.value=!1},sleepAgainTime:()=>{l.SleepAgainTime=g,A.value=!1},sleepBreak:()=>{l.sleepBreak=g},peeTime:()=>{l.peeTime=g},specialDiet:()=>{l.specialDiet=g},medhelp:()=>{l.medhelp=g}};C[S]&&C[S]()},z=S=>{switch(S){case"1":k("1");break;case"1_2":k("1_2");break;case"2":k("2");break;case"2_2":k("2_2");break;case"3":k("3");break;case"3_2":k("3_2");break;case"5":k("5");break;case"5_2":k("5_2");break;case"6":k("6");break;case"7":k("7");break}},O=S=>{V.value&&!V.value.contains(S.target)&&(i.value=!1,p.value=!1,f.value=!1,v.value=!1)};return es(()=>{document.addEventListener("click",O)}),ss(()=>{document.removeEventListener("click",O)}),{useSleepRecordData:l,toggleDropdown:z,selectTime:q,bedTimeHour:c,bedTimeMinute:o,getupTimeHour:u,getupTimeMinute:m,showDropdown1:i,showDropdown1_2:p,showDropdown2:f,showDropdown2_2:v,showDropdown5:G,showDropdown5_2:A,showDropdown6:P,showDropdown7:H,showDropdown3:_,showDropdown3_2:M,firstTest:async()=>{if(!e.value){e.value=!0;try{await l.saveSleepRecord(),location.reload()}catch(S){console.error(S)}finally{e.value=!1}}},closeAllSelect:k,hours:j,minutes:N,sleepBreaks:F,specialDiets:U,medhelps:J,isSubmitting:e,leaveBedTimeHour:t,leaveBedTimeMinute:d,sleepAgains:W}}},Qs={class:"sleepRecordWrap"},Zs={class:"sleepRecordList"},Ks={class:"sleepRecord"},Xs={class:"sleepInputGroup"},Ys={class:"selectGroup1"},xs={class:"dropListGroup"},el={class:"dropListHour"},sl={key:0,class:"dropList"},ll=["onClick"],ol={class:"dropListGroup"},tl={class:"dropListMinute"},il={key:0,class:"dropList"},nl=["onClick"],rl={class:"sleepRecord"},al={class:"sleepInputGroup"},dl={class:"sleepRecord"},cl={class:"sleepInputGroup"},ul={class:"selectGroup1"},pl={class:"dropListGroup"},ml={class:"dropListHour"},Sl={key:0,class:"dropList"},vl=["onClick"],Rl={class:"dropListGroup"},gl={class:"dropListMinute"},hl={key:0,class:"dropList"},fl=["onClick"],Tl={class:"sleepRecord"},Dl={class:"sleepInputGroup"},kl={class:"selectGroup1"},_l={class:"dropListGroup"},yl={class:"dropListHour"},bl={key:0,class:"dropList"},Cl=["onClick"],Ml={class:"dropListGroup"},wl={class:"dropListMinute"},Il={key:0,class:"dropList"},Ll=["onClick"],Al={class:"sleepRecord"},Bl={class:"sleepInputGroup"},Gl={class:"sleepInputGroup"},Pl={class:"dropListGroup dropListGroupTimes"},Hl={class:"dropListText"},Vl={key:0,class:"dropList"},Ol=["onClick"],$l={class:"sleepRecord"},El={class:"sleepInputGroup"},jl={class:"sleepRecord"},Nl={class:"sleepInputGroup"},Fl={class:"sleepInputGroup"},Ul={class:"dropListGroup dropListGroupTimes"},Wl={class:"dropListText"},Jl={key:0,class:"dropList"},ql=["onClick"],zl={class:"sleepRecord"},Ql={class:"sleepInputGroup"},Zl={class:"sleepInputGroup"},Kl={class:"dropListGroup dropListGroupTimes"},Xl={class:"dropListText"},Yl={key:0,class:"dropList"},xl=["onClick"],eo={class:"sleepRecord"},so={class:"sleepRecord"},lo={class:"sleepRecord"},oo={class:"sleepRecord"},to={class:"sleepRecord"},io={class:"sleepRecord"},no={class:"sleepRecord"},ro={class:"sleepRecord"},ao={class:"sleepRecord"},co={class:"sleepRecord"},uo={class:"sleepInputGroup"},po=["disabled"];function mo(l,e,c,o,u,m){const t=is,d=ns;return n(),a("div",Qs,[e[42]||(e[42]=s("h5",{class:"pleaseWrite"},"請填寫以下問題",-1)),s("div",Zs,[s("div",Ks,[e[15]||(e[15]=s("h4",null,"1.您通常幾點上床睡覺？",-1)),s("div",Xs,[s("div",Ys,[e[14]||(e[14]=s("img",{class:"timeIcon",src:w,alt:""},null,-1)),s("div",xs,[s("div",{class:"dropListText",onClick:e[0]||(e[0]=i=>o.toggleDropdown("1"))},[e[12]||(e[12]=D(" 點 ")),s("div",el,r(o.bedTimeHour||""),1)]),o.showDropdown1?(n(),a("div",sl,[(n(!0),a(y,null,b(o.hours,(i,p)=>(n(),a("div",{class:"list",key:p,onClick:f=>o.selectTime("bedTimeHour",i)},r(i),9,ll))),128))])):h("",!0)]),s("div",ol,[s("div",{class:"dropListText",onClick:e[1]||(e[1]=i=>o.toggleDropdown("1_2"))},[e[13]||(e[13]=D(" 分 ")),s("div",tl,r(o.bedTimeMinute||""),1)]),o.showDropdown1_2?(n(),a("div",il,[(n(!0),a(y,null,b(o.minutes,(i,p)=>(n(),a("div",{class:"list",key:p,onClick:f=>o.selectTime("bedTimeMinute",i)},r(i),9,nl))),128))])):h("",!0)])])])]),s("div",rl,[e[16]||(e[16]=s("h4",null,"2.您需要多長時間才能入睡？",-1)),s("div",al,[T(t,{currentTimeMode:"layTime",placeholder:"請選擇入睡時間"})])]),s("div",dl,[e[20]||(e[20]=s("h4",null,"3.您通常幾點醒來？",-1)),s("div",cl,[s("div",ul,[e[19]||(e[19]=s("img",{class:"timeIcon",src:w,alt:""},null,-1)),s("div",pl,[s("div",{class:"dropListText",onClick:e[2]||(e[2]=i=>o.toggleDropdown("2"))},[e[17]||(e[17]=D(" 點 ")),s("div",ml,r(o.getupTimeHour||""),1)]),o.showDropdown2?(n(),a("div",Sl,[(n(!0),a(y,null,b(o.hours,(i,p)=>(n(),a("div",{class:"list",key:p,onClick:f=>o.selectTime("getupTimeHour",i)},r(i),9,vl))),128))])):h("",!0)]),s("div",Rl,[s("div",{class:"dropListText",onClick:e[3]||(e[3]=i=>o.toggleDropdown("2_2"))},[e[18]||(e[18]=D(" 分 ")),s("div",gl,r(o.getupTimeMinute||""),1)]),o.showDropdown2_2?(n(),a("div",hl,[(n(!0),a(y,null,b(o.minutes,(i,p)=>(n(),a("div",{class:"list",key:p,onClick:f=>o.selectTime("getupTimeMinute",i)},r(i),9,fl))),128))])):h("",!0)])])])]),s("div",Tl,[e[24]||(e[24]=s("h4",null,"4.您通常幾點離開床",-1)),s("div",Dl,[s("div",kl,[e[23]||(e[23]=s("img",{class:"timeIcon",src:w,alt:""},null,-1)),s("div",_l,[s("div",{class:"dropListText",onClick:e[4]||(e[4]=i=>o.toggleDropdown("3"))},[e[21]||(e[21]=D(" 點 ")),s("div",yl,r(o.leaveBedTimeHour||""),1)]),o.showDropdown3?(n(),a("div",bl,[(n(!0),a(y,null,b(o.hours,(i,p)=>(n(),a("div",{class:"list",key:p,onClick:f=>o.selectTime("leaveBedTimeHour",i)},r(i),9,Cl))),128))])):h("",!0)]),s("div",Ml,[s("div",{class:"dropListText",onClick:e[5]||(e[5]=i=>o.toggleDropdown("3_2"))},[e[22]||(e[22]=D(" 分 ")),s("div",wl,r(o.leaveBedTimeMinute||""),1)]),o.showDropdown3_2?(n(),a("div",Il,[(n(!0),a(y,null,b(o.minutes,(i,p)=>(n(),a("div",{class:"list",key:p,onClick:f=>o.selectTime("leaveBedTimeMinute",i)},r(i),9,Ll))),128))])):h("",!0)])])])]),s("div",Al,[e[26]||(e[26]=s("h4",null,"5.一晚醒來幾次？",-1)),s("div",Bl,[s("div",Gl,[s("div",{class:"selectGroup1",onClick:e[6]||(e[6]=i=>o.toggleDropdown("5"))},[e[25]||(e[25]=s("img",{class:"timeIcon",src:w,alt:""},null,-1)),s("div",Pl,[s("div",Hl,[s("div",{class:L({dropListTextActive:o.useSleepRecordData.sleepBreak!=null})},r(o.useSleepRecordData.sleepBreak!=null?o.useSleepRecordData.sleepBreak:"請選擇睡眠中斷次數"),3)]),o.showDropdown5?(n(),a("div",Vl,[(n(!0),a(y,null,b(o.sleepBreaks,(i,p)=>(n(),a("div",{class:"list",key:p,onClick:f=>o.selectTime("sleepBreak",i)},r(i),9,Ol))),128))])):h("",!0)])])])])]),s("div",$l,[e[27]||(e[27]=s("h4",null,"6.醒來後多久再入睡？",-1)),s("div",El,[T(t,{currentTimeMode:"sleepAgainTime",placeholder:"請選擇時間",onUpdate:e[7]||(e[7]=i=>o.useSleepRecordData.SleepAgainTime=i)})])]),s("div",jl,[e[29]||(e[29]=s("h4",null,"7.近兩週，您有幾次聚餐或應酬?",-1)),s("div",Nl,[s("div",Fl,[s("div",{class:"selectGroup1",onClick:e[8]||(e[8]=i=>o.toggleDropdown("6"))},[e[28]||(e[28]=s("img",{class:"timeIcon",src:w,alt:""},null,-1)),s("div",Ul,[s("div",Wl,[s("div",{class:L({dropListTextActive:o.useSleepRecordData.specialDiet!=null})},r(o.useSleepRecordData.specialDiet!=null?o.useSleepRecordData.specialDiet:"請選擇次數"),3)]),o.showDropdown6?(n(),a("div",Jl,[(n(!0),a(y,null,b(o.specialDiets,(i,p)=>(n(),a("div",{class:"list",key:p,onClick:f=>o.selectTime("specialDiet",i)},r(i),9,ql))),128))])):h("",!0)])])])])]),s("div",zl,[e[31]||(e[31]=s("h4",null,"8.近兩週，您有使用助眠藥物嗎？",-1)),s("div",Ql,[s("div",Zl,[s("div",{class:"selectGroup1",onClick:e[9]||(e[9]=i=>o.toggleDropdown("7"))},[e[30]||(e[30]=s("img",{class:"timeIcon",src:w,alt:""},null,-1)),s("div",Kl,[s("div",Xl,[s("div",{class:L({dropListTextActive:o.useSleepRecordData.medhelp!=null})},r(o.useSleepRecordData.medhelp!=null?o.useSleepRecordData.medhelp:"請選擇每週使用藥物幫助睡眠天數"),3)]),o.showDropdown7?(n(),a("div",Yl,[(n(!0),a(y,null,b(o.medhelps,(i,p)=>(n(),a("div",{class:"list",key:p,onClick:f=>o.selectTime("medhelp",i)},r(i),9,xl))),128))])):h("",!0)])])])])]),s("div",eo,[e[32]||(e[32]=s("h4",null,"9.近兩週，您覺得睡眠品質如何？",-1)),T(d,{options:o.useSleepRecordData.sleepQualityOptions,property:"sleepProperty"},null,8,["options"])]),s("div",so,[e[33]||(e[33]=s("h4",null,"10.白天心情如何?",-1)),T(d,{options:o.useSleepRecordData.dayEmotionOptions,property:"emotionalState"},null,8,["options"])]),s("div",lo,[e[34]||(e[34]=s("h4",null,"11.白天感覺體力、專注力、記憶力如何?",-1)),T(d,{options:o.useSleepRecordData.dayStateOptions,property:"physicalStrength"},null,8,["options"])]),s("div",oo,[e[35]||(e[35]=s("h4",null,"12.白天會不會想睡覺?",-1)),T(d,{options:o.useSleepRecordData.daySleepOptions,property:"dayTimeSleepiness"},null,8,["options"])]),s("div",to,[e[36]||(e[36]=s("h4",null,"13.近兩週,您覺得工作有受到影響嗎？",-1)),T(d,{options:o.useSleepRecordData.workStressOptions,property:"workStress"},null,8,["options"])]),s("div",io,[e[37]||(e[37]=s("h4",null,"14.近兩週,您與身邊重要的人相處時還順利嗎？",-1)),T(d,{options:o.useSleepRecordData.relationshipStressOptions,property:"relationshipStress"},null,8,["options"])]),s("div",no,[e[38]||(e[38]=s("h4",null,"15.近兩週,您或家人的健康狀況對您的生活影響如何？",-1)),T(d,{options:o.useSleepRecordData.healthStressOptions,property:"healthStress"},null,8,["options"])]),s("div",ro,[e[39]||(e[39]=s("h4",null,"16.近兩週,您的生活習慣調整（如飲食、運動）您適應得如何？",-1)),T(d,{options:o.useSleepRecordData.lifestyleChangeStressOptions,property:"lifestyleChangeStress"},null,8,["options"])]),s("div",ao,[e[40]||(e[40]=s("h4",null,"17.近兩週,您的經濟狀況有壓力嗎？",-1)),T(d,{options:o.useSleepRecordData.financialStressOptions,property:"financialStress"},null,8,["options"])]),s("div",co,[e[41]||(e[41]=s("h4",null,"18.最近有讓您壓力大的事件嗎？",-1)),s("div",uo,[K(s("textarea",{name:"",rows:"5",placeholder:"請簡短講述近期壓力事件",id:"","onUpdate:modelValue":e[10]||(e[10]=i=>o.useSleepRecordData.otherPressureEventt=i)},null,512),[[ts,o.useSleepRecordData.otherPressureEventt]])])])]),s("button",{class:"submitBtn",onClick:e[11]||(e[11]=(...i)=>o.firstTest&&o.firstTest(...i)),disabled:o.isSubmitting}," 完成 ",8,po)])}const rs=B(zs,[["render",mo],["__scopeId","data-v-8afd1053"]]),So=ls({components:{RaphaelLoading:x},setup(){const l=E(),e=Q();R(null);const c=R(null);return R(`
    感謝您使用我們的系統請等待<span>${c.value}天</span>後再進行第二次檢測
    `),console.log(l),{useSleepRecordData:l,backToUser:()=>{e.push({name:"user"})},scoreSleepColorFn:gs,computedSleepEmoji:Rs,formatCheckTime2:d=>{if(!d||d.length!==14)return"--";const i=d.slice(0,4),p=d.slice(4,6),f=d.slice(6,8),v=d.slice(8,10),_=d.slice(10,12);return`${i}/${p}/${f} ${v}:${_}`},scoreColorFn:vs,formatTimestamp:d=>{if(!d||d.length!==14)return"--";const i=d.slice(0,4),p=d.slice(4,6),f=d.slice(6,8),v=d.slice(8,10),_=d.slice(10,12);return`${i}/${p}/${f} ${v}:${_}`},computedEmoji2:Ss,getAmPm:d=>{if(!d||typeof d!="string")return"";const i=parseInt(d.split(":")[0],10);return isNaN(i)?"":i>=12?"pm":"am"}}}}),vo={class:"sleepIndex"},Ro={class:"resultTopGroup"},go={class:"resultInfo"},ho={class:"resultHintText"},fo={class:"subText"},To={class:"severity"},Do={class:"imgGroup"},ko=["src"],_o={class:"scoreText"},yo={key:0,class:"subText"},bo={key:1,class:"severity"},Co={class:"imgGroup"},Mo=["src"],wo={class:"scoreText"},Io={class:"sleepDetectResultWrap"},Lo={key:0,class:"sleepDetectResultDIV"},Ao={class:"sleepDetectItem"},Bo={class:"sleepDetectItem"},Go={class:"sleepDetectItem"},Po={key:0},Ho={class:"sleepDetectItem"},Vo={class:"sleepDetectItem"},Oo={class:"sleepDetectItem"},$o={key:1,class:"sleepDetectResultList"},Eo={key:0,class:"nextGroup"},jo={key:2,class:"sleepDetectResultList"},No={key:0,class:"nextGroup"};function Fo(l,e,c,o,u,m){var i,p,f,v,_,M,G,A,P,H,V,j,N,F,U,W,J,k,q,z,O,X,S,g,C,ee,se,le,oe,te,ie,ne,re,ae,de,ce,ue,pe,me,Se,ve,Re,ge,he,fe,Te,De,ke,_e,ye,be,Ce,Me,we,Ie,Le,Ae,Be,Ge,Pe,He,Ve,Oe,$e,Ee,je,Ne,Fe,Ue,We,Je,qe,ze,Qe,Ze;const t=us,d=ms;return n(),a("div",vo,[s("div",Ro,[s("div",go,[s("div",ho,r(l.useSleepRecordData.SleepRecCond=="0"?"不久":l.useSleepRecordData.SleepRecCond+"天")+"後再進行檢測 ",1),s("h5",fo," (本次)"+r(((p=(i=l.useSleepRecordData)==null?void 0:i.SleepRec)==null?void 0:p.length)>0?l.formatCheckTime2(l.useSleepRecordData.SleepRec[0].CheckTime):"No data available"),1),s("div",To,[s("div",Do,[s("img",{src:l.computedSleepEmoji((_=(v=(f=l.useSleepRecordData)==null?void 0:f.SleepRec)==null?void 0:v[0])==null?void 0:_.Score),alt:""},null,8,ko),s("div",_o,[s("div",{class:"score",style:I({color:l.scoreSleepColorFn((G=(M=l.useSleepRecordData.SleepRec)==null?void 0:M[0])==null?void 0:G.Score)})},r((P=(A=l.useSleepRecordData.SleepRec)==null?void 0:A[0])==null?void 0:P.Score),5),e[0]||(e[0]=s("h5",null,"分",-1))])]),T(t,{score:(V=(H=l.useSleepRecordData.SleepRec)==null?void 0:H[0])==null?void 0:V.Score,colorProp:l.scoreColorFn((N=(j=l.useSleepRecordData.SleepRec)==null?void 0:j[0])==null?void 0:N.Score,0)},null,8,["score","colorProp"])]),(U=(F=l.useSleepRecordData)==null?void 0:F.SleepRec)!=null&&U[1]?(n(),a("h5",yo," (前次)"+r(((J=(W=l.useSleepRecordData)==null?void 0:W.SleepRec)==null?void 0:J.length)>1?l.formatCheckTime2(l.useSleepRecordData.SleepRec[1].CheckTime):"No data available"),1)):h("",!0),(q=(k=l.useSleepRecordData.SleepRec)==null?void 0:k[1])!=null&&q.Score?(n(),a("div",bo,[s("div",Co,[s("img",{src:l.computedSleepEmoji((O=(z=l.useSleepRecordData.SleepRec)==null?void 0:z[1])==null?void 0:O.Score),alt:""},null,8,Mo),s("div",wo,[s("div",{class:"score",style:I({color:l.scoreSleepColorFn((S=(X=l.useSleepRecordData.SleepRec)==null?void 0:X[1])==null?void 0:S.Score)})},r((C=(g=l.useSleepRecordData.SleepRec)==null?void 0:g[1])==null?void 0:C.Score),5),e[1]||(e[1]=s("h5",null,"分",-1))])])])):h("",!0),T(t,{score:(se=(ee=l.useSleepRecordData.SleepRec)==null?void 0:ee[1])==null?void 0:se.Score,colorProp:l.scoreColorFn((oe=(le=l.useSleepRecordData.SleepRec)==null?void 0:le[0])==null?void 0:oe.Score,0)},null,8,["score","colorProp"])]),e[2]||(e[2]=s("img",{class:"doctorImg",src:ps,alt:""},null,-1))]),s("div",Io,[e[16]||(e[16]=s("h6",null,"以下為您的睡眠分析結果，僅供醫師參考，不具診斷功能．",-1)),(ie=(te=l.useSleepRecordData)==null?void 0:te.SleepRec)!=null&&ie[0]?(n(),a("div",Lo,[e[9]||(e[9]=s("h3",null,"睡眠周期",-1)),s("h5",null," (本次)"+r(l.formatTimestamp((ne=l.useSleepRecordData.SleepRec[0])==null?void 0:ne.CheckTime)),1),s("section",null,[s("div",Ao,[e[3]||(e[3]=s("h4",null,"入睡時間",-1)),s("p",null,[D(r(((re=l.useSleepRecordData.SleepRec[0])==null?void 0:re.bedTime)||"")+" ",1),s("span",null,r(l.getAmPm((ae=l.useSleepRecordData.SleepRec[0])==null?void 0:ae.bedTime)),1)])]),s("div",Bo,[e[4]||(e[4]=s("h4",null,"離床時間",-1)),s("p",null,[D(r(((de=l.useSleepRecordData.SleepRec[0])==null?void 0:de.getupTime)||"")+" ",1),s("span",null,r(l.getAmPm((ce=l.useSleepRecordData.SleepRec[0])==null?void 0:ce.getupTime)),1)])]),s("div",Go,[e[5]||(e[5]=s("h4",null,"睡眠時長",-1)),s("p",null,r(((ue=l.useSleepRecordData.SleepRec[0])==null?void 0:ue.ccSleepExact)||""),1),s("h5",null," 醒來次數 : "+r(((pe=l.useSleepRecordData.SleepRec[0])==null?void 0:pe.SleepBreak)??"未填寫"),1)])]),(Se=(me=l.useSleepRecordData)==null?void 0:me.SleepRec)!=null&&Se[1]?(n(),a("div",Po,[s("h5",null," (前次)"+r(l.formatTimestamp((ve=l.useSleepRecordData.SleepRec[1])==null?void 0:ve.CheckTime)),1),s("section",null,[s("div",Ho,[e[6]||(e[6]=s("h4",null,"入睡時間",-1)),s("p",null,[D(r(((Re=l.useSleepRecordData.SleepRec[1])==null?void 0:Re.bedTime)||"")+" ",1),s("span",null,r(l.getAmPm((ge=l.useSleepRecordData.SleepRec[1])==null?void 0:ge.bedTime)),1)])]),s("div",Vo,[e[7]||(e[7]=s("h4",null,"離床時間",-1)),s("p",null,[D(r(((he=l.useSleepRecordData.SleepRec[1])==null?void 0:he.getupTime)||"")+" ",1),s("span",null,r(l.getAmPm((fe=l.useSleepRecordData.SleepRec[1])==null?void 0:fe.getupTime)),1)])]),s("div",Oo,[e[8]||(e[8]=s("h4",null,"睡眠時長",-1)),s("p",null,r(((Te=l.useSleepRecordData.SleepRec[1])==null?void 0:Te.ccSleepExact)||""),1),s("h5",null," 醒來次數 : "+r(((De=l.useSleepRecordData.SleepRec[1])==null?void 0:De.SleepBreak)??"未填寫"),1)])])])):h("",!0)])):h("",!0),(_e=(ke=l.useSleepRecordData)==null?void 0:ke.SleepRec)!=null&&_e[0]?(n(),a("div",$o,[e[12]||(e[12]=s("div",{class:"titleGroup"},[s("h3",null,"身心指數")],-1)),s("h5",null," (本次)"+r(l.formatTimestamp((ye=l.useSleepRecordData.SleepRec[0])==null?void 0:ye.CheckTime)),1),T(d,{score:(be=l.useSleepRecordData.SleepRec[0])==null?void 0:be.HMindexRatio,emojiSrc:l.computedEmoji2((Ce=l.useSleepRecordData.SleepRec[0])==null?void 0:Ce.HMindexRatio)},null,8,["score","emojiSrc"]),s("h4",null,[e[10]||(e[10]=D(" 嚴重程度 : ")),s("span",{style:I({color:l.scoreColorFn((Me=l.useSleepRecordData.SleepRec[0])==null?void 0:Me.HMindexRatio,0)})},r((we=l.useSleepRecordData.SleepRec[0])==null?void 0:we.HMindexRatio)+"% ",5)]),(Le=(Ie=l.useSleepRecordData)==null?void 0:Ie.SleepRec)!=null&&Le[1]?(n(),a("div",Eo,[s("h5",null," (前次)"+r(l.formatTimestamp((Ae=l.useSleepRecordData.SleepRec[1])==null?void 0:Ae.CheckTime)),1),T(d,{score:(Be=l.useSleepRecordData.SleepRec[1])==null?void 0:Be.HMindexRatio,emojiSrc:l.computedEmoji2((Ge=l.useSleepRecordData.SleepRec[1])==null?void 0:Ge.HMindexRatio)},null,8,["score","emojiSrc"]),s("h4",null,[e[11]||(e[11]=D(" 嚴重程度 : ")),s("span",{style:I({color:l.scoreColorFn((Pe=l.useSleepRecordData.SleepRec[1])==null?void 0:Pe.HMindexRatio,0)})},r((He=l.useSleepRecordData.SleepRec[1])==null?void 0:He.HMindexRatio)+"% ",5)])])):h("",!0)])):h("",!0),(Oe=(Ve=l.useSleepRecordData)==null?void 0:Ve.SleepRec)!=null&&Oe[0]?(n(),a("div",jo,[e[15]||(e[15]=s("div",{class:"titleGroup"},[s("h3",null,"壓力指數")],-1)),s("h5",null," (本次)"+r(l.formatTimestamp(($e=l.useSleepRecordData.SleepRec[0])==null?void 0:$e.CheckTime)),1),T(d,{score:(Ee=l.useSleepRecordData.SleepRec[0])==null?void 0:Ee.PressureindexRatio,emojiSrc:l.computedEmoji2((je=l.useSleepRecordData.SleepRec[0])==null?void 0:je.PressureindexRatio)},null,8,["score","emojiSrc"]),s("h4",null,[e[13]||(e[13]=D(" 嚴重程度 : ")),s("span",{style:I({color:l.scoreColorFn((Ne=l.useSleepRecordData.SleepRec[0])==null?void 0:Ne.PressureindexRatio,1)})},r((Fe=l.useSleepRecordData.SleepRec[0])==null?void 0:Fe.PressureindexRatio)+"% ",5)]),(We=(Ue=l.useSleepRecordData)==null?void 0:Ue.SleepRec)!=null&&We[1]?(n(),a("div",No,[s("h5",null," (前次)"+r(l.formatTimestamp((Je=l.useSleepRecordData.SleepRec[1])==null?void 0:Je.CheckTime)),1),T(d,{score:(qe=l.useSleepRecordData.SleepRec[1])==null?void 0:qe.PressureindexRatio,emojiSrc:l.computedEmoji2((ze=l.useSleepRecordData.SleepRec[1])==null?void 0:ze.PressureindexRatio)},null,8,["score","emojiSrc"]),s("h4",null,[e[14]||(e[14]=D(" 嚴重程度 : ")),s("span",{style:I({color:l.scoreColorFn((Qe=l.useSleepRecordData.SleepRec[1])==null?void 0:Qe.PressureindexRatio,1)})},r((Ze=l.useSleepRecordData.SleepRec[1])==null?void 0:Ze.PressureindexRatio)+"% ",5)])])):h("",!0)])):h("",!0)])])}const Uo=B(So,[["render",Fo],["__scopeId","data-v-4353136f"]]),Wo={components:{RaphaelLoading:x,TagList:xe,sleepRecordWrap:rs,UserResultWrap:hs,TitleMenu:Ye,useSeo:Xe},setup(){const l=E();Xe({title:"",description:"NeuroPlus神經調節家提供專業的自律神經檢測服務，運用FDA認證AI技術，透過人臉辨識快速分析HRV數據，幫助您了解自律神經狀態。",url:"https://neuroplus.com.tw"});const e=R(!1);return(async()=>{try{e.value=!0,await l.getIndexSleepRecData(),await l.getSleepRecData()}catch(o){console.log("Error in cc function:",o)}e.value=!1})(),{loading:e,useSleepRecordData:l}}},Jo={class:"userRecord"},qo={class:"userRecoreWrap"};function zo(l,e,c,o,u,m){const t=x,d=Ye,i=xe,p=as,f=rs,v=Uo;return n(),a("div",Jo,[o.loading?(n(),$(t,{key:0})):h("",!0),T(d,{Text:o.useSleepRecordData.sleepState==="sleepResult"?"結果分析":"健康紀錄",link:"/user"},null,8,["Text"]),s("div",qo,[T(i),o.useSleepRecordData.sleepState==="sleepRecord"?(n(),$(p,{key:0,stepTexts:["填寫問卷","結果分析"],currentStep:0})):h("",!0),o.useSleepRecordData.sleepState==="sleepResult"?(n(),$(p,{key:1,stepTexts:["填寫問卷","結果分析"],currentStep:1})):h("",!0),o.useSleepRecordData.sleepState==="sleepRecord"?(n(),$(f,{key:2})):h("",!0),o.useSleepRecordData.sleepState==="sleepResult"?(n(),$(v,{key:3})):h("",!0)])])}const pt=B(Wo,[["render",zo],["__scopeId","data-v-fd9f9ed0"]]);export{pt as default};
