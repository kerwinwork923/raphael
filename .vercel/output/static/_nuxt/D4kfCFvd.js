import{O as R,x as C,B as F,v as b,H as M,y as s,z as H,W as Z,M as E,r as i,F as j,o as J,A as K,I as d,T as O,U as g,S as r,C as z,a2 as W,N as q}from"./HfdH-K36.js";import{_ as Q,a as T}from"./CMF1m4mw.js";import{_ as $}from"./DlAUqK2U.js";import{u as X}from"./BUsOIeYI.js";const w="data:image/svg+xml,%3csvg%20width='24'%20height='25'%20viewBox='0%200%2024%2025'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20id='icon%20/%20password-lock'%3e%3cpath%20id='Vector'%20d='M7%2010.5V7.5C7%206.17392%207.52678%204.90215%208.46447%203.96447C9.40215%203.02678%2010.6739%202.5%2012%202.5C13.3261%202.5%2014.5979%203.02678%2015.5355%203.96447C16.4732%204.90215%2017%206.17392%2017%207.5V10.5M13%2016.5C13%2017.0523%2012.5523%2017.5%2012%2017.5C11.4477%2017.5%2011%2017.0523%2011%2016.5C11%2015.9477%2011.4477%2015.5%2012%2015.5C12.5523%2015.5%2013%2015.9477%2013%2016.5ZM5%2010.5H19C20.1046%2010.5%2021%2011.3954%2021%2012.5V20.5C21%2021.6046%2020.1046%2022.5%2019%2022.5H5C3.89543%2022.5%203%2021.6046%203%2020.5V12.5C3%2011.3954%203.89543%2010.5%205%2010.5Z'%20stroke='%231BA39B'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/g%3e%3c/svg%3e",Y=""+new URL("people.C4gMlmHG.png",import.meta.url).href,ee={key:0,class:"loginPageAlert"},se={class:"loginPageAlertBox"},te={__name:"BaseAlert",props:{show:Boolean,message:{type:String,default:"帳號或密碼錯誤喔~"}},emits:["close"],setup(S){return(y,u)=>(C(),R(Z,{name:"fade"},{default:F(()=>[S.show?(C(),b("div",ee,[s("div",se,[s("h4",null,H(S.message),1),s("div",{class:"loginPageAlertClose",onClick:u[0]||(u[0]=l=>y.$emit("close"))},u[1]||(u[1]=[s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},[s("path",{d:"M18 6L6 18M6 6L18 18",stroke:"#B1C0D8","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)]))])])):M("",!0)]),_:1}))}},oe=$(te,[["__scopeId","data-v-bf84eb47"]]),k="data:image/svg+xml,%3csvg%20width='24'%20height='25'%20viewBox='0%200%2024%2025'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20id='icon%20/%20eye'%3e%3cg%20id='Vector'%3e%3cpath%20d='M2.06153%2012.848C1.97819%2012.6235%201.97819%2012.3765%202.06153%2012.152C2.87323%2010.1838%204.25104%208.50103%206.0203%207.31689C7.78955%206.13275%209.87057%205.50061%2011.9995%205.50061C14.1285%205.50061%2016.2095%206.13275%2017.9788%207.31689C19.748%208.50103%2021.1258%2010.1838%2021.9375%2012.152C22.0209%2012.3765%2022.0209%2012.6235%2021.9375%2012.848C21.1258%2014.8161%2019.748%2016.499%2017.9788%2017.6831C16.2095%2018.8672%2014.1285%2019.4994%2011.9995%2019.4994C9.87057%2019.4994%207.78955%2018.8672%206.0203%2017.6831C4.25104%2016.499%202.87323%2014.8161%202.06153%2012.848Z'%20stroke='%231BA39B'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M11.9995%2015.5C13.6564%2015.5%2014.9995%2014.1568%2014.9995%2012.5C14.9995%2010.8431%2013.6564%209.49999%2011.9995%209.49999C10.3427%209.49999%208.99953%2010.8431%208.99953%2012.5C8.99953%2014.1568%2010.3427%2015.5%2011.9995%2015.5Z'%20stroke='%231BA39B'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/g%3e%3c/g%3e%3c/svg%3e",f="data:image/svg+xml,%3csvg%20width='24'%20height='25'%20viewBox='0%200%2024%2025'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20id='icon%20/%20eye-closed'%3e%3cpath%20id='Vector'%20d='M15%2018.5L14.278%2015.25M2%208.5C2.74835%2010.5508%204.10913%2012.3219%205.8979%2013.5733C7.68667%2014.8247%209.81695%2015.4959%2012%2015.4959C14.1831%2015.4959%2016.3133%2014.8247%2018.1021%2013.5733C19.8909%2012.3219%2021.2516%2010.5508%2022%208.5M20%2015.5L18.274%2013.45M4%2015.5L5.726%2013.45M9%2018.5L9.722%2015.25'%20stroke='%231BA39B'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/g%3e%3c/svg%3e",le={class:"loginPage"},ne={class:"loginLeft"},ie={key:0,class:"loginForm"},ae={class:"inputGroup"},re={class:"inputGroup"},ue=["type"],de=["src"],ce={class:"optionGroup"},ve={key:1,class:"loginForm backendChangePassword"},pe={class:"inputGroup"},me=["value"],ge={class:"inputGroup"},we=["type"],ke=["src"],fe={class:"inputGroup"},Ce=["type"],ye=["src"],he={class:"inputGroup"},Ie=["type"],be=["src"],xe={key:2,class:"loginForm backendChangePassword"},Ae={class:"inputGroup"},Ne={class:"inputGroup"},Be=["type"],Me=["src"],Se={class:"inputGroup"},Pe=["type"],_e=["src"],Ve={__name:"index",setup(S){X({title:"",description:"NeuroPlus神經調節家提供專業的自律神經檢測服務，運用FDA認證AI技術，透過人臉辨識快速分析HRV數據，幫助您了解自律神經狀態。",url:"https://neuroplus.com.tw"});const y=E(),u=i("login"),l=i(localStorage.getItem("rememberID")||""),v=i(""),c=i(!!l.value),x=i(!1),a=i({}),h=o=>a.value[o]=!a.value[o],P=i(!1),D=i(""),n=o=>{D.value=o,P.value=!0},I=i(""),p=i(""),A=i(""),N=i("");i("");const m=i(""),B=i(""),_=(...o)=>o.some(e=>!e||!e.trim()),V=(o,e=6)=>o.length<e;j(c,o=>{o?localStorage.setItem("rememberID",l.value):localStorage.removeItem("rememberID")}),j(l,o=>{c.value&&localStorage.setItem("rememberID",o)});const G=async()=>{if(_(l.value,v.value)){n("請輸入帳號與密碼");return}if(V(v.value)){n("密碼需至少 6 碼");return}try{const e=await(await fetch("https://23700999.com:8081/HMA/API_AdminLogin.jsp",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({AdminID:l.value,Password:v.value})})).json();e.Result==="OK"?(c.value?(localStorage.setItem("backendToken",e.Token),localStorage.setItem("adminID",l.value),localStorage.setItem("rememberID",l.value)):(sessionStorage.setItem("backendToken",e.Token),sessionStorage.setItem("adminID",l.value)),y.push("/raphaelBackend/member")):e.Result==="First"?(u.value="first",I.value=v.value):n("帳號或密碼錯誤喔~")}catch{n("伺服器錯誤，請稍後再試")}},L=async()=>{if(_(I.value,p.value,A.value)){n("所有欄位皆為必填");return}if(V(p.value)){n("新密碼需至少 6 碼");return}if(p.value!==A.value){n("兩次輸入的新密碼不一致");return}try{const e=await(await fetch("https://23700999.com:8081/HMA/API_FirstAdminLogin.jsp",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({AdminID:l.value,Password:I.value,NewPassword:p.value})})).json();if(e.Result==="OK"){const t=c.value?localStorage:sessionStorage;t.setItem("backendToken",e.Token),t.setItem("adminID",l.value),e.AdminName&&t.setItem("adminName",e.AdminName),c.value&&localStorage.setItem("rememberID",l.value),y.push("/raphaelBackend/member")}else n("修改失敗："+((e==null?void 0:e.Message)||(e==null?void 0:e.Result)||"未知錯誤"))}catch{n("伺服器錯誤")}},U=async()=>{if(_(N.value,m.value,B.value)){n("所有欄位皆為必填");return}if(V(m.value)){n("新密碼需至少 6 碼");return}if(m.value!==B.value){n("兩次輸入的新密碼不一致");return}try{const e=await(await fetch("https://23700999.com:8081/HMA/API_AdminModifyPassword.jsp",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({AdminID:N.value,NewPassword:m.value})})).json();e.Result==="OK"?(n("重設成功，請使用新密碼登入"),u.value="login"):n("重設失敗："+e.Result)}catch{n("伺服器錯誤")}};return J(()=>{(localStorage.getItem("backendToken")||sessionStorage.getItem("backendToken"))&&y.push("/raphaelBackend/member")}),(o,e)=>(C(),b(q,null,[K(oe,{show:P.value,message:D.value,onClose:e[0]||(e[0]=t=>P.value=!1)},null,8,["show","message"]),s("div",le,[s("div",ne,[e[29]||(e[29]=s("div",{class:"logoGroup"},[s("img",{src:Q,alt:""}),s("h1",null,"Neuro-Plus+")],-1)),u.value==="login"?(C(),b("div",ie,[s("div",ae,[d(s("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>l.value=t),type:"text",placeholder:"請輸入帳號"},null,512),[[O,l.value]]),e[17]||(e[17]=s("img",{src:T,class:"icon user-icon"},null,-1))]),s("div",re,[d(s("input",{type:x.value?"text":"password","onUpdate:modelValue":e[2]||(e[2]=t=>v.value=t),placeholder:"請輸入密碼"},null,8,ue),[[g,v.value]]),e[18]||(e[18]=s("img",{src:w,class:"icon lock-icon"},null,-1)),s("img",{class:"icon eye-icon",src:x.value?r(k):r(f),onClick:e[3]||(e[3]=t=>x.value=!x.value)},null,8,de)]),s("div",ce,[s("label",null,[d(s("input",{type:"checkbox","onUpdate:modelValue":e[4]||(e[4]=t=>c.value=t)},null,512),[[W,c.value]]),e[19]||(e[19]=z(" 記住帳號"))]),s("a",{class:"forgotLink",onClick:e[5]||(e[5]=t=>u.value="reset")},"忘記密碼？")]),s("button",{class:"loginBtn",onClick:G},"登入")])):M("",!0),u.value==="first"?(C(),b("div",ve,[e[24]||(e[24]=s("h3",null,"首次登入請修改密碼",-1)),s("div",pe,[s("input",{value:l.value,disabled:""},null,8,me),e[20]||(e[20]=s("img",{src:T,class:"icon user-icon"},null,-1))]),s("div",ge,[d(s("input",{type:a.value.firstOld?"text":"password","onUpdate:modelValue":e[6]||(e[6]=t=>I.value=t),placeholder:"舊密碼"},null,8,we),[[g,I.value]]),e[21]||(e[21]=s("img",{src:w,class:"icon lock-icon"},null,-1)),s("img",{class:"icon eye-icon",src:a.value.firstOld?r(k):r(f),onClick:e[7]||(e[7]=t=>h("firstOld"))},null,8,ke)]),s("div",fe,[d(s("input",{type:a.value.firstNew?"text":"password","onUpdate:modelValue":e[8]||(e[8]=t=>p.value=t),placeholder:"新密碼"},null,8,Ce),[[g,p.value]]),e[22]||(e[22]=s("img",{src:w,class:"icon lock-icon"},null,-1)),s("img",{class:"icon eye-icon",src:a.value.firstNew?r(k):r(f),onClick:e[9]||(e[9]=t=>h("firstNew"))},null,8,ye)]),s("div",he,[d(s("input",{type:a.value.firstNew2?"text":"password","onUpdate:modelValue":e[10]||(e[10]=t=>A.value=t),placeholder:"再次輸入新密碼"},null,8,Ie),[[g,A.value]]),e[23]||(e[23]=s("img",{src:w,class:"icon lock-icon"},null,-1)),s("img",{class:"icon eye-icon",src:a.value.firstNew2?r(k):r(f),onClick:e[11]||(e[11]=t=>h("firstNew2"))},null,8,be)]),s("button",{class:"loginBtn",onClick:L}," 送出後請使用新密碼登入 ")])):M("",!0),u.value==="reset"?(C(),b("div",xe,[e[28]||(e[28]=s("h3",null,"重設密碼",-1)),s("div",Ae,[d(s("input",{"onUpdate:modelValue":e[12]||(e[12]=t=>N.value=t),placeholder:"請輸入帳號"},null,512),[[O,N.value]]),e[25]||(e[25]=s("img",{src:T,class:"icon user-icon"},null,-1))]),s("div",Ne,[d(s("input",{type:a.value.resetNew?"text":"password","onUpdate:modelValue":e[13]||(e[13]=t=>m.value=t),placeholder:"新密碼"},null,8,Be),[[g,m.value]]),e[26]||(e[26]=s("img",{src:w,class:"icon lock-icon"},null,-1)),s("img",{class:"icon eye-icon",src:a.value.resetNew?r(k):r(f),onClick:e[14]||(e[14]=t=>h("resetNew"))},null,8,Me)]),s("div",Se,[d(s("input",{type:a.value.resetNew2?"text":"password","onUpdate:modelValue":e[15]||(e[15]=t=>B.value=t),placeholder:"再次輸入新密碼"},null,8,Pe),[[g,B.value]]),e[27]||(e[27]=s("img",{src:w,class:"icon lock-icon"},null,-1)),s("img",{class:"icon eye-icon",src:a.value.resetNew2?r(k):r(f),onClick:e[16]||(e[16]=t=>h("resetNew2"))},null,8,_e)]),s("button",{class:"loginBtn",onClick:U}," 送出後請使用新密碼登入 ")])):M("",!0),e[30]||(e[30]=s("footer",{class:"loginFooter"}," © 2024 智平衡健康事業股份有限公司 all rights reserved. ",-1))]),e[31]||(e[31]=s("div",{class:"loginRight"},[s("img",{src:Y,alt:""})],-1))])],64))}},$e=$(Ve,[["__scopeId","data-v-f4f0da61"]]);export{$e as default};
