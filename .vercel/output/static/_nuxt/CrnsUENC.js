import{_ as Te}from"./W3k4iq7y.js";import{_ as we}from"./1SqYRxzD.js";import{u as Be,_ as Ie,a as J}from"./DgKdE7NY.js";import{M as Le,r as u,j as p,o as be,G as Se,F as re,v as i,x as n,O as Ae,H as m,y as e,I as h,A as W,C as c,L as S,B as Ge,z as l,N as f,V as _,J as De,K as x,W as Me,X as Ve}from"./HfdH-K36.js";import{_ as D}from"./DCGXGCbS.js";import{a as ce}from"./xsH4HHeE.js";import{u as Ne}from"./BUsOIeYI.js";import"./DlAUqK2U.js";import"./C7_Xho3L.js";const Pe=""+new URL("helperIcon.D8_HWr4R.svg",import.meta.url).href,k=""+new URL("todayTaskIcon.-AImVtlS.svg",import.meta.url).href,$e="data:image/svg+xml,%3csvg%20width='18'%20height='18'%20viewBox='0%200%2018%2018'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20id='icon%20/%20check'%3e%3crect%20x='0.5'%20y='0.5'%20width='17'%20height='17'%20rx='8.5'%20stroke='%231FBCB3'/%3e%3cpath%20id='Vector'%20d='M15%205.25L7.5%2012.75L3.75%209'%20stroke='%231FBCB3'%20stroke-width='1.25'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/g%3e%3c/svg%3e",Ue="data:image/svg+xml,%3csvg%20width='16'%20height='16'%20viewBox='0%200%2016%2016'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20id='Group'%3e%3cpath%20id='Vector'%20d='M8%2014.75C11.7279%2014.75%2014.75%2011.7279%2014.75%208C14.75%204.27208%2011.7279%201.25%208%201.25C4.27208%201.25%201.25%204.27208%201.25%208C1.25%2011.7279%204.27208%2014.75%208%2014.75Z'%20stroke='%23666'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20id='Vector_2'%20d='M7.25%205V8.75H11'%20stroke='%23666'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/g%3e%3c/svg%3e",Ye="data:image/svg+xml,%3csvg%20width='16'%20height='16'%20viewBox='0%200%2016%2016'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20id='Group'%3e%3cpath%20id='Vector'%20d='M8%2014.75C11.7279%2014.75%2014.75%2011.7279%2014.75%208C14.75%204.27208%2011.7279%201.25%208%201.25C4.27208%201.25%201.25%204.27208%201.25%208C1.25%2011.7279%204.27208%2014.75%208%2014.75Z'%20stroke='%23FEAC4A'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20id='Vector_2'%20d='M7.25%205V8.75H11'%20stroke='%23FEAC4A'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/g%3e%3c/svg%3e",Ee=""+new URL("pointExchangeGift.BOU5L2D4.svg",import.meta.url).href,Fe=""+new URL("canUse.D3Uo_Yic.svg",import.meta.url).href,je=""+new URL("canUseLimit.Cb8VjVED.svg",import.meta.url).href,de=""+new URL("gift.B2y9MFwP.png",import.meta.url).href,He={class:"point"},Oe={class:"helperGroup"},qe={class:"pointContentGroup"},ze={class:"pointContentList"},Ke={key:0,class:"todayTask"},Je={class:"todayTaskSubTitle"},We={class:"todayTaskItemGroup"},Ze={class:"todayTaskText"},Xe={class:"todayTaskOption"},Qe={class:"todayTaskItemNumber"},et={key:0},tt={key:1,src:$e,alt:"打勾"},st={key:0,class:"todayTaskItemButton"},ot=["onClick"],lt={key:1,style:{color:"#ec7d7d"}},nt={class:"todayProgressBar"},it={key:1},at={class:"pointRecordSelectGroup"},ut={class:"yearSelectGroup"},rt={class:"yearBox"},ct=["onClick"],dt={class:"monthSelectGroup"},vt={class:"monthBox"},pt=["onClick"],mt={class:"pointRecordGroup"},gt={class:"pointRecordList"},ht={class:"pointRecordText"},ft={key:0},xt={class:"pointRecordNumber"},_t={key:0,class:"notDetectData"},kt={key:2},Rt={class:"exchangeRecordSelectGroup"},Ct={class:"yearSelectGroup"},yt={class:"yearBox"},Tt=["onClick"],wt={class:"monthSelectGroup"},Bt={class:"monthBox"},It=["onClick"],Lt={class:"exchangeRecordGroup"},bt={class:"exchangeRecordList"},St={class:"exchangeRecordText"},At={key:0,src:Fe,alt:""},Gt={key:1,src:je,alt:""},Dt={class:"exchangeRecordListOption"},Mt=["onClick"],Vt={key:0,class:"notDetectData"},Nt={key:3},Pt={class:"verificationBox"},$t={class:"verificationNumber"},Ut={class:"couponBox"},Yt={class:"couponBoxCompleted"},M=2024,Zt={__name:"point",setup(Et){Ne({title:"",description:"NeuroPlus神經調節家提供專業的自律神經檢測服務，運用FDA認證AI技術，透過人臉辨識快速分析HRV數據，幫助您了解自律神經狀態。",url:"https://neuroplus.com.tw"});const Z=Be(),ve=Le(),pe=u(!1),r=u("todayTask"),R=u(new Date().getFullYear()),C=u(new Date().getMonth()+1),L=u(new Date().getFullYear()),y=u(new Date().getMonth()+1),T=u(!1),w=u(!1),B=u(!1),I=u(!1),V=u([]),me=u([]),A=u([]);u([]);const N=u(!1),P=u(!1),$=u(!1),U=u(!1),X=localStorage.getItem("userData"),{MID:Y,Token:E,MAID:F,Mobile:j}=X?JSON.parse(X):{};(!Y||!E||!F||!j)&&ve.push("/");const d=u({DigitalCode:"",AvaPoints:"",Name:"",CreateTime:"",UseTime:""});function b(){N.value=!1,P.value=!1,$.value=!1,U.value=!1}function Q(s){if(!s)return"";const t=s.replace(/\D/g,"");if(t.length===14){const a=t.slice(0,4),g=t.slice(4,6),K=t.slice(6,8),o=t.slice(8,10),v=t.slice(10,12);return`${a}/${g}/${K} ${o}:${v}`}else return s}function ge(s){if(b(),d.value={DigitalCode:s.DigitalCode,AvaPoints:s.AvaPoints,Name:s.Name,CreateTime:s.CreateTime,Info:s.Info,UseTime:Q(s.UseTime)},s.Info.includes("可立即使用"))N.value=!0;else if(s.Info.includes("可使用日")){P.value=!0;const t=s.Info.split(":")[1]||"";d.value.Info=t.trim()}else $.value=!0;U.value=!0}function G(s){r.value=s,s==="exchangeRecord"?O():s==="pointRecord"&&H()}const ee=p(()=>{const s=new Date().getFullYear();return Array.from({length:s-M+1},(t,a)=>M+a)}),he=p(()=>{const s=new Date().getFullYear();return Array.from({length:s-M+1},(t,a)=>M+a)}),te=p(()=>ee.value.reduce((s,t)=>(s[t]=Array.from({length:12},(a,g)=>g+1),s),{})),se=p(()=>te.value[R.value]||[]),oe=p(()=>te.value[L.value]||[]);function le(s){s==="point"?(T.value=!T.value,w.value=!1):s==="exchange"&&(B.value=!B.value,I.value=!1)}function ne(s="point"){s==="exchange"?(I.value=!I.value,B.value=!1):(w.value=!w.value,T.value=!1)}function fe(s,t){R.value=s,C.value=se.value[0]||1,T.value=!1,console.log("Selected "+t+" year:",s)}function ie(s,t){t==="exchange"?(y.value=s,I.value=!1):(C.value=s,w.value=!1),console.log("Selected "+t+" month:",s)}function xe(s){L.value=s,y.value=oe.value[0]||1,B.value=!1,console.log("Selected exchange year:",s)}function ae(s){const t=document.querySelector(".yearBox"),a=document.querySelector(".monthBox");t&&!t.contains(s.target)&&!s.target.closest(".yearSelectGroup")&&(T.value=!1,B.value=!1),a&&!a.contains(s.target)&&!s.target.closest(".monthSelectGroup")&&(w.value=!1,I.value=!1)}async function H(){const s=R.value?String(R.value):"",t=C.value?String(C.value).padStart(2,"0"):"";try{const a=await ce.post("https://23700999.com:8081/HMA/API_BonusRec.jsp",{MID:Y,Token:E,MAID:F,Mobile:j,Yr:s,Mn:t});if(a.status===200&&a.data.Result==="OK"){const g=a.data.BonusRec||{};V.value=g.BonusRecList||[],me.value=g.BonusPaperList||[],console.log("[fetchBonusRec] => ",a.data)}else console.error("[fetchBonusRec] error =>",a)}catch(a){console.error("[fetchBonusRec] catch =>",a)}}async function O(){const s=y.value?String(y.value).padStart(2,"0"):"";try{const t=await ce.post("https://23700999.com:8081/HMA/API_ExchangeRec.jsp",{MID:Y,Token:E,MAID:F,Mobile:j,Yr:String(L.value),Mn:s});if(t.status===200&&t.data.Result==="OK"){const a=t.data.ExchangeRec||{};A.value=a.BonusExchangeList||[],console.log("exchangeRecordList => ",A.value)}}catch(t){console.error(t)}}be(()=>{document.addEventListener("click",ae),H(),O()}),Se(()=>{document.removeEventListener("click",ae)}),re([R,C],()=>{r.value==="pointRecord"&&H()}),re([L,y],()=>{r.value==="exchangeRecord"&&O()});const q=p(()=>Z.taskList);function _e(s){if(s.Info!=="去完成")return;let t="";switch(s.Name){case"使用紀錄":t="/UsageHistory";break;case"自律神經檢測":t="/weekly";break;case"生活紀錄檢測":t="/userRecord";break;case"寶貝記錄檢測":t="/babyRecord";break;default:return}window.open(t,"_blank")}const ue=p(()=>q.value.filter(s=>s.Info==="已經完成").length),z=p(()=>q.value.length),ke=p(()=>z.value?ue.value/z.value*100:0),Re=p(()=>{var s;return((s=Z.nowBonusState)==null?void 0:s.Cando)||0}),Ce=async()=>{r.value="pointRules",await Ve();const s=document.querySelector(".pointRulesInfo");s&&s.scrollIntoView({behavior:"smooth"})};return(s,t)=>{const a=Te,g=we,K=Ie;return n(),i(f,null,[pe.value?(n(),Ae(a,{key:0})):m("",!0),e("div",He,[W(g,{Text:"獎勵積分",link:"/user"}),e("div",Oe,[e("div",{class:"helper"},[t[8]||(t[8]=e("div",{class:"helperTitle"},[e("img",{src:Pe,alt:""}),c(" 小幫手 ")],-1)),t[9]||(t[9]=e("p",null," 每消費100元獲得1點積分。會員等級越高，積分越多！ 快來累積積分，享受更多回饋！ ",-1)),e("h6",{onClick:Ce},"查看完整積分規則"),t[10]||(t[10]=e("div",{class:"shadowGroup"},[e("div",{class:"shadow1"}),e("div",{class:"shadow2"})],-1))]),W(K,{showExchangeGroup:!0}),e("div",qe,[e("div",ze,[e("div",{class:S(["pointContentListItem",{pointContentListItemActive:r.value==="todayTask"}]),onClick:t[0]||(t[0]=o=>G("todayTask"))}," 今日任務 ",2),e("div",{class:S(["pointContentListItem",{pointContentListItemActive:r.value==="pointRecord"}]),onClick:t[1]||(t[1]=o=>G("pointRecord"))}," 積分紀錄 ",2),e("div",{class:S(["pointContentListItem",{pointContentListItemActive:r.value==="exchangeRecord"}]),onClick:t[2]||(t[2]=o=>G("exchangeRecord"))}," 兌換紀錄 ",2),e("div",{class:S(["pointContentListItem",{pointContentListItemActive:r.value==="pointRules"}]),onClick:t[3]||(t[3]=o=>G("pointRules"))}," 積分規則 ",2)]),W(Me,{name:"fade",mode:"out-in"},{default:Ge(()=>[(n(),i("div",{key:r.value},[r.value==="todayTask"?(n(),i("div",Ke,[e("div",Je,[t[11]||(t[11]=c(" 完成度 ")),e("span",null,l(ue.value)+"/"+l(z.value),1)]),e("div",We,[(n(!0),i(f,null,_(q.value,(o,v)=>(n(),i("div",{class:"todayTaskItem",key:v},[e("div",Ze,[t[12]||(t[12]=e("img",{src:k,alt:""},null,-1)),c(" "+l(o.Name),1)]),e("div",Xe,[e("div",Qe,[o.Info=="去完成"||o.Info=="已經完成"?(n(),i("div",et," +"+l(o.Points),1)):m("",!0),o.Info==="已經完成"?(n(),i("img",tt)):m("",!0)]),o.Info==="去完成"?(n(),i("div",st,[e("button",{onClick:ye=>_e(o)},"去完成",8,ot)])):o.Info&&o.Info!=="已經完成"?(n(),i("small",lt,l(o.Info),1)):m("",!0)])]))),128))]),t[13]||(t[13]=e("div",{class:"todayTaskHR"},null,-1)),e("h6",null,"今日可獲得總積分："+l(Re.value),1),e("div",nt,[e("div",{class:"todayProgress",style:De({width:ke.value+"%"})},null,4)])])):r.value==="pointRecord"?(n(),i("div",it,[e("div",at,[e("div",ut,[t[14]||(t[14]=e("img",{src:D,alt:"年份篩選"},null,-1)),e("div",{class:"monthText",onClick:t[4]||(t[4]=o=>le("point"))},l(R.value)+"年 ",1),h(e("div",rt,[(n(!0),i(f,null,_(ee.value,o=>(n(),i("div",{class:"year",key:o,onClick:v=>fe(o,"point")},l(o),9,ct))),128))],512),[[x,T.value]])]),e("div",dt,[t[15]||(t[15]=e("img",{src:D,alt:"月份篩選"},null,-1)),e("div",{class:"monthText",onClick:t[5]||(t[5]=o=>ne("point"))},l(C.value)+" 月 ",1),h(e("div",vt,[(n(!0),i(f,null,_(se.value,o=>(n(),i("div",{class:"month",key:o,onClick:v=>ie(o)},l(o)+" 月 ",9,pt))),128))],512),[[x,w.value]])])]),e("div",mt,[(n(!0),i(f,null,_(V.value,(o,v)=>(n(),i("div",{class:"pointRecordDiv",key:v},[e("div",gt,[t[17]||(t[17]=e("div",{class:"imgGroup"},[e("img",{class:"Time",src:Ue,alt:""})],-1)),e("div",ht,[e("h4",null,l(o.CreateTime),1),e("h5",null,l(o.Name),1),o.Info?(n(),i("h6",ft,[t[16]||(t[16]=e("img",{src:Ye,alt:""},null,-1)),c(" "+l(o.Info),1)])):m("",!0)])]),e("div",xt,"+"+l(o.Points),1)]))),128)),V.value.length===0?(n(),i("div",_t," 尚無積分紀錄 ")):m("",!0)])])):r.value==="exchangeRecord"?(n(),i("div",kt,[e("div",Rt,[e("div",Ct,[t[18]||(t[18]=e("img",{src:D,alt:"年份篩選"},null,-1)),e("div",{class:"monthText",onClick:t[6]||(t[6]=o=>le("exchange"))},l(L.value)+"年 ",1),h(e("div",yt,[(n(!0),i(f,null,_(he.value,o=>(n(),i("div",{class:"year",key:o,onClick:v=>xe(o)},l(o),9,Tt))),128))],512),[[x,B.value]])]),e("div",wt,[t[19]||(t[19]=e("img",{src:D,alt:"月份篩選"},null,-1)),e("div",{class:"monthText",onClick:t[7]||(t[7]=o=>ne("exchange"))},l(y.value)+" 月 ",1),h(e("div",Bt,[(n(!0),i(f,null,_(oe.value,o=>(n(),i("div",{class:"month",key:o,onClick:v=>ie(o,"exchange")},l(o)+" 月 ",9,It))),128))],512),[[x,I.value]])])]),e("div",Lt,[(n(!0),i(f,null,_(A.value,(o,v)=>(n(),i("div",{class:"exchangeRecordDiv",key:v},[e("div",bt,[t[20]||(t[20]=e("div",{class:"imageGroup"},[e("img",{src:Ee,alt:"券圖示"})],-1)),e("div",St,[e("h4",null,l(o.CreateTime),1),e("h5",null,l(o.Name.replace("#"," "))+" 兌換完成",1),e("h6",{class:S({canUse:o.Info.includes("可立即使用"),canUseLimit:o.Info.includes("可使用日")})},[o.Info.includes("可立即使用")?(n(),i("img",At)):o.Info.includes("可使用日")?(n(),i("img",Gt)):m("",!0),c(" "+l(o.Info),1)],2)])]),e("div",Dt,[e("button",{onClick:ye=>ge(o)},"查看",8,Mt)])]))),128)),A.value.length===0?(n(),i("div",Vt," 尚無兌換紀錄 ")):m("",!0)])])):r.value==="pointRules"?(n(),i("div",Nt,t[21]||(t[21]=[e("div",{class:"pointRulesInfo"},[e("ul",null,[e("li",null,"雲端會員：每消費100元獲得1點積分"),e("li",null,"銀卡會員：每消費100元獲得1點積分"),e("li",null,"金卡會員：每消費100元獲得1.2點積分"),e("li",null,"鈦金會員：每消費100元獲得1.5點積分"),e("li",null,"使用範圍：積分僅限於此平台使用"),e("li",null,[c(" 有效期限：積分自獲得日起"),e("span",null,"12個月"),c("內有效，請及時使用 ")])])],-1),e("div",{class:"pointRulesListGroup"},[e("div",{class:"pointRulesList"},[e("div",{class:"pointRulesText"},[e("img",{src:k,alt:""}),e("h4",null,"使用紀錄")]),e("div",{class:"pointRulesNumber"},"+5")])],-1),e("div",{class:"pointRulesListGroup"},[e("div",{class:"pointRulesList"},[e("div",{class:"pointRulesText"},[e("img",{src:k,alt:""}),e("h4",null,"自律神經檢測")]),e("div",{class:"pointRulesNumber"},"+10")])],-1),e("div",{class:"pointRulesListGroup"},[e("div",{class:"pointRulesList"},[e("div",{class:"pointRulesText"},[e("img",{src:k,alt:""}),e("h4",null,"生活紀錄檢測")]),e("div",{class:"pointRulesNumber"},"+10")])],-1),e("div",{class:"pointRulesListGroup"},[e("div",{class:"pointRulesList"},[e("div",{class:"pointRulesText"},[e("img",{src:k,alt:""}),e("h4",null,"寶貝記錄檢測")]),e("div",{class:"pointRulesNumber"},"+10")])],-1),e("div",{class:"pointRulesListGroup"},[e("div",{class:"pointRulesList"},[e("div",{class:"pointRulesText"},[e("img",{src:k,alt:""}),e("h4",null,"點擊分享連結並完成註冊")]),e("div",{class:"pointRulesNumber"},"+100")])],-1),e("div",{class:"pointRulesListGroup"},[e("div",{class:"pointRulesList"},[e("div",{class:"pointRulesText"},[e("img",{src:k,alt:""}),e("h4",null,"完成分享後進行產品購買")]),e("div",{class:"pointRulesNumber"},"+200")])],-1)]))):m("",!0)]))]),_:1})])])]),h(e("div",Pt,[e("div",$t,l(d.value.DigitalCode||"12345678"),1),e("h4",null,l(d.value.Name.replace("#"," ")),1),t[23]||(t[23]=e("h5",null,"可用於療程商品折抵",-1)),e("div",{onClick:b,class:"verificationClose"},t[22]||(t[22]=[e("img",{src:J,alt:""},null,-1)]))],512),[[x,N.value]]),h(e("div",Ut,[t[28]||(t[28]=e("div",{class:"couponBoxImgGroup"},[e("img",{src:de,alt:""})],-1)),e("h4",null,l(d.value.Name.replace("#"," ")),1),t[29]||(t[29]=e("h5",null,"可用於療程商品折抵",-1)),e("ul",null,[e("li",null,[t[24]||(t[24]=c(" 兌換日期 ")),e("span",null,l(d.value.CreateTime),1)]),e("li",null,[t[25]||(t[25]=c(" 兌換積分 ")),e("span",null,l(d.value.AvaPoints),1)]),e("li",null,[t[26]||(t[26]=c(" 可使用日 ")),e("span",null,l(d.value.Info),1)])]),e("div",{class:"couponBoxClose",onClick:b},t[27]||(t[27]=[e("img",{src:J,alt:""},null,-1)]))],512),[[x,P.value]]),h(e("div",Yt,[t[34]||(t[34]=e("div",{class:"couponBoxImgGroup"},[e("img",{src:de,alt:""})],-1)),e("h4",null,l(d.value.Name.replace("#"," ")),1),t[35]||(t[35]=e("h5",null,"可用於療程商品折抵",-1)),e("ul",null,[e("li",null,[t[30]||(t[30]=c(" 兌換日期 ")),e("span",null,l(d.value.CreateTime),1)]),e("li",null,[t[31]||(t[31]=c(" 兌換積分 ")),e("span",null,l(d.value.AvaPoints),1)]),e("li",null,[t[32]||(t[32]=c(" 已使用日 ")),e("span",null,l(Q(d.value.UseTime)),1)])]),e("div",{class:"couponBoxClose",onClick:b},t[33]||(t[33]=[e("img",{src:J,alt:""},null,-1)]))],512),[[x,$.value]]),h(e("div",{class:"pointCover",onClick:b},null,512),[[x,U.value]])],64)}}};export{Zt as default};
