import{_ as q}from"./-OuEz4cf.js";import{_ as G}from"./C4EKiFTB.js";import{_ as J}from"./BDSW-ypD.js";import{_ as V,u as z}from"./D0yNnPHr.js";import{a6 as K,r as m,Z,D as Q,v as A,M as E,K as w,x as e,z as F,y as d,N as M,B as O,L as U,U as X,t as f}from"./D70xjexz.js";import{a as B}from"./CCb-kr4I.js";import{f as Y,c as $,s as tt,b as et}from"./D7B7LOx5.js";import{_ as ot}from"./C2uo4fds.js";import{_ as st}from"./DlAUqK2U.js";import"./B1QmaLQs.js";import"./t-MFjoUR.js";const at={components:{SymptomResult:V},setup(){const b=z();console.log(b.diffenenceObj);const a=K(),H=m(),t=m(),h=m(),y=m(),u=m(),l=m(),S=m(),P=a.params.detail,L=async()=>{const r=localStorage.getItem("userData"),{MID:c,Token:s,MAID:_,Mobile:D}=r?JSON.parse(r):{};try{const o=await B.post("https://23700999.com:8081/HMA/API_ANSFirstDetail.jsp",{MID:String(c),Token:String(s),MAID:String(_),Mobile:String(D),AID:P});if(o.status===200){if(console.log(o),h.value=o.data,H.value={CheckTime:o.data.CheckTime},o.data.History.length>0)try{const n=await B.post("https://23700999.com:8081/HMA/API_ANSFirstDetail.jsp",{MID:String(c),Token:String(s),MAID:String(_),Mobile:String(D),AID:o.data.History[0].preAID});n.status===200?(y.value=n.data,t.value={CheckTime:n.data.CheckTime}):console.error("Response2 status not OK:",n.status)}catch(n){console.error("Error in response2 request:",n)}else console.warn("No History data available.");console.log(h.value)}}catch(o){throw console.error("Error while fetching questions:",o),o}},x=async()=>{const r=localStorage.getItem("userData"),{MID:c,Token:s,MAID:_,Mobile:D}=r?JSON.parse(r):{};try{const o=await B.post("https://23700999.com:8081/HMA/API_ANSSecond.jsp",{MID:String(c),Token:String(s),MAID:String(_),Mobile:String(D),AID:P,preAID:u==null?void 0:u.value});o.status===200&&(console.log(o.data),l.value={...o.data,C1Symptom:"精神系統",C2Symptom:"神經系統",C3Symptom:"血液循環系統",C4Symptom:"感官系統",C5Symptom:"心肺系統",C6Symptom:"過敏免疫系統",C7Symptom:"腸胃系統",C8Symptom:"泌尿生殖系統",C9Symptom:"血液循環系統"})}catch(o){throw console.error("Error while fetching questions:",o),o}};(async()=>{S.value=!0,await L(),await x(),S.value=!1})();const C=()=>{window.location.href="/user"},v=localStorage.getItem("userData"),p=v?JSON.parse(v):null,k=m((p==null?void 0:p.Sex)||null),g=m("Serious"),I=r=>{g.value=r},T=Z([]);return Q(()=>{var r,c;if(T.length=0,console.log(l.value),l.value&&h.value)for(let s=1;s<=9;s++)T.push({name:l.value[`C${s}Symptom`]||"",difference:l.value[`C${s}Difference`]||"",solve:l.value[`C${s}Solve`]||"",ratio:h.value[`C${s}Ratio`]||"",ratioPre:((r=y.value)==null?void 0:r[`C${s}Ratio`])||"",desc:h.value[`C${s}Desc`]||"",descPre:((c=y.value)==null?void 0:c[`C${s}Desc`])||""})}),{store:b,formatTimestamp:Y,backToUser:C,computedScore:r=>parseFloat(r.replace("%",""))||0,selectedType:g,changeSymptomLavel:I,sex:k,symptoms:T,computedEmoji2:$,scoreColorFn:tt,formatTimestamp3:et,TitleMenu:G,theLatestData:h,diffenenceObj:l,theLatestDataPreData:y,theLatestDataPreData:y,theLatestHistory:H,theLatestHistoryPre:t,loading:S}}},rt={class:"resultWrapDetail"},ct={class:"resultTopGroup"},lt={class:"resultInfo"},nt={class:"subText"},it={class:"severity"},mt={class:"imgGroup"},dt=["src"],ht={class:"scoreText"},_t={class:"severityText"},Dt={key:0,class:"subText nextSunText"},yt={key:1,class:"severity"},St={class:"imgGroup"},pt=["src"],Tt={class:"scoreText"},ft={class:"severityText"},ut={class:"resultListGroup"},vt={class:"backToUserBtnGroupWeekly"};function gt(b,a,H,t,h,y){var L,x,N,C,v,p,k,g,I,T,R,r,c,s,_,D,o,n,j;const u=q,l=G,S=J,P=V;return f(),A(U,null,[t.loading?(f(),E(u,{key:0})):w("",!0),e("div",rt,[F(l,{Text:"結果分析",link:"/weekly",scrollToBottom:!0}),e("div",ct,[e("div",lt,[e("h5",nt," (本次)"+d(t.formatTimestamp((L=t.theLatestHistory)==null?void 0:L.CheckTime)),1),e("div",it,[e("div",mt,[e("img",{src:t.computedEmoji2((x=t.theLatestData)==null?void 0:x.TotalScore),alt:""},null,8,dt),e("div",ht,[e("div",{class:"score",style:M({color:t.scoreColorFn((N=t.theLatestData)==null?void 0:N.TotalScore,t.sex)})},d((C=t.theLatestData)==null?void 0:C.TotalScore),5),a[1]||(a[1]=e("h5",null,"分",-1))])]),F(S,{score:(v=t.theLatestData)==null?void 0:v.TotalScore,colorProp:t.scoreColorFn((p=t.theLatestData)==null?void 0:p.TotalScore,t.sex)},null,8,["score","colorProp"]),e("h6",_t,[a[2]||(a[2]=O(" 嚴重程度 : ")),e("span",{style:M({color:t.scoreColorFn((k=t.theLatestData)==null?void 0:k.TotalScore,t.sex)})},d((g=t.theLatestData)==null?void 0:g.TotalRatio)+"("+d((I=t.theLatestData)==null?void 0:I.TotalDesc)+") ",5)])]),(T=t.theLatestHistoryPre)!=null&&T.CheckTime?(f(),A("h5",Dt," (前次)"+d(t.formatTimestamp((R=t.theLatestHistoryPre)==null?void 0:R.CheckTime)),1)):w("",!0),(r=t.theLatestDataPreData)!=null&&r.TotalScore?(f(),A("div",yt,[e("div",St,[e("img",{src:t.computedEmoji2((c=t.theLatestDataPreData)==null?void 0:c.TotalScore),alt:""},null,8,pt),e("div",Tt,[e("div",{class:"score",style:M({color:t.scoreColorFn((s=t.theLatestDataPreData)==null?void 0:s.TotalScore,t.sex)})},d((_=t.theLatestDataPreData)==null?void 0:_.TotalScore),5),a[3]||(a[3]=e("h5",null,"分",-1))])]),F(S,{score:t.theLatestDataPreData.TotalScore,colorProp:t.scoreColorFn((D=t.theLatestDataPreData)==null?void 0:D.TotalScore,t.sex)},null,8,["score","colorProp"]),e("h6",ft,[a[4]||(a[4]=O(" 嚴重程度 : ")),e("span",{style:M({color:t.scoreColorFn((o=t.theLatestDataPreData)==null?void 0:o.TotalScore,t.sex)})},d((n=t.theLatestDataPreData)==null?void 0:n.TotalRatio)+"("+d((j=t.theLatestDataPreData)==null?void 0:j.TotalDesc)+") ",5)])])):w("",!0)]),a[5]||(a[5]=e("img",{class:"doctorImg",src:ot,alt:""},null,-1))]),a[6]||(a[6]=e("h4",{class:"textResultText"},"以下為分類系統的自律神經分析結果",-1)),e("div",ut,[(f(!0),A(U,null,X(t.symptoms,(i,W)=>(f(),E(P,{key:W,symptomName:i.name,symptomDifference:i.difference,symptomSolve:i.solve,symptomRatio:i.ratio,symptomPreRatio:i.ratioPre,symptomDesc:i.desc,symptomPreDesc:i.descPre,theLatestHistory:t.theLatestHistory,theLatestHistoryPre:t.theLatestHistoryPre,sex:t.sex},null,8,["symptomName","symptomDifference","symptomSolve","symptomRatio","symptomPreRatio","symptomDesc","symptomPreDesc","theLatestHistory","theLatestHistoryPre","sex"]))),128))]),e("div",vt,[e("button",{class:"backToUserBtnWeekly",onClick:a[0]||(a[0]=(...i)=>t.backToUser&&t.backToUser(...i))}," 返回會員中心 ")])])],64)}const Rt=st(at,[["render",gt]]);export{Rt as default};
