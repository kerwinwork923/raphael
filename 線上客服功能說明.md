# 線上客服功能說明

## 功能概述

本專案實現了完整的線上客服系統，包含用戶端聊天介面和後台管理功能。

## 主要功能

### 1. 聊天介面功能
- **即時聊天**: 支援文字訊息發送和接收
- **媒體上傳**: 支援照片、影片上傳
- **格式轉換**: 自動將 HEIC 格式轉換為 JPG
- **檔案限制**: 最大 30MB，影片最長 10 秒
- **滿意度評分**: 1-5 星評分系統

### 2. 媒體上傳功能

#### 支援的媒體類型
- **照片**: 支援 JPG、PNG、HEIC 等格式
- **影片**: 支援 MP4 等格式
- **格式轉換**: HEIC 自動轉換為 JPG（使用 Canvas API）

#### 上傳限制
- **檔案大小**: 最大 30MB
- **影片長度**: 最長 10 秒（包含 10 秒）
- **預覽功能**: 上傳前可預覽，支援刪除和重選

#### 操作方式
1. **拍照**: 點擊相機圖示直接拍照
2. **錄影**: 點擊錄影圖示直接錄製影片
3. **相簿**: 點擊相簿圖示選擇現有照片/影片

### 3. 滿意度評分系統

#### 評分等級
- **1 星**: 非常不滿意 😠
- **2 星**: 不太滿意 😕
- **3 星**: 普通 😐
- **4 星**: 滿意 😊
- **5 星**: 非常滿意 😍

#### 觸發方式
- 後台客服點擊「標記為處理完成」按鈕
- 自動顯示滿意度評分視窗
- 用戶可選擇評分或略過

### 4. 後台管理功能

#### 客服狀態管理
- **在線**: 客服可正常處理客戶問題
- **忙碌**: 客服暫時無法處理新問題
- **離線**: 客服不在線

#### 服務完成管理
- **處理完成按鈕**: 標記服務為完成狀態
- **滿意度觸發**: 自動向用戶顯示評分視窗
- **狀態追蹤**: 即時更新客服狀態

#### 滿意度統計
- **評分統計**: 各星級評分次數統計
- **平均評分**: 計算整體平均滿意度
- **最近評分**: 顯示最近的評分記錄

## 技術實現

### 前端技術
- **Vue 3**: 使用 Composition API
- **SCSS**: 樣式管理
- **響應式設計**: 支援各種螢幕尺寸

### 媒體處理
- **Canvas API**: HEIC 格式轉換（原生瀏覽器支援）
- **檔案驗證**: 大小和時長限制
- **預覽功能**: 即時預覽上傳內容

### 狀態管理
- **事件系統**: 前後台通訊
- **即時更新**: 狀態同步
- **資料持久化**: 評分記錄保存

## 使用方式

### 用戶端
1. 進入 `/CSRobot` 頁面
2. 開始與客服聊天
3. 使用媒體按鈕上傳照片/影片
4. 等待客服處理完成
5. 進行滿意度評分

### 後台管理
1. 進入 `/admin/customer-service` 頁面
2. 設定客服狀態
3. 處理客戶問題
4. 點擊「標記為處理完成」
5. 查看滿意度統計

## 檔案結構

```
pages/
├── CSRobot.vue                 # 用戶端聊天頁面
└── admin/
    └── customer-service.vue    # 後台管理頁面

components/
└── CustomerServiceAdmin.vue    # 後台管理組件

composables/
└── useMediaConverter.ts        # 媒體轉換工具
```

## 注意事項

1. **瀏覽器相容性**: 需要支援現代瀏覽器功能
2. **檔案大小**: 注意 30MB 限制
3. **影片長度**: 確保不超過 10 秒
4. **格式支援**: HEIC 轉換使用原生 Canvas API，無需額外套件
5. **效能考量**: 大型檔案可能影響載入速度

## 未來擴展

1. **WebSocket 整合**: 即時通訊功能
2. **檔案壓縮**: 自動壓縮大型檔案
3. **多語言支援**: 國際化功能
4. **語音訊息**: 語音錄製和播放
5. **檔案分享**: 支援更多檔案類型
