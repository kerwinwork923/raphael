import{_ as X}from"./-OuEz4cf.js";import{_ as se}from"./C4EKiFTB.js";import{_ as te}from"./DcEmJnRO.js";import{_ as pe}from"./Cudz5-xp.js";import{Y as ue,J as q,r as _,o as oe,e as le,i as me,t as n,v as r,x as s,O as w,y as p,L as k,U as R,K as f,d as ie,N as z,B as C,Q,S as ee,P as ne,R as re,F as Y,z as T,M as P}from"./D70xjexz.js";import{a as Z}from"./CCb-kr4I.js";import{_ as B}from"./DlAUqK2U.js";import{_ as ve}from"./BDSW-ypD.js";import{d as Se,e as _e,f as ge,s as fe}from"./D7B7LOx5.js";import{_ as he}from"./C2uo4fds.js";/* empty css        */import{U as Te}from"./B6CxJwg3.js";import"./C7_Xho3L.js";import"./B0rTVoH9.js";import"./fh2N3Yhm.js";const O=ue("sleepRecord",{state:()=>({sleepState:"",bedTime:null,layTimeToSleep:null,getupTime:null,leaveTime:null,sleepTime:null,sleepBreak:null,specialDiet:null,medhelp:null,SleepAgainTime:null,sleepProperty:"很滿意",emotionalState:"還不錯",physicalStrength:"還不錯",dayTimeSleepiness:"沒有嗜睡",workStress:"無",relationshipStress:"無",healthStress:"無",lifestyleChangeStress:"無",financialStress:"無",otherPressureEventt:"",sleepRecData:null,sleepRecIndexData:null,SleepText:"",SleepRecCond:null,SleepRec:null}),getters:{sleepQualityOptions:()=>[{label:"很滿意",value:0},{label:"有點不佳",value:1},{label:"中度不佳",value:2},{label:"嚴重不足",value:3}],dayEmotionOptions:()=>[{label:"還不錯",value:0},{label:"有點下降",value:1},{label:"明顯欠佳",value:2},{label:"嚴重不足",value:3}],dayStateOptions:()=>[{label:"還不錯",value:0},{label:"有點下降",value:1},{label:"明顯欠佳",value:2},{label:"嚴重不足",value:3}],daySleepOptions:()=>[{label:"沒有嗜睡",value:0},{label:"輕度嗜睡",value:1},{label:"中度嗜睡",value:2},{label:"嚴重嗜睡",value:3}],defaultOptions:()=>[{label:"無",value:0},{label:"輕度",value:1},{label:"中度",value:2},{label:"嚴重",value:3}]},actions:{updateScore(o,e){this[o]=e,console.log("更新後的狀態:",this.$state)},async saveSleepRecord(){const o=localStorage.getItem("userData"),{MID:e,Token:a,MAID:t,Mobile:c}=o?JSON.parse(o):{},d=q();try{if(!e||!a||!t||!c){d.push("/");return}const l=await Z.post("https://23700999.com:8081/HMA/API_SleepRecSave.jsp",{MID:String(e),Token:String(a),MAID:String(t),Mobile:String(c),bedTime:String(this.bedTime),LayTimeToSleep:String(this.layTimeToSleep),getupTime:String(this.getupTime),leaveTime:String(this.leaveTime),SleepTime:String(this.sleepTime),SleepBreak:String(this.sleepBreak),SpecialDiet:String(this.specialDiet),SleepAgainTime:String(this.SleepAgainTime),MedHelp:String(this.medhelp),SleepProperty:String(this.sleepProperty),emotionalState:String(this.emotionalState),physicalStrength:String(this.physicalStrength),daytimeSleepiness:String(this.dayTimeSleepiness),OtherPressureEvent:String(this.otherPressureEventt),workStress:String(this.workStress),relationshipStress:String(this.relationshipStress),healthStress:String(this.healthStress),lifestyleChangeStress:String(this.lifestyleChangeStress),financialStress:String(this.financialStress)});l.status===200?console.log("數據成功保存"):console.error("API 返回的狀態碼不是 200:",l.status)}catch(l){console.error("API 調用時發生錯誤:",l)}},async getSleepRecData(){const o=localStorage.getItem("userData"),{MID:e,Token:a,MAID:t,Mobile:c}=o?JSON.parse(o):{},d=q();if(!e||!a||!t||!c){d.push("/");return}try{const l=await Z.post("https://23700999.com:8081/HMA/API_SleepRecDetail.jsp",{MID:String(e),Token:String(a),MAID:String(t),Mobile:String(c)});l.status===200&&(console.log(l.data),this.SleepRec=l.data.SleepRec)}catch(l){console.log(l)}},async getIndexSleepRecData(){const o=localStorage.getItem("userData"),{MID:e,Token:a,MAID:t,Mobile:c}=o?JSON.parse(o):{},d=q();if(!e||!a||!t||!c){d.push("/");return}try{const l=await Z.post("https://23700999.com:8081/HMA/API_SleepRec.jsp",{MID:String(e),Token:String(a),MAID:String(t),Mobile:String(c)});l.status===200&&(console.log(l.data),this.SleepRec=l.data.SleepRec,this.SleepRecCond=l.data.SleepRecCond,Number(l.data.SleepRecCond)<=-1?this.sleepState="sleepRecord":this.sleepState="sleepResult")}catch(l){console.log(l)}}}}),b="data:image/svg+xml,%3csvg%20width='14'%20height='14'%20viewBox='0%200%2014%2014'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20id='Group'%3e%3cpath%20id='Vector'%20d='M7%2013C10.3137%2013%2013%2010.3137%2013%207C13%203.68629%2010.3137%201%207%201C3.68629%201%201%203.68629%201%207C1%2010.3137%203.68629%2013%207%2013Z'%20fill='white'%20stroke='%23B3B3B3'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20id='Vector_2'%20d='M6.33337%204.33333V7.66666H9.66671'%20stroke='%23B3B3B3'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/g%3e%3c/svg%3e",ke={props:{modelValue:{type:String,default:""},currentTimeMode:{type:String,required:!0},placeholder:{type:String,default:"請選擇時間"}},setup(o){const e=O(),a=_(!1),t=_(o.modelValue),c=_(null),d=()=>{a.value=!a.value},l=S=>{t.value=S,o.currentTimeMode==="layTime"?e.layTimeToSleep=S:o.currentTimeMode==="sleepTime"&&(e.sleepTime=S),a.value=!1},m=S=>{c.value&&!c.value.contains(S.target)&&(a.value=!1)};oe(()=>{document.addEventListener("click",m)}),le(()=>{document.removeEventListener("click",m)});const i=[];for(let S=0;S<4*8;S++){const y=String(Math.floor(S/4)).padStart(2,"0"),D=String(S%4*15).padStart(2,"0");i.push(`${y}:${D}`)}const v=me(()=>t.value||o.placeholder);return{showDropdown:a,toggleDropdown:d,selectTime:l,availableTimes:i,formattedTime:v,selectedTime:t,timePicker:c}}},Re={class:"time-picker",ref:"timePicker"},ye={key:0,class:"dropdown"},De=["onClick"];function be(o,e,a,t,c,d){return n(),r("div",Re,[s("div",{class:w(["time-display",{"time-picked":t.selectedTime!==""}]),onClick:e[0]||(e[0]=(...l)=>t.toggleDropdown&&t.toggleDropdown(...l))},[e[1]||(e[1]=s("img",{src:b,alt:"Time Icon"},null,-1)),s("span",{class:w({"picked-text":t.selectedTime!==""})},p(t.formattedTime),3)],2),t.showDropdown?(n(),r("div",ye,[(n(!0),r(k,null,R(t.availableTimes,l=>(n(),r("div",{key:l,class:"time-option",onClick:m=>t.selectTime(l)},p(l),9,De))),128))])):f("",!0)],512)}const ae=B(ke,[["render",be],["__scopeId","data-v-4ff0eafc"]]),Me=ie({props:{modelValue:{type:Number,default:0},options:{type:Array,required:!0},property:{type:String,required:!0}},setup(o){const e=_(o.modelValue),a=O();return{score:e,setScore:(d,l,m)=>{e.value=m,a.updateScore(l,d)},getScoreText:d=>{var l;return((l=o.options[d])==null?void 0:l.label)||""}}}}),Ce={class:"scoreBarGroupWrap"},we={class:"scoreText"},Ie={class:"scoreBarGroup"},Le={class:"numberGroup"},Be=["onClick"];function Ge(o,e,a,t,c,d){return n(),r("div",Ce,[s("div",we,p(o.getScoreText(o.score)),1),s("div",Ie,[s("div",{class:"scoreBar",style:z({width:`${o.score*33.3333}%`,backgroundColor:"#74bc1f"})},null,4),s("div",{class:"remainingBar",style:z({width:`${(3-o.score)*33.3333}%`,backgroundColor:"#ccc"})},null,4),s("div",Le,[(n(!0),r(k,null,R(o.options,(l,m)=>(n(),r("div",{key:m,class:w(["number",{selected:o.score>=m}]),onClick:i=>o.setScore(l.label,o.property,m)},p(m),11,Be))),128))])])])}const de=B(Me,[["render",Ge],["__scopeId","data-v-0d2fee97"]]),xe={props:{value:{type:String,default:""},label:{type:String,default:"選擇時間"}},data(){return{showModal:!1,selectedHour:"",selectedMinute:"",hours:Array.from({length:24},(o,e)=>String(e).padStart(2,"0")),minutes:Array.from({length:60},(o,e)=>String(e).padStart(2,"0"))}},computed:{formattedTime(){return this.selectedHour&&this.selectedMinute?`${this.selectedHour}:${this.selectedMinute}`:this.value}},watch:{value(o){if(o){const[e,a]=o.split(":");this.selectedHour=e,this.selectedMinute=a}}},methods:{confirmTime(){if(this.selectedHour&&this.selectedMinute){const o=`${this.selectedHour}:${this.selectedMinute}`;this.$emit("input",o),this.closeModal()}},closeModal(){this.showModal=!1}}},Ae={class:"select-group"},Ve=["value"],He=["value"],Pe={class:"modal-actions"};function Oe(o,e,a,t,c,d){return n(),r("div",null,[s("button",{onClick:e[0]||(e[0]=l=>c.showModal=!0),class:w(["time-picker-btn",{"time-picked":d.formattedTime}])},[e[7]||(e[7]=s("img",{src:b,alt:""},null,-1)),C(" "+p(d.formattedTime||a.label),1)],2),c.showModal?(n(),r("div",{key:0,class:"modal-overlay",onClick:e[6]||(e[6]=(...l)=>d.closeModal&&d.closeModal(...l))},[s("div",{class:"modal-content",onClick:e[5]||(e[5]=ne(()=>{},["stop"]))},[s("h3",null,p(a.label),1),s("div",Ae,[Q(s("select",{"onUpdate:modelValue":e[1]||(e[1]=l=>c.selectedHour=l)},[e[8]||(e[8]=s("option",{disabled:"",value:""},"小時",-1)),(n(!0),r(k,null,R(c.hours,l=>(n(),r("option",{key:l,value:l},p(l),9,Ve))),128))],512),[[ee,c.selectedHour]]),e[10]||(e[10]=s("span",null,":",-1)),Q(s("select",{"onUpdate:modelValue":e[2]||(e[2]=l=>c.selectedMinute=l)},[e[9]||(e[9]=s("option",{disabled:"",value:""},"分鐘",-1)),(n(!0),r(k,null,R(c.minutes,l=>(n(),r("option",{key:l,value:l},p(l),9,He))),128))],512),[[ee,c.selectedMinute]])]),s("div",Pe,[s("button",{onClick:e[3]||(e[3]=(...l)=>d.confirmTime&&d.confirmTime(...l))},"確認"),s("button",{onClick:e[4]||(e[4]=(...l)=>d.closeModal&&d.closeModal(...l))},"取消")])])])):f("",!0)])}const Ee=B(xe,[["render",Oe],["__scopeId","data-v-d982c16c"]]),Ne={props:{placeholder:{type:String,default:"請選擇睡眠中斷次數"},minValue:{type:Number,default:0},maxValue:{type:Number,default:20}},setup(o){const e=_(!1),a=_(""),t=_("");return{showModal:e,selectedInterruptions:a,confirmSelection:()=>{a.value<o.minValue?a.value=o.minValue:a.value>o.maxValue&&(a.value=o.maxValue),a.value<o.minValue||a.value>o.maxValue?t.value=`次數必須在 ${o.minValue} 到 ${o.maxValue} 之間`:(t.value="",e.value=!1)},closeModal:()=>{e.value=!1,t.value=""},errorMessage:t,placeholder:o.placeholder,minValue:o.minValue,maxValue:o.maxValue}}},Ue={class:"sleepInputGroup"},We={class:"select-group"},je={class:"modalTitle"},Fe=["min","max"],Je={key:0,class:"error"},$e={class:"modal-actions"};function qe(o,e,a,t,c,d){return n(),r("div",Ue,[s("button",{onClick:e[0]||(e[0]=l=>t.showModal=!0),class:w(["number-picker-btn",{"number-picked":t.selectedInterruptions!==""}])},[e[6]||(e[6]=s("img",{src:b,alt:""},null,-1)),C(" "+p(t.selectedInterruptions!==""?t.selectedInterruptions:t.placeholder),1)],2),t.showModal?(n(),r("div",{key:0,class:"modal-overlay",onClick:e[5]||(e[5]=(...l)=>t.closeModal&&t.closeModal(...l))},[s("div",{class:"modal-content",onClick:e[4]||(e[4]=ne(()=>{},["stop"]))},[s("div",We,[s("div",je,p(t.placeholder),1),Q(s("input",{type:"number","onUpdate:modelValue":e[1]||(e[1]=l=>t.selectedInterruptions=l),min:t.minValue,max:t.maxValue,class:"number-input"},null,8,Fe),[[re,t.selectedInterruptions,void 0,{number:!0}]]),t.errorMessage?(n(),r("p",Je,p(t.errorMessage),1)):f("",!0)]),s("div",$e,[s("button",{onClick:e[2]||(e[2]=(...l)=>t.confirmSelection&&t.confirmSelection(...l))},"確認"),s("button",{onClick:e[3]||(e[3]=(...l)=>t.closeModal&&t.closeModal(...l))},"取消")])])])):f("",!0)])}const ze=B(Ne,[["render",qe],["__scopeId","data-v-572a919c"]]),Qe={components:{ScoreBar:de,TimePicker:ae,TimePicker2:Ee,TimesOption:ze},setup(){const o=O(),e=_(!1),a=_(),t=_(),c=_(),d=_(),l=_(),m=_(),i=_(!1),v=_(!1),S=_(!1),y=_(!1),D=_(!1),I=_(!1),G=_(!1),L=_(!1),x=_(!1),A=_(!1),V=_(null),E=Array.from({length:24},(u,g)=>String(g).padStart(2,"0")),N=Array.from({length:4},(u,g)=>String(g*15).padStart(2,"0")),U=[0,1,2,3,4,5,6,7,8,9,10,">10"],W=[0,1,2,3,4,5,6,7,8,9,10,">10"],j=[0,1,2,3,4,5,6,7,8,9,10,">10"],F=[0,1,2,3,4,5,6,7];Y([a,t],([u,g])=>{if(u!==void 0&&g!==void 0){const M=`${String(u).padStart(2,"0")}:${String(g).padStart(2,"0")}`;o.bedTime=M}}),Y([c,d],([u,g])=>{if(u!==void 0&&g!==void 0){const M=`${String(u).padStart(2,"0")}:${String(g).padStart(2,"0")}`;o.getupTime=M}}),Y([l,m],([u,g])=>{if(u!==void 0&&g!==void 0){const M=`${String(u).padStart(2,"0")}:${String(g).padStart(2,"0")}`;o.leaveTime=M}});const h=u=>{i.value=u==="1"?!i.value:!1,v.value=u==="1_2"?!v.value:!1,S.value=u==="2"?!S.value:!1,y.value=u==="2_2"?!y.value:!1,D.value=u==="3"?!D.value:!1,I.value=u==="3_2"?!I.value:!1,G.value=u==="5"?!G.value:!1,L.value=u==="5_2"?!L.value:!1,x.value=u==="6"?!x.value:!1,A.value=u==="7"?!A.value:!1},J=(u,g)=>{const M={bedTimeHour:()=>{a.value=g,i.value=!1},bedTimeMinute:()=>{t.value=g,v.value=!1},getupTimeHour:()=>{c.value=g,S.value=!1},getupTimeMinute:()=>{d.value=g,y.value=!1},leaveBedTimeHour:()=>{l.value=g,D.value=!1},leaveBedTimeMinute:()=>{m.value=g,I.value=!1},sleepAgainTime:()=>{o.SleepAgainTime=g,L.value=!1},sleepBreak:()=>{o.sleepBreak=g},peeTime:()=>{o.peeTime=g},specialDiet:()=>{o.specialDiet=g},medhelp:()=>{o.medhelp=g}};M[u]&&M[u]()},$=u=>{switch(u){case"1":h("1");break;case"1_2":h("1_2");break;case"2":h("2");break;case"2_2":h("2_2");break;case"3":h("3");break;case"3_2":h("3_2");break;case"5":h("5");break;case"5_2":h("5_2");break;case"6":h("6");break;case"7":h("7");break}},H=u=>{V.value&&!V.value.contains(u.target)&&(i.value=!1,v.value=!1,S.value=!1,y.value=!1)};return oe(()=>{document.addEventListener("click",H)}),le(()=>{document.removeEventListener("click",H)}),{useSleepRecordData:o,toggleDropdown:$,selectTime:J,bedTimeHour:a,bedTimeMinute:t,getupTimeHour:c,getupTimeMinute:d,showDropdown1:i,showDropdown1_2:v,showDropdown2:S,showDropdown2_2:y,showDropdown5:G,showDropdown5_2:L,showDropdown6:x,showDropdown7:A,showDropdown3:D,showDropdown3_2:I,firstTest:async()=>{if(!e.value){e.value=!0;try{await o.saveSleepRecord(),location.reload()}catch(u){console.error(u)}finally{e.value=!1}}},closeAllSelect:h,hours:E,minutes:N,sleepBreaks:U,specialDiets:W,medhelps:F,isSubmitting:e,leaveBedTimeHour:l,leaveBedTimeMinute:m,sleepAgains:j}}},Ke={class:"sleepRecordWrap"},Ye={class:"sleepRecordList"},Ze={class:"sleepRecord"},Xe={class:"sleepInputGroup"},es={class:"selectGroup1"},ss={class:"dropListGroup"},ts={class:"dropListHour"},os={key:0,class:"dropList"},ls=["onClick"],is={class:"dropListGroup"},ns={class:"dropListMinute"},rs={key:0,class:"dropList"},as=["onClick"],ds={class:"sleepRecord"},cs={class:"sleepInputGroup"},ps={class:"sleepRecord"},us={class:"sleepInputGroup"},ms={class:"selectGroup1"},vs={class:"dropListGroup"},Ss={class:"dropListHour"},_s={key:0,class:"dropList"},gs=["onClick"],fs={class:"dropListGroup"},hs={class:"dropListMinute"},Ts={key:0,class:"dropList"},ks=["onClick"],Rs={class:"sleepRecord"},ys={class:"sleepInputGroup"},Ds={class:"selectGroup1"},bs={class:"dropListGroup"},Ms={class:"dropListHour"},Cs={key:0,class:"dropList"},ws=["onClick"],Is={class:"dropListGroup"},Ls={class:"dropListMinute"},Bs={key:0,class:"dropList"},Gs=["onClick"],xs={class:"sleepRecord"},As={class:"sleepInputGroup"},Vs={class:"sleepInputGroup"},Hs={class:"dropListGroup dropListGroupTimes"},Ps={class:"dropListText"},Os={key:0,class:"dropList"},Es=["onClick"],Ns={class:"sleepRecord"},Us={class:"sleepInputGroup"},Ws={class:"sleepRecord"},js={class:"sleepInputGroup"},Fs={class:"sleepInputGroup"},Js={class:"dropListGroup dropListGroupTimes"},$s={class:"dropListText"},qs={key:0,class:"dropList"},zs=["onClick"],Qs={class:"sleepRecord"},Ks={class:"sleepInputGroup"},Ys={class:"sleepInputGroup"},Zs={class:"dropListGroup dropListGroupTimes"},Xs={class:"dropListText"},et={key:0,class:"dropList"},st=["onClick"],tt={class:"sleepRecord"},ot={class:"sleepRecord"},lt={class:"sleepRecord"},it={class:"sleepRecord"},nt={class:"sleepRecord"},rt={class:"sleepRecord"},at={class:"sleepRecord"},dt={class:"sleepRecord"},ct={class:"sleepRecord"},pt={class:"sleepRecord"},ut={class:"sleepInputGroup"},mt=["disabled"];function vt(o,e,a,t,c,d){const l=ae,m=de;return n(),r("div",Ke,[e[42]||(e[42]=s("h5",{class:"pleaseWrite"},"請填寫以下問題",-1)),s("div",Ye,[s("div",Ze,[e[15]||(e[15]=s("h4",null,"1.您通常幾點上床睡覺？",-1)),s("div",Xe,[s("div",es,[e[14]||(e[14]=s("img",{class:"timeIcon",src:b,alt:""},null,-1)),s("div",ss,[s("div",{class:"dropListText",onClick:e[0]||(e[0]=i=>t.toggleDropdown("1"))},[e[12]||(e[12]=C(" 點 ")),s("div",ts,p(t.bedTimeHour||""),1)]),t.showDropdown1?(n(),r("div",os,[(n(!0),r(k,null,R(t.hours,(i,v)=>(n(),r("div",{class:"list",key:v,onClick:S=>t.selectTime("bedTimeHour",i)},p(i),9,ls))),128))])):f("",!0)]),s("div",is,[s("div",{class:"dropListText",onClick:e[1]||(e[1]=i=>t.toggleDropdown("1_2"))},[e[13]||(e[13]=C(" 分 ")),s("div",ns,p(t.bedTimeMinute||""),1)]),t.showDropdown1_2?(n(),r("div",rs,[(n(!0),r(k,null,R(t.minutes,(i,v)=>(n(),r("div",{class:"list",key:v,onClick:S=>t.selectTime("bedTimeMinute",i)},p(i),9,as))),128))])):f("",!0)])])])]),s("div",ds,[e[16]||(e[16]=s("h4",null,"2.您需要多長時間才能入睡？",-1)),s("div",cs,[T(l,{currentTimeMode:"layTime",placeholder:"請選擇入睡時間"})])]),s("div",ps,[e[20]||(e[20]=s("h4",null,"3.您通常幾點醒來？",-1)),s("div",us,[s("div",ms,[e[19]||(e[19]=s("img",{class:"timeIcon",src:b,alt:""},null,-1)),s("div",vs,[s("div",{class:"dropListText",onClick:e[2]||(e[2]=i=>t.toggleDropdown("2"))},[e[17]||(e[17]=C(" 點 ")),s("div",Ss,p(t.getupTimeHour||""),1)]),t.showDropdown2?(n(),r("div",_s,[(n(!0),r(k,null,R(t.hours,(i,v)=>(n(),r("div",{class:"list",key:v,onClick:S=>t.selectTime("getupTimeHour",i)},p(i),9,gs))),128))])):f("",!0)]),s("div",fs,[s("div",{class:"dropListText",onClick:e[3]||(e[3]=i=>t.toggleDropdown("2_2"))},[e[18]||(e[18]=C(" 分 ")),s("div",hs,p(t.getupTimeMinute||""),1)]),t.showDropdown2_2?(n(),r("div",Ts,[(n(!0),r(k,null,R(t.minutes,(i,v)=>(n(),r("div",{class:"list",key:v,onClick:S=>t.selectTime("getupTimeMinute",i)},p(i),9,ks))),128))])):f("",!0)])])])]),s("div",Rs,[e[24]||(e[24]=s("h4",null,"4.您通常幾點離開床",-1)),s("div",ys,[s("div",Ds,[e[23]||(e[23]=s("img",{class:"timeIcon",src:b,alt:""},null,-1)),s("div",bs,[s("div",{class:"dropListText",onClick:e[4]||(e[4]=i=>t.toggleDropdown("3"))},[e[21]||(e[21]=C(" 點 ")),s("div",Ms,p(t.leaveBedTimeHour||""),1)]),t.showDropdown3?(n(),r("div",Cs,[(n(!0),r(k,null,R(t.hours,(i,v)=>(n(),r("div",{class:"list",key:v,onClick:S=>t.selectTime("leaveBedTimeHour",i)},p(i),9,ws))),128))])):f("",!0)]),s("div",Is,[s("div",{class:"dropListText",onClick:e[5]||(e[5]=i=>t.toggleDropdown("3_2"))},[e[22]||(e[22]=C(" 分 ")),s("div",Ls,p(t.leaveBedTimeMinute||""),1)]),t.showDropdown3_2?(n(),r("div",Bs,[(n(!0),r(k,null,R(t.minutes,(i,v)=>(n(),r("div",{class:"list",key:v,onClick:S=>t.selectTime("leaveBedTimeMinute",i)},p(i),9,Gs))),128))])):f("",!0)])])])]),s("div",xs,[e[26]||(e[26]=s("h4",null,"5.一晚醒來幾次？",-1)),s("div",As,[s("div",Vs,[s("div",{class:"selectGroup1",onClick:e[6]||(e[6]=i=>t.toggleDropdown("5"))},[e[25]||(e[25]=s("img",{class:"timeIcon",src:b,alt:""},null,-1)),s("div",Hs,[s("div",Ps,[s("div",{class:w({dropListTextActive:t.useSleepRecordData.sleepBreak!=null})},p(t.useSleepRecordData.sleepBreak!=null?t.useSleepRecordData.sleepBreak:"請選擇睡眠中斷次數"),3)]),t.showDropdown5?(n(),r("div",Os,[(n(!0),r(k,null,R(t.sleepBreaks,(i,v)=>(n(),r("div",{class:"list",key:v,onClick:S=>t.selectTime("sleepBreak",i)},p(i),9,Es))),128))])):f("",!0)])])])])]),s("div",Ns,[e[27]||(e[27]=s("h4",null,"6.醒來後多久再入睡？",-1)),s("div",Us,[T(l,{currentTimeMode:"sleepAgainTime",placeholder:"請選擇時間",onUpdate:e[7]||(e[7]=i=>t.useSleepRecordData.SleepAgainTime=i)})])]),s("div",Ws,[e[29]||(e[29]=s("h4",null,"7.近兩週，您有幾次聚餐或應酬?",-1)),s("div",js,[s("div",Fs,[s("div",{class:"selectGroup1",onClick:e[8]||(e[8]=i=>t.toggleDropdown("6"))},[e[28]||(e[28]=s("img",{class:"timeIcon",src:b,alt:""},null,-1)),s("div",Js,[s("div",$s,[s("div",{class:w({dropListTextActive:t.useSleepRecordData.specialDiet!=null})},p(t.useSleepRecordData.specialDiet!=null?t.useSleepRecordData.specialDiet:"請選擇次數"),3)]),t.showDropdown6?(n(),r("div",qs,[(n(!0),r(k,null,R(t.specialDiets,(i,v)=>(n(),r("div",{class:"list",key:v,onClick:S=>t.selectTime("specialDiet",i)},p(i),9,zs))),128))])):f("",!0)])])])])]),s("div",Qs,[e[31]||(e[31]=s("h4",null,"8.近兩週，您有使用助眠藥物嗎？",-1)),s("div",Ks,[s("div",Ys,[s("div",{class:"selectGroup1",onClick:e[9]||(e[9]=i=>t.toggleDropdown("7"))},[e[30]||(e[30]=s("img",{class:"timeIcon",src:b,alt:""},null,-1)),s("div",Zs,[s("div",Xs,[s("div",{class:w({dropListTextActive:t.useSleepRecordData.medhelp!=null})},p(t.useSleepRecordData.medhelp!=null?t.useSleepRecordData.medhelp:"請選擇每週使用藥物幫助睡眠天數"),3)]),t.showDropdown7?(n(),r("div",et,[(n(!0),r(k,null,R(t.medhelps,(i,v)=>(n(),r("div",{class:"list",key:v,onClick:S=>t.selectTime("medhelp",i)},p(i),9,st))),128))])):f("",!0)])])])])]),s("div",tt,[e[32]||(e[32]=s("h4",null,"9.近兩週，您覺得睡眠品質如何？",-1)),T(m,{options:t.useSleepRecordData.sleepQualityOptions,property:"sleepProperty"},null,8,["options"])]),s("div",ot,[e[33]||(e[33]=s("h4",null,"10.白天心情如何?",-1)),T(m,{options:t.useSleepRecordData.dayEmotionOptions,property:"emotionalState"},null,8,["options"])]),s("div",lt,[e[34]||(e[34]=s("h4",null,"11.白天感覺體力、專注力、記憶力如何?",-1)),T(m,{options:t.useSleepRecordData.dayStateOptions,property:"physicalStrength"},null,8,["options"])]),s("div",it,[e[35]||(e[35]=s("h4",null,"12.白天會不會想睡覺?",-1)),T(m,{options:t.useSleepRecordData.daySleepOptions,property:"dayTimeSleepiness"},null,8,["options"])]),s("div",nt,[e[36]||(e[36]=s("h4",null,"13.近兩週,您覺得工作有受到影響嗎？",-1)),T(m,{options:t.useSleepRecordData.defaultOptions,property:"workStress"},null,8,["options"])]),s("div",rt,[e[37]||(e[37]=s("h4",null,"14.近兩週,您與身邊重要的人相處時還順利嗎？",-1)),T(m,{options:t.useSleepRecordData.defaultOptions,property:"relationshipStress"},null,8,["options"])]),s("div",at,[e[38]||(e[38]=s("h4",null,"15.近兩週,您或家人的健康狀況對您的生活影響如何？",-1)),T(m,{options:t.useSleepRecordData.defaultOptions,property:"healthStress"},null,8,["options"])]),s("div",dt,[e[39]||(e[39]=s("h4",null,"16.近兩週,您的生活習慣調整（如飲食、運動）您適應得如何？",-1)),T(m,{options:t.useSleepRecordData.defaultOptions,property:"lifestyleChangeStress"},null,8,["options"])]),s("div",ct,[e[40]||(e[40]=s("h4",null,"17.近兩週,您的經濟狀況有壓力嗎？",-1)),T(m,{options:t.useSleepRecordData.defaultOptions,property:"financialStress"},null,8,["options"])]),s("div",pt,[e[41]||(e[41]=s("h4",null,"18.最近有讓您壓力大的事件嗎？",-1)),s("div",ut,[Q(s("textarea",{name:"",rows:"5",placeholder:"請簡短講述近期壓力事件",id:"","onUpdate:modelValue":e[10]||(e[10]=i=>t.useSleepRecordData.otherPressureEventt=i)},null,512),[[re,t.useSleepRecordData.otherPressureEventt]])])])]),s("button",{class:"submitBtn",onClick:e[11]||(e[11]=(...i)=>t.firstTest&&t.firstTest(...i)),disabled:t.isSubmitting}," 完成 ",8,mt)])}const ce=B(Qe,[["render",vt],["__scopeId","data-v-49350a80"]]),St=ie({components:{RaphaelLoading:X},setup(){const o=O(),e=q();_(null);const a=_(null);return _(`
    感謝您使用我們的系統請等待<span>${a.value}天</span>後再進行第二次檢測
    `),{useSleepRecordData:o,formatCheckTime:d=>{d.substring(0,4);const l=d.substring(4,6),m=d.substring(6,8);return`${parseInt(l)}/${parseInt(m)}`},backToUser:()=>{e.push({name:"user"})},scoreSleepColorFn:Se,computedSleepEmoji:_e,formatTimestamp:ge,scoreColorFn:fe}}}),_t={class:"sleepIndex"},gt={class:"resultTopGroup"},ft={class:"resultInfo"},ht={class:"resultHintText"},Tt={class:"subText"},kt={class:"severity"},Rt={class:"imgGroup"},yt=["src"],Dt={class:"scoreText"},bt={key:0,class:"subText"},Mt={key:1,class:"severity"},Ct={class:"imgGroup"},wt=["src"],It={class:"scoreText"};function Lt(o,e,a,t,c,d){var m,i,v,S,y,D,I,G,L,x,A,V,E,N,U,W,j,F,h,J,$,H,K,u,g;const l=ve;return n(),r("div",_t,[s("div",gt,[s("div",ft,[s("div",ht,p(o.useSleepRecordData.SleepRecCond=="0"?"不久":o.useSleepRecordData.SleepRecCond+"天")+"後再進行檢測 ",1),s("h5",Tt," (本次)"+p(((i=(m=o.useSleepRecordData)==null?void 0:m.SleepRec)==null?void 0:i.length)>0?o.formatTimestamp(o.useSleepRecordData.SleepRec[0].CheckTime):"No data available"),1),s("div",kt,[s("div",Rt,[s("img",{src:o.computedSleepEmoji((y=(S=(v=o.useSleepRecordData)==null?void 0:v.SleepRec)==null?void 0:S[0])==null?void 0:y.Score),alt:""},null,8,yt),s("div",Dt,[s("div",{class:"score",style:z({color:o.scoreSleepColorFn((I=(D=o.useSleepRecordData.SleepRec)==null?void 0:D[0])==null?void 0:I.Score)})},p((L=(G=o.useSleepRecordData.SleepRec)==null?void 0:G[0])==null?void 0:L.Score),5),e[0]||(e[0]=s("h5",null,"分",-1))])]),T(l,{score:(A=(x=o.useSleepRecordData.SleepRec)==null?void 0:x[0])==null?void 0:A.Score,colorProp:o.scoreColorFn((E=(V=o.useSleepRecordData.SleepRec)==null?void 0:V[0])==null?void 0:E.Score,0)},null,8,["score","colorProp"])]),(U=(N=o.useSleepRecordData)==null?void 0:N.SleepRec)!=null&&U[1]?(n(),r("h5",bt," (前次)"+p(((j=(W=o.useSleepRecordData)==null?void 0:W.SleepRec)==null?void 0:j.length)>0?o.formatTimestamp(o.useSleepRecordData.SleepRec[1].CheckTime):"No data available"),1)):f("",!0),(h=(F=o.useSleepRecordData.SleepRec)==null?void 0:F[1])!=null&&h.Score?(n(),r("div",Mt,[s("div",Ct,[s("img",{src:o.computedSleepEmoji(($=(J=o.useSleepRecordData.SleepRec)==null?void 0:J[1])==null?void 0:$.Score),alt:""},null,8,wt),s("div",It,[s("div",{class:"score",style:z({color:o.scoreSleepColorFn((K=(H=o.useSleepRecordData.SleepRec)==null?void 0:H[1])==null?void 0:K.Score)})},p((g=(u=o.useSleepRecordData.SleepRec)==null?void 0:u[1])==null?void 0:g.Score),5),e[1]||(e[1]=s("h5",null,"分",-1))])])])):f("",!0)]),e[2]||(e[2]=s("img",{class:"doctorImg",src:he,alt:""},null,-1))]),e[3]||(e[3]=s("h6",null,"以下為您的睡眠分析結果",-1)),e[4]||(e[4]=s("div",{class:"sleepDetectResultWrap"},[s("div",{class:"sleepDetectResultDIV"},[s("h3",null,"睡眠周期"),s("h5",null,"(本次)2024/8/01"),s("section",null,[s("div",{class:"sleepDetectItem"},[s("h4",null,"入睡時間"),s("p",null,[s("span",null,"23:30")])])])])],-1))])}const Bt=B(St,[["render",Lt],["__scopeId","data-v-8dd7cddb"]]),Gt={components:{RaphaelLoading:X,TagList:te,sleepRecordWrap:ce,UserResultWrap:Te,TitleMenu:se},setup(){const o=O(),e=_(!1);return(async()=>{try{e.value=!0,await o.getIndexSleepRecData(),await o.getSleepRecData()}catch(t){console.log("Error in cc function:",t)}e.value=!1})(),{loading:e,useSleepRecordData:o}}},xt={class:"userRecord"},At={class:"userRecoreWrap"};function Vt(o,e,a,t,c,d){const l=X,m=se,i=te,v=pe,S=ce,y=Bt;return n(),r("div",xt,[t.loading?(n(),P(l,{key:0})):f("",!0),T(m,{Text:t.useSleepRecordData.sleepState==="sleepResult"?"結果分析":"健康紀錄",link:"/user"},null,8,["Text"]),s("div",At,[T(i),t.useSleepRecordData.sleepState==="sleepRecord"?(n(),P(v,{key:0,stepTexts:["填寫問卷","結果分析"],currentStep:0})):f("",!0),t.useSleepRecordData.sleepState==="sleepResult"?(n(),P(v,{key:1,stepTexts:["填寫問卷","結果分析"],currentStep:1})):f("",!0),t.useSleepRecordData.sleepState==="sleepRecord"?(n(),P(S,{key:2})):f("",!0),t.useSleepRecordData.sleepState==="sleepResult"?(n(),P(y,{key:3})):f("",!0)])])}const Yt=B(Gt,[["render",Vt],["__scopeId","data-v-f7d6395e"]]);export{Yt as default};
