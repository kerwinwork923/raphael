import{_ as Se}from"./W3k4iq7y.js";import{_ as Ae}from"./1SqYRxzD.js";import{_ as ke}from"./DZ0QEswA.js";import{u as _e,_ as it,a as dt,b as ct,B as ut,S as mt,c as Pe,d as pe,I as bt,e as ft,f as yt,g as ht}from"./CGSl6cE5.js";import{a3 as vt,r as b,F as Ct,g as L,v as u,x as c,H as A,a0 as gt,y as n,I as ne,T as Dt,$ as Bt,A as S,N as F,O as ue,z as g,C as me,L as ae,K as Be,V as be,J as wt,M as It,o as St,j as m}from"./HfdH-K36.js";import{a as z}from"./xsH4HHeE.js";import{_ as At}from"./DNAPM-2u.js";import{_ as Te}from"./DlAUqK2U.js";import{u as we}from"./BUsOIeYI.js";import{_ as kt,a as _t}from"./DY2Lbndt.js";import{_ as Ie}from"./DCGXGCbS.js";import{_ as Pt}from"./fh2N3Yhm.js";import{_ as pt}from"./C9Uwk0Jw.js";import"./DgNOQq75.js";import"./CkGzrrY6.js";import"./CwLDIuDU.js";import"./B_UQCELI.js";import"./Cyv9YNxQ.js";import"./6FQ55jJ2.js";const Tt={name:"BabyEditAlert",components:{VueDatePicker:vt},props:{show:{type:Boolean,default:!1},cid:{type:String,default:""},name:{type:String,default:""},gender:{type:String,default:""},birthDate:{type:Date,default:null}},emits:["close"],setup(B,{emit:e}){const p=_e(),t=b(B.name),T=b(B.gender),h=b(B.birthDate);Ct(()=>[B.name,B.gender,B.birthDate],([d,w,v])=>{t.value=d,T.value=w,h.value=v});function G(d){if(!d)return"";const w=d.getFullYear(),v=String(d.getMonth()+1).padStart(2,"0"),D=String(d.getDate()).padStart(2,"0");return`${w}/${v}/${D}`}function f(){e("close")}async function Y(){if(!t.value||!T.value||!h.value){alert("請填寫完整資料");return}const d=T.value==="male"?"1":"2",w=h.value.getFullYear(),v=String(h.value.getMonth()+1).padStart(2,"0"),D=String(h.value.getDate()).padStart(2,"0"),k=`${w}${v}${D}`,I=await p.modifyChild(B.cid,t.value.trim(),d,k);I.success?(alert("寶貝資料已更新！"),f()):alert(`修改失敗：${I.message||"請稍後再試"}`)}return{tempName:t,tempGender:T,tempBirthDate:h,formatDate:G,onClose:f,onSubmitEdit:Y}}},Rt={key:1,class:"babyEditAlert"},xt={class:"babyEditAlertCloseWrap"},Nt={class:"babyRecordInfoInput"},Lt={class:"babyRecordInfoInput"},Gt={class:"babyRecordInfoInput"};function Mt(B,e,p,t,T,h){const G=L("VueDatePicker");return c(),u(F,null,[p.show?(c(),u("div",{key:0,class:"babyEditAlertCover",onClick:e[0]||(e[0]=gt((...f)=>t.onClose&&t.onClose(...f),["self"]))})):A("",!0),p.show?(c(),u("div",Rt,[n("div",xt,[n("img",{class:"babyEditAlertClose",src:At,alt:"關閉",onClick:e[1]||(e[1]=(...f)=>t.onClose&&t.onClose(...f))})]),e[10]||(e[10]=n("h4",null,"編輯寶貝基本資料",-1)),n("div",Nt,[e[6]||(e[6]=n("img",{class:"icon1",src:it,alt:"姓名"},null,-1)),ne(n("input",{"onUpdate:modelValue":e[2]||(e[2]=f=>t.tempName=f),type:"text",placeholder:"請輸入寶貝姓名"},null,512),[[Dt,t.tempName]])]),n("div",Lt,[e[8]||(e[8]=n("img",{class:"icon1",src:dt,alt:"性別"},null,-1)),ne(n("select",{"onUpdate:modelValue":e[3]||(e[3]=f=>t.tempGender=f)},e[7]||(e[7]=[n("option",{value:"",disabled:"",hidden:""},"請選擇性別",-1),n("option",{value:"male"},"男性",-1),n("option",{value:"female"},"女性",-1)]),512),[[Bt,t.tempGender]])]),n("div",Gt,[e[9]||(e[9]=n("img",{class:"icon1",src:ct,alt:"生日"},null,-1)),S(G,{modelValue:t.tempBirthDate,"onUpdate:modelValue":e[4]||(e[4]=f=>t.tempBirthDate=f),format:t.formatDate,locale:"zh-TW","max-date":new Date,"enable-time-picker":!1,placeholder:"請選擇寶貝的生日",class:"date-picker no-icon","cancel-text":"取消","select-text":"確定","no-today":""},null,8,["modelValue","format","max-date"])]),n("div",{class:"babyEditAlertBtn",onClick:e[5]||(e[5]=(...f)=>t.onSubmitEdit&&t.onSubmitEdit(...f))},"送出")])):A("",!0)],64)}const Vt=Te(Tt,[["render",Mt]]),Ft="data:image/svg+xml,%3csvg%20width='17'%20height='17'%20viewBox='0%200%2017%2017'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20id='Group'%3e%3cpath%20id='Vector'%20d='M1.06031%205.06977L1.06029%205.06981C-0.226931%207.72745%20-0.00208565%2010.8109%201.65283%2013.2982C2.14636%2014.036%203.14161%2015.0312%203.8645%2015.5148C5.54429%2016.6264%207.4875%2017.1058%209.43023%2016.8856C12.6116%2016.5234%2015.3578%2014.2863%2016.3513%2011.2519C17.5211%207.66904%2016.1509%203.79735%2012.9786%201.71665C11.9417%201.04171%2010.6639%200.591145%209.37125%200.449147C5.93571%200.0723148%202.57277%201.94205%201.06031%205.06977ZM7.28146%2016.2086L7.28116%2016.2085C4.93597%2015.8451%202.84057%2014.3368%201.73548%2012.1963C0.765098%2010.3252%200.595788%208.2342%201.2627%206.23347C1.87515%204.38131%203.22905%202.8036%204.97125%201.90262C7.76348%200.454259%2011.0342%200.822923%2013.4674%202.86303L13.4675%202.86315C14.4838%203.71999%2015.3097%204.9492%2015.7427%206.24828L15.7427%206.24835C16.9473%209.87695%2015.3293%2013.7745%2011.9053%2015.5064L11.9052%2015.5065C10.5007%2016.2137%208.90283%2016.4523%207.28146%2016.2086Z'%20fill='%23EC4F4F'%20stroke='%23EC4F4F'%20stroke-width='0.133333'/%3e%3cpath%20id='Vector_2'%20d='M8.7518%2013.4586L8.89489%2013.3155L8.89489%2011.1148L8.89489%208.91418L11.1054%208.91418L13.3209%208.91418L13.4245%208.8007C13.5626%208.65267%2013.5676%208.40596%2013.4343%208.27274C13.3406%208.17899%2013.2715%208.17406%2011.1153%208.17406L8.89489%208.17406L8.89489%205.99808C8.89489%204.44382%208.88009%203.7925%208.83568%203.71849C8.67286%203.40764%208.32746%203.40764%208.16464%203.71849C8.12023%203.7925%208.10543%204.44382%208.10543%205.99808L8.10543%208.17406L5.88504%208.17406C3.72881%208.17406%203.65973%208.17899%203.56598%208.27274C3.42782%208.4109%203.43769%208.67241%203.58078%208.80563C3.69427%208.91418%203.70414%208.91418%205.89985%208.91418L8.10543%208.91418L8.10543%2011.1148L8.10542%2013.3155L8.24852%2013.4586C8.32746%2013.5375%208.44095%2013.6017%208.50016%2013.6017C8.55937%2013.6017%208.67286%2013.5375%208.7518%2013.4586Z'%20fill='%23EC4F4F'/%3e%3c/g%3e%3c/svg%3e",Et={name:"BabyRecord",components:{RaphaelLoading:Se,TitleMenu:Ae,TagList:ke,BabyIntro:ht,BabyCreateForm:yt,BabyProgress:ft,IndicatorSelect:bt,QAList:pe,TimesSelect:Pe,SolvePrioritySelect:mt,BabyReportResult:ut,BabyEditAlert:Vt,useSeo:we},setup(){const B=It(),e=_e(),p=b(!1),t=b([{name:"",gender:"",birthDate:null}]),T=b(!1),h=b({CID:"",name:"",gender:"",birthDate:null});we({title:"",description:"NeuroPlus神經調節家提供專業的自律神經檢測服務，運用FDA認證AI技術，透過人臉辨識快速分析HRV數據，幫助您了解自律神經狀態。",url:"https://neuroplus.com.tw"});function G(o){var l;if(T.value=!0,h.value.CID=o.CID||"",h.value.name=o.Name||"",h.value.gender=o.Sex==="1"?"male":o.Sex==="2"?"female":"",((l=o.BirthDay)==null?void 0:l.length)===8){const a=Number(o.BirthDay.slice(0,4)),r=Number(o.BirthDay.slice(4,6)),i=Number(o.BirthDay.slice(6,8));h.value.birthDate=new Date(a,r-1,i)}else h.value.birthDate=null}function f(){t.value=[{name:"",gender:"",birthDate:null}],p.value=!0}async function Y(){try{for(const a of t.value)if(!a.name||!a.gender||!a.birthDate){alert("請完整填寫寶貝資料");return}d.value=!0;const o={MID:v,Token:D,MAID:k,Mobile:I,Child:t.value.map(a=>({Name:a.name,Sex:a.gender==="male"?"1":"2",BirthDay:re(a.birthDate)}))},l=await z.post("https://23700999.com:8081/HMA/API_ChildSave.jsp",o);if(l.data.Result==="OK"){if(R.value=!1,M.value=!1,p.value=!1,await e.fetchGrowth(),e.babyAPIData.length>0){const a=e.babyAPIData[e.babyAPIData.length-1];e.selectedChildID=a.CID,await e.fetchGrowthRecord(a.CID);const r=e.childRecords[a.CID];r.flowStage="indicator"}}else alert("新增寶貝失敗："+l.data.Message)}catch(o){console.error(o),alert("伺服器錯誤")}finally{d.value=!1}}const d=b(!1),w=localStorage.getItem("userData"),{MID:v,Token:D,MAID:k,Mobile:I}=w?JSON.parse(w):{};(!v||!D||!k||!I)&&B.push("/"),St(()=>{e.fetchGrowth().then(()=>{e.babyAPIData.forEach(o=>{const l=o.CID,a=e.childRecords[l];o.ChildANSTime?(Number(o.diffDaysFromToday)||0)>0?(a.flowStage="historyView",e.fetchGrowthFirst(l)):a.flowStage||(a.flowStage="chooseVersion"):(a.flowStage||(a.flowStage="indicator"),e.fetchGrowthRecord(l))})})});const O=m(()=>e.babyAPIData.length>0),y=m(()=>e.childRecords[e.selectedChildID]),M=b(!1),R=b(!1),x=b(!1),_=b([{name:"",gender:"",birthDate:null}]);function U(){var o,l;if(!O.value)x.value?E():x.value=!0;else if(((o=y.value)==null?void 0:o.flowStage)==="indicator"){const r=e.selectedChildID,i=(l=y.value)==null?void 0:l.selectedAnsTypes;if(!i||i.size===0){alert("請至少選一個指標");return}d.value=!0,e.fetchChildQuestions(r).finally(()=>{d.value=!1})}}const W=m(()=>{var l;if(!O.value)return x.value?"送出寶貝":"前往檢測";const o=(l=y.value)==null?void 0:l.flowStage;return o==="indicator"?"前往檢測":o==="times"?"次數填寫中":"下一步"}),Z=m(()=>{var o;return((o=y.value)==null?void 0:o.flowStage)==="times"});function J(){_.value.push({name:"",gender:"",birthDate:null})}function s(o){_.value.length>1&&_.value.splice(o,1)}function E(){for(const o of _.value)if(!o.name||!o.gender||!o.birthDate){alert("請完整填寫寶貝資料");return}M.value=!0,R.value=!0}function fe(){M.value=!1,R.value=!1}async function Re(){try{for(const a of _.value)if(!a.name||!a.gender||!a.birthDate){alert("請完整填寫寶貝資料");return}d.value=!0;const o={MID:v,Token:D,MAID:k,Mobile:I,Child:_.value.map(a=>({Name:a.name,Sex:a.gender==="male"?"1":"2",BirthDay:re(a.birthDate)}))},l=await z.post("https://23700999.com:8081/HMA/API_ChildSave.jsp",o);if(l.data.Result==="OK"){if(R.value=!1,M.value=!1,x.value=!1,await e.fetchGrowth(),e.babyAPIData.length>0){const a=e.babyAPIData[e.babyAPIData.length-1];e.selectedChildID=a.CID,await e.fetchGrowthRecord(a.CID);const r=e.childRecords[a.CID];r.flowStage="indicator"}}else alert("新增寶貝失敗："+l.data.Message)}catch(o){console.error(o),alert("伺服器錯誤")}finally{d.value=!1}}function xe(o){y.value.version=o}async function Ne(){if(!y.value.version){alert("請選擇評估方式");return}const o=e.selectedChildID;d.value=!0,await e.fetchGrowthRecord(o),d.value=!1,y.value.flowStage="indicator"}const Le=m(()=>{var l,a;const o=e.selectedChildID;return((a=(l=e.childRecords[o])==null?void 0:l.growthRec)==null?void 0:a.ChildAnsAllType)||{}}),P=b(null),K=m(()=>{var o;return((o=P.value)==null?void 0:o.currentPage)||1}),X=m(()=>{var o;return((o=P.value)==null?void 0:o.totalPages)||1}),ye=m(()=>{var o;return(o=P.value)==null?void 0:o.isPageFilled});function Ge(){var o;(o=P.value)==null||o.goPrevPage()}function Me(){if(!P.value.isPageFilled){alert("請先填完題目");return}P.value.currentPage<P.value.totalPages?P.value.goNextPage():P.value.submitAllAnswers()}const Ve=m(()=>K.value<X.value?`下一頁 (${K.value}/${X.value})`:`下一步 (${K.value}/${X.value})`),Fe=m(()=>!ye.value),Ee=m(()=>K.value>1);function He(o){var r;const l=e.selectedChildID,a=(r=o.ChildInfo)==null?void 0:r.find(i=>i.CID===l);a!=null&&a.AID&&(e.childRecords[l].AID=a.AID),e.childRecords[l].childTimesQues=o.ChildAns.map(i=>({id:i.QueSeq,question:i.Question,selectScore:"",answers:[i.AnswerName_0,i.AnswerName_1,i.AnswerName_2,i.AnswerName_3],Type:i.Type,TypeName:i.TypeName})),e.childRecords[l].flowStage="times"}const N=b(1),le=7,he=m(()=>{var o;return((o=y.value)==null?void 0:o.childTimesQues)||[]}),$=m(()=>Math.ceil(he.value.length/le||1)),se=m(()=>(N.value-1)*le),ve=m(()=>he.value.slice(se.value,se.value+le)),Ce=m(()=>ve.value.every(o=>o.selectScore!==""));function Qe(){N.value>1&&N.value--}const Ye=m(()=>N.value<$.value?`下一頁 (${N.value}/${$.value})`:"下一步");async function Oe(){if(!Ce.value){alert("請先填完本頁");return}N.value<$.value?N.value++:(d.value=!0,await Ke(),await je(),d.value=!1,y.value.flowStage="priority")}async function Ke(){const o=e.selectedChildID,l=e.childRecords[o],a=l.childTimesQues.map(r=>({QueSeq:r.id,QueTimesAns:r.selectScore}));if(a.length)try{const r={MID:v,MAID:k,Token:D,Mobile:I,AID:l.AID,CID:o,ChildAnsTimes:a},i=await z.post("https://23700999.com:8081/HMA/API_ChildAnsTimesSave.jsp",r);i.data.Result==="OK"?i.data.AID&&(l.AID=i.data.AID):alert("儲存次數失敗："+i.data.Message)}catch(r){console.error("times error:",r)}}async function je(){const o=e.selectedChildID,l=e.childRecords[o];if(!l.AID){alert("缺少 AID");return}try{const a={MID:v,MAID:k,Token:D,Mobile:I,CID:o,AID:l.AID},r=await z.post("https://23700999.com:8081/HMA/API_GrowthSolve.jsp",a);r.data.Result!=="OK"&&alert("送出解決方案失敗："+r.data.Message)}catch(a){console.error(a)}}const ee=b(0);function qe(o){ee.value=o}const ze=m(()=>({backgroundColor:ee.value>0?"#74bc1f":"#bdbdbd"}));async function Ue(){var j,oe,q,ge;if(ee.value===0){alert("至少選一項");return}d.value=!0;const o=e.selectedChildID;if(!await We()){d.value=!1;return}await e.fetchGrowthFirst(o);const a=e.childRecords[o],r=a.AID||((oe=(j=a==null?void 0:a.growthRec)==null?void 0:j.CIDChildAnsLast)==null?void 0:oe.AID);if(!r){alert("目前無檢測資料"),d.value=!1;return}let i="";const C=((q=a.reportData)==null?void 0:q.History)||[],V=C.findIndex(De=>De.length>0&&De[0].AID===r);V>=0&&V<C.length-1&&(i=((ge=C[V+1][0])==null?void 0:ge.AID)||""),await e.fetchGrowthCompare(o,r,i),a.flowStage="result",d.value=!1}async function We(){const o=e.selectedChildID,l=e.childRecords[o];if(!l.AID)return alert("缺少 AID"),!1;const a=l.childTimesQues.filter(r=>l.selectedPriority.has(r.id)).map(r=>({QueSeq:r.id}));try{const r={MID:v,MAID:k,Token:D,Mobile:I,CID:o,AID:l.AID,ChildAnsSolve:a},i=await z.post("https://23700999.com:8081/HMA/API_ChildAnsSolveSave.jsp",r);return i.data.Result==="OK"?!0:(alert("儲存想解決的症狀失敗："+i.data.Message),!1)}catch(r){return console.error(r),alert("儲存想解決的症狀錯誤"),!1}}function Ze(o){e.selectedChildID=o;const l=e.childRecords[o],a=e.babyAPIData.find(r=>r.CID===o);a&&!a.ChildANSTime&&(l.flowStage||(l.flowStage="indicator",l.growthRec||(d.value=!0,e.fetchGrowthRecord(o).finally(()=>{d.value=!1}))))}async function Je(){const o=e.selectedChildID;if(o){d.value=!0;try{await e.fetchGrowthFirst(o),y.value.flowStage="historyView"}catch(l){console.error("獲取歷史紀錄失敗:",l)}finally{d.value=!1}}}function re(o){const l=o.getFullYear(),a=String(o.getMonth()+1).padStart(2,"0"),r=String(o.getDate()).padStart(2,"0");return`${l}${a}${r}`}function Xe(o){if(!o)return"";const l=Number(o.slice(5,7)),a=Number(o.slice(8,10)),r=o.slice(11,16);return`${l}/${a} ${r}`}function te(o){if(!o)return null;const[l,a]=o.split(" ");if(!l)return null;const[r,i,C]=l.split("/");return{year:Number(r),month:Number(i),day:Number(C),timeStr:a||""}}const ie=b(new Date().getFullYear()),de=b(new Date().getMonth()+1),H=b(!1),Q=b(!1);function $e(){H.value=!H.value,H.value&&(Q.value=!1)}function et(){Q.value=!Q.value,Q.value&&(H.value=!1)}function tt(o){ie.value=o,H.value=!1}function ot(o){de.value=o,Q.value=!1}const at=new Date().getFullYear(),ce=m(()=>{var o,l;return((l=(o=y.value)==null?void 0:o.reportData)==null?void 0:l.History)||[]}),nt=m(()=>{const o=new Set;return ce.value.flat().forEach(l=>{if(l.CheckTime){const a=te(l.CheckTime);a&&a.year&&o.add(a.year)}}),Array.from(o).sort((l,a)=>a-l)}),lt=Array.from({length:12},(o,l)=>l+1),st=m(()=>{const o=new Set;return ce.value.flat().filter(r=>{const i=te(r.CheckTime);return i?i.year===ie.value&&i.month===de.value:!1}).sort((r,i)=>{const C=new Date(r.CheckTime);return new Date(i.CheckTime)-C}).filter(r=>{const i=te(r.CheckTime),C=`${i.year}-${String(i.month).padStart(2,"0")}-${String(i.day).padStart(2,"0")}`;return o.has(C)?!1:(o.add(C),!0)})});async function rt(o){var C,V,j;if(!(o!=null&&o.AID))return;const l=e.selectedChildID,a=((V=(C=y.value)==null?void 0:C.reportData)==null?void 0:V.History)||[];let r="";const i=a.findIndex(oe=>oe.some(q=>q.AID===o.AID&&q.CheckTime===o.CheckTime));i>=0&&i<a.length-1&&(r=((j=a[i+1][0])==null?void 0:j.AID)||""),d.value=!0,await e.fetchGrowthCompare(l,o.AID,r),d.value=!1,y.value.flowStage="result"}return{babyStore:e,curChildData:y,isLoading:d,hasChild:O,babyInfos:_,showBabyCover:M,showBabyAlert:R,showAddBabyForm:x,onCommonButtonClick:U,commonButtonLabel:W,isDisableCommonBtn:Z,addBabyInfo:J,removeBaby:s,checkAndShowBabyAlert:E,closeBabyAlert:fe,submitBabyData:Re,setVersion:xe,onChooseVersionNext:Ne,ansTypes:Le,qaListRef:P,currentPage:K,totalPages:X,isPageFilled:ye,onPrevPageClick:Ge,onNextPageClick:Me,nextButtonLabel:Ve,isDisableNextBtn:Fe,hasTwoButtons:Ee,onGoTimes:He,timesCurrentPage:N,timesTotalPages:$,timesStartIndex:se,timesDisplayedQuestions:ve,isTimesPageFilled:Ce,timesNextButtonLabel:Ye,onTimesPrevPage:Qe,onTimesNextClick:Oe,selectedPriorityCount:ee,onPrioritySelectionChanged:qe,priorityButtonStyle:ze,onPrioritySubmit:Ue,onClickChild:Ze,goBackToHistory:Je,formatDateToYYYYMMDD:re,formatCheckTime:Xe,parseCheckTime:te,selectedYear:ie,selectedMonth:de,yearBoxVisible:H,monthBoxVisible:Q,toggleYearBox:$e,toggleMonthBox:et,selectYear:tt,selectMonth:ot,currentYear:at,displayYears:nt,months:lt,rawHistoryList:ce,filteredHistoryList:st,onClickHistoryItem:rt,showAddBabyFormInHasChild:p,newBabyInfos:t,onAddNewBabyClick:f,submitNewBabyData:Y,showEditAlert:T,editChildData:h,onEditChild:G}}},Ht={class:"babyRecord"},Qt={class:"babyRerordBtnGroup"},Yt=["disabled"],Ot={key:1,class:"babyCreateForm"},Kt={class:"babyRerordBtnGroup"},jt={key:2,class:"chooseVersion"},qt={class:"chooseGroup"},zt={class:"babyRerordBtnGroup"},Ut={key:3,class:"historyView"},Wt={class:"historyViewGroup"},Zt={class:"detectSelectGroup"},Jt={class:"yearSelectGroup"},Xt={class:"yearBox"},$t=["onClick"],eo={class:"monthSelectGroup"},to={class:"monthBox"},oo=["onClick"],ao={class:"historyViewItemGroup"},no=["onClick"],lo={class:"historyViewLeft"},so={key:0,style:{"text-align":"center","margin-top":"1rem",color:"#999"}},ro={key:4},io={class:"babyRerordBtnGroup"},co={key:5,class:"babyRecordWrap"},uo={class:"babyRerordBtnGroup"},mo=["disabled"],bo={key:6,class:"babyQAGroup"},fo=["disabled"],yo={key:7,class:"babyTimesGroup"},ho=["disabled"],vo={key:8,class:"babyPriority"},Co={class:"babyRerordBtnGroup"},go=["disabled"],Do={key:2,class:"babyCover"},Bo={key:3,class:"babyAlert"},wo={class:"babyAlertBtnGroup"};function Io(B,e,p,t,T,h){var R,x,_,U,W,Z,J;const G=Se,f=Ae,Y=ke,d=L("BabyIntro"),w=L("BabyCreateForm"),v=L("BabyProgress"),D=L("BabyReportResult"),k=L("IndicatorSelect"),I=pe,O=Pe,y=L("SolvePrioritySelect"),M=L("BabyEditAlert");return c(),u(F,null,[t.isLoading?(c(),ue(G,{key:0})):A("",!0),n("div",Ht,[S(f,{Text:"健康紀錄",link:"/user"}),S(Y),t.hasChild?(c(),u(F,{key:1},[t.showAddBabyFormInHasChild?A("",!0):(c(),u("h6",{key:0,onClick:e[1]||(e[1]=(...s)=>t.onAddNewBabyClick&&t.onAddNewBabyClick(...s))},e[22]||(e[22]=[me(" 新增寶貝 "),n("img",{src:Ft,alt:""},null,-1)]))),S(v,{babyList:t.babyStore.babyAPIData,selectedChildID:t.babyStore.selectedChildID,onSelectChild:t.onClickChild,onEditChild:t.onEditChild},null,8,["babyList","selectedChildID","onSelectChild","onEditChild"]),t.showAddBabyFormInHasChild?(c(),u("div",Ot,[S(w,{babyInfos:t.newBabyInfos,existingOffset:t.babyStore.babyAPIData.length,onAddBaby:e[2]||(e[2]=()=>t.newBabyInfos.push({name:"",gender:"",birthDate:null})),onRemoveBaby:e[3]||(e[3]=s=>{t.newBabyInfos.length>1&&t.newBabyInfos.splice(s,1)})},null,8,["babyInfos","existingOffset"]),n("div",Kt,[n("button",{class:"babyRerordCommonBtn babyRerordPrevBtn",onClick:e[4]||(e[4]=s=>t.showAddBabyFormInHasChild=!1)}," 取消 "),n("button",{class:"babyRerordCommonBtn",onClick:e[5]||(e[5]=(...s)=>t.submitNewBabyData&&t.submitNewBabyData(...s))}," 儲存 ")])])):A("",!0),((R=t.curChildData)==null?void 0:R.flowStage)==="chooseVersion"?(c(),u("div",jt,[e[25]||(e[25]=n("h3",null,"請依照您今日的需求，選擇您想要的評估方式",-1)),n("div",qt,[n("div",{class:ae(["chooseBox",{active:t.curChildData.version==="tracking"}]),onClick:e[6]||(e[6]=s=>t.setVersion("tracking"))},e[23]||(e[23]=[n("h4",null,"症狀追蹤",-1),n("p",null,"只評估上次有問題的症狀，約5~10分鐘",-1),n("div",{class:"bgImg"},[n("img",{src:kt,alt:"症狀追蹤"})],-1)]),2),n("div",{class:ae(["chooseBox",{active:t.curChildData.version==="full"}]),onClick:e[7]||(e[7]=s=>t.setVersion("full"))},e[24]||(e[24]=[n("h4",null,"完整評估",-1),n("p",null,"檢查所有可能的症狀，約25分鐘",-1),n("div",{class:"bgImg"},[n("img",{src:_t,alt:"完整評估"})],-1)]),2)]),n("div",zt,[n("button",{class:"babyRerordCommonBtn",onClick:e[8]||(e[8]=(...s)=>t.onChooseVersionNext&&t.onChooseVersionNext(...s))}," 下一步 ")])])):((x=t.curChildData)==null?void 0:x.flowStage)==="historyView"?(c(),u("div",Ut,[n("div",Wt,[n("div",Zt,[n("div",Jt,[e[26]||(e[26]=n("img",{src:Ie,alt:"年份篩選"},null,-1)),n("div",{class:"monthText",onClick:e[9]||(e[9]=(...s)=>t.toggleYearBox&&t.toggleYearBox(...s))},g(t.selectedYear)+"年 ",1),ne(n("div",Xt,[(c(!0),u(F,null,be(t.displayYears,s=>(c(),u("div",{class:"year",key:s,onClick:E=>t.selectYear(s)},g(s),9,$t))),128))],512),[[Be,t.yearBoxVisible]])]),n("div",eo,[e[27]||(e[27]=n("img",{src:Ie,alt:"月份篩選"},null,-1)),n("div",{class:"monthText",onClick:e[10]||(e[10]=(...s)=>t.toggleMonthBox&&t.toggleMonthBox(...s))},g(t.selectedMonth)+"月份 ",1),ne(n("div",to,[(c(!0),u(F,null,be(t.months,s=>(c(),u("div",{class:"month",key:s,onClick:E=>t.selectMonth(s)},g(s)+"月 ",9,oo))),128))],512),[[Be,t.monthBoxVisible]])])]),n("div",ao,[(c(!0),u(F,null,be(t.filteredHistoryList,(s,E)=>(c(),u("div",{class:"historyViewItem",key:E,onClick:fe=>t.onClickHistoryItem(s)},[n("div",lo,[e[28]||(e[28]=n("img",{src:Pt,alt:""},null,-1)),n("h6",null,g(t.formatCheckTime(s.CheckTime)),1)]),e[29]||(e[29]=n("img",{src:pt,alt:""},null,-1))],8,no))),128)),t.filteredHistoryList.length===0?(c(),u("div",so," 此月份無檢測紀錄 ")):A("",!0)])])])):((_=t.curChildData)==null?void 0:_.flowStage)==="result"?(c(),u("div",ro,[S(D,{reportData:t.curChildData.reportData},null,8,["reportData"]),n("div",io,[n("button",{class:"babyRerordCommonBtn",onClick:e[11]||(e[11]=(...s)=>t.goBackToHistory&&t.goBackToHistory(...s))}," 返回 ")])])):((U=t.curChildData)==null?void 0:U.flowStage)==="indicator"?(c(),u("div",co,[S(k,{ansTypes:t.ansTypes,curChildData:t.curChildData},null,8,["ansTypes","curChildData"]),n("div",uo,[n("button",{class:"babyRerordCommonBtn",disabled:t.isDisableCommonBtn,onClick:e[12]||(e[12]=(...s)=>t.onCommonButtonClick&&t.onCommonButtonClick(...s))},g(t.commonButtonLabel),9,mo)])])):((W=t.curChildData)==null?void 0:W.flowStage)==="qa"?(c(),u("div",bo,[e[30]||(e[30]=n("p",null,"以下問題的困擾程度",-1)),S(I,{ref:"qaListRef",questions:t.curChildData.childQuestions,CID:t.babyStore.selectedChildID,currentPage:t.curChildData.currentPage,onUpdatePage:e[13]||(e[13]=s=>t.curChildData.currentPage=s),onGoTimes:t.onGoTimes},null,8,["questions","CID","currentPage","onGoTimes"]),n("div",{class:ae(["babyRerordBtnGroup",{"double-btn":t.hasTwoButtons}])},[t.currentPage>1?(c(),u("button",{key:0,class:"babyRerordCommonBtn babyRerordPrevBtn",onClick:e[14]||(e[14]=(...s)=>t.onPrevPageClick&&t.onPrevPageClick(...s))}," 上一頁 ("+g(t.currentPage)+"/"+g(t.totalPages)+") ",1)):A("",!0),n("button",{class:"babyRerordCommonBtn",disabled:t.isDisableNextBtn,onClick:e[15]||(e[15]=(...s)=>t.onNextPageClick&&t.onNextPageClick(...s))},g(t.nextButtonLabel),9,fo)],2)])):((Z=t.curChildData)==null?void 0:Z.flowStage)==="times"?(c(),u("div",yo,[e[31]||(e[31]=n("h3",null,"以下問題上週發生幾次",-1)),S(O,{timesQuestions:t.timesDisplayedQuestions,indexOnThisPage:t.timesStartIndex},null,8,["timesQuestions","indexOnThisPage"]),n("div",{class:ae(["babyRerordBtnGroup",{"double-btn":t.timesCurrentPage>1}])},[t.timesCurrentPage>1?(c(),u("button",{key:0,class:"babyRerordCommonBtn babyRerordPrevBtn",onClick:e[16]||(e[16]=(...s)=>t.onTimesPrevPage&&t.onTimesPrevPage(...s))}," 上一頁 ("+g(t.timesCurrentPage)+"/"+g(t.timesTotalPages)+") ",1)):A("",!0),n("button",{class:"babyRerordCommonBtn",disabled:!t.isTimesPageFilled,onClick:e[17]||(e[17]=(...s)=>t.onTimesNextClick&&t.onTimesNextClick(...s))},g(t.timesNextButtonLabel),9,ho)],2)])):((J=t.curChildData)==null?void 0:J.flowStage)==="priority"?(c(),u("div",vo,[e[32]||(e[32]=n("h3",null,"請從中選擇最多10個 目前最想解決的症狀",-1)),S(y,{symptoms:t.curChildData.childTimesQues,onSelectionChanged:t.onPrioritySelectionChanged},null,8,["symptoms","onSelectionChanged"]),n("div",Co,[n("button",{class:"babyRerordCommonBtn",disabled:t.selectedPriorityCount===0,style:wt(t.priorityButtonStyle),onClick:e[18]||(e[18]=(...s)=>t.onPrioritySubmit&&t.onPrioritySubmit(...s))}," 看報告 ",12,go)])])):A("",!0)],64)):(c(),u(F,{key:0},[t.showAddBabyForm?(c(),ue(w,{key:1,babyInfos:t.babyInfos,onAddBaby:t.addBabyInfo,onRemoveBaby:t.removeBaby},null,8,["babyInfos","onAddBaby","onRemoveBaby"])):(c(),ue(d,{key:0})),n("div",Qt,[n("button",{class:"babyRerordCommonBtn",disabled:t.isDisableCommonBtn,onClick:e[0]||(e[0]=(...s)=>t.onCommonButtonClick&&t.onCommonButtonClick(...s))},g(t.commonButtonLabel),9,Yt)])],64)),t.showBabyCover?(c(),u("div",Do)):A("",!0),t.showBabyAlert?(c(),u("div",Bo,[e[33]||(e[33]=n("h5",null,[me("寶貝基本資料"),n("br"),me("確認填寫正確？")],-1)),n("div",wo,[n("button",{class:"babyAlertBtn babyAlertBtnNot",onClick:e[19]||(e[19]=(...s)=>t.closeBabyAlert&&t.closeBabyAlert(...s))}," 不確定 "),n("button",{class:"babyAlertBtn babyAlertBtnRight",onClick:e[20]||(e[20]=(...s)=>t.submitBabyData&&t.submitBabyData(...s))}," 確定 ")])])):A("",!0),S(M,{show:t.showEditAlert,cid:t.editChildData.CID,name:t.editChildData.name,gender:t.editChildData.gender,birthDate:t.editChildData.birthDate,onClose:e[21]||(e[21]=s=>t.showEditAlert=!1)},null,8,["show","cid","name","gender","birthDate"])])],64)}const Oo=Te(Et,[["render",Io]]);export{Oo as default};
