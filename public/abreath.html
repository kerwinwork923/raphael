<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>æ™ºå¹³è¡¡ï½œå—…è¦º Ã— æ­£å¿µå‘¼å¸ Ã— ç¥ç¶“ä¿®å¾©ç·´ç¿’</title>
  <style>
    :root {
      --deep:#0f3b3b;
      --gold:#c9a14a;
      --muted:#6b7280;
      --ink:#1f2a37;
      --bg:#ffffff;
    }
    *{box-sizing:border-box;margin:0;padding:0}
    body {
      font-family:"PingFang TC","Microsoft JhengHei",system-ui,Segoe UI,Arial,sans-serif;
      background:var(--bg);
      color:var(--ink);
      line-height:1.8;
    }
    header {
      text-align:center;
      padding:32px 16px 10px;
    }
    header h1 {
      font-size:clamp(26px,4vw,38px);
      font-weight:800;
      color:var(--deep);
      letter-spacing:1px;
    }
    header p {
      max-width:800px;
      margin:10px auto 0;
      color:var(--muted);
      font-size:15px;
    }
    header .accent {
      width:140px;
      height:3px;
      background:var(--gold);
      margin:18px auto 0;
      border-radius:2px;
    }

    .page-wrap {
      max-width:1080px;
      margin:0 auto 60px;
      padding:0 16px;
    }

    .intro-card {
      margin-top:24px;
      padding:20px 22px;
      border-radius:18px;
      border:1px solid rgba(201,161,74,.35);
      box-shadow:0 10px 30px rgba(15,59,59,0.08);
      background:#fff;
    }
    .intro-card h2 {
      font-size:20px;
      color:var(--deep);
      margin-bottom:6px;
      font-weight:800;
    }
    .intro-card p {
      font-size:15px;
      color:var(--muted);
      margin-bottom:4px;
    }
    .intro-card ul {
      margin:8px 0 0 18px;
      color:var(--muted);
      font-size:14px;
    }
    .intro-card li { margin-bottom:4px; }

    /* æ¨¡å¼åˆ‡æ› */
    .mode-switch {
      margin-top:26px;
      display:flex;
      justify-content:center;
      gap:10px;
      flex-wrap:wrap;
    }
    .mode-btn {
      padding:10px 22px;
      border-radius:999px;
      border:1px solid rgba(201,161,74,.6);
      background:#fff;
      color:var(--deep);
      font-weight:800;
      font-size:14px;
      cursor:pointer;
      transition:.2s;
    }
    .mode-btn.active {
      background:var(--gold);
      color:#fff;
      box-shadow:0 8px 22px rgba(201,161,74,.45);
    }
    .mode-btn:hover { transform:translateY(-1px); }

    .panel {
      margin-top:24px;
      border-radius:18px;
      border:1px solid rgba(201,161,74,.35);
      box-shadow:0 12px 34px rgba(17,24,39,.06);
      background:#fff;
      padding:22px 22px 26px;
      display:none;
    }
    .panel.active { display:block; }

    .panel-header h3 {
      font-size:20px;
      color:var(--deep);
      font-weight:800;
      margin-bottom:4px;
    }
    .panel-header p {
      font-size:14px;
      color:var(--muted);
      margin-bottom:10px;
    }

    .video-wrap {
      margin-top:10px;
      border-radius:16px;
      overflow:hidden;
      box-shadow:0 8px 28px rgba(0,0,0,0.14);
    }
    .video-wrap iframe {
      width:100%;
      aspect-ratio:16/9;
      border:0;
      display:block;
    }

    .two-col {
      margin-top:18px;
      display:grid;
      grid-template-columns:minmax(0,1.6fr) minmax(0,1.2fr);
      gap:18px;
    }
    @media (max-width:768px){
      .two-col { grid-template-columns:1fr; }
    }

    .bullet-box {
      padding:14px 16px;
      border-radius:14px;
      border:1px dashed rgba(201,161,74,.6);
      background:rgba(201,161,74,.03);
      font-size:14px;
      color:var(--muted);
    }
    .bullet-box h4 {
      font-size:15px;
      color:var(--deep);
      font-weight:800;
      margin-bottom:6px;
    }
    .bullet-box ul {
      margin-left:18px;
    }
    .bullet-box li { margin-bottom:4px; }

    /* å¯¦ä½œæ§åˆ¶ï¼†é€²åº¦ */
    .practice-controls {
      padding:14px 16px;
      border-radius:14px;
      border:1px solid rgba(201,161,74,.35);
      background:linear-gradient(135deg,rgba(201,161,74,.08),#fff);
    }
    .practice-controls h4 {
      font-size:15px;
      font-weight:800;
      color:var(--deep);
      margin-bottom:6px;
    }
    .practice-controls p {
      font-size:13px;
      color:var(--muted);
      margin-bottom:10px;
    }
    .btn-primary, .btn-ghost {
      display:inline-block;
      padding:9px 18px;
      border-radius:999px;
      font-size:14px;
      font-weight:800;
      cursor:pointer;
      border:2px solid var(--gold);
      transition:.2s;
    }
    .btn-primary {
      background:var(--gold);
      color:#fff;
      margin-right:6px;
    }
    .btn-primary:disabled {
      opacity:.4;
      cursor:not-allowed;
    }
    .btn-primary:not(:disabled):hover {
      background:transparent;
      color:var(--gold);
    }
    .btn-ghost {
      background:transparent;
      color:var(--gold);
    }
    .btn-ghost:hover {
      background:rgba(201,161,74,.08);
    }

    .practice-stats {
      padding:14px 16px;
      border-radius:14px;
      border:1px solid rgba(148,163,184,0.4);
      font-size:14px;
      color:var(--muted);
      background:#fafafa;
    }
    .practice-stats h4 {
      font-size:15px;
      color:var(--deep);
      font-weight:800;
      margin-bottom:6px;
    }
    .practice-stats strong { color:var(--gold); }
    .stat-row { margin-bottom:4px; }

    .session-list {
      margin-top:8px;
      max-height:220px;
      overflow:auto;
      padding-left:16px;
    }
    .session-list li {
      margin-bottom:4px;
      font-size:13px;
    }

    .tag {
      display:inline-block;
      padding:2px 8px;
      border-radius:999px;
      border:1px solid rgba(201,161,74,.5);
      font-size:11px;
      color:var(--gold);
      margin-left:4px;
    }

    .toast {
      position:fixed;
      left:50%;
      bottom:24px;
      transform:translateX(-50%);
      background:#111827;
      color:#fff;
      padding:10px 16px;
      border-radius:999px;
      font-size:13px;
      display:none;
      z-index:999;
    }

    footer {
      margin-top:40px;
      text-align:center;
      padding:26px 10px 32px;
      border-top:1px solid rgba(201,161,74,.28);
      color:var(--muted);
      font-size:13px;
      background:linear-gradient(135deg,rgba(201,161,74,.05),rgba(255,255,255,0));
    }
  </style>
</head>
<body>

<header>
  <h1>å—…è¦º Ã— æ­£å¿µå‘¼å¸ Ã— ç¥ç¶“ä¿®å¾©ï½œæ¯æ—¥30åˆ†é˜å®Œæ•´ç·´ç¿’</h1>
  <div class="accent"></div>
  <p>é€éã€Œæ“´é¦™ Ã— å–®é¼»å‘¼å¸ Ã— å—…è¦ºæ­£å¿µã€ï¼Œè®“è‡ªå¾‹ç¥ç¶“å¾ç·Šç¹ƒæ¨¡å¼ï¼Œå›åˆ°ä¿®å¾©èˆ‡ç©©å®šã€‚<br>
  å»ºè­°æ¯å¤©å›ºå®šä¸€å€‹æ™‚é–“ï¼Œçµ¦è‡ªå·± 30 åˆ†é˜ï¼Œåªå°ˆå¿ƒç…§é¡§è‡ªå·±ã€‚</p>
</header>

<main class="page-wrap">
  <section class="intro-card">
    <h2>é€™å€‹é é¢ï¼Œåˆ†æˆå…©å€‹æ­¥é©Ÿï¼š</h2>
    <p>â‘  å…ˆçœ‹æ•™å­¸å½±ç‰‡ï¼Œäº†è§£æ“´é¦™å„€æ“ä½œèˆ‡æ•´é«”æµç¨‹ï¼šä½•æ™‚æ›é‚Šã€ä½•æ™‚å¡å°æ¯å™¨ã€ä½•æ™‚åšå¾ªç’°å˜†æ¯ã€‚</p>
    <p>â‘¡ ç†Ÿæ‚‰ä¹‹å¾Œï¼Œæ¯å¤©è·Ÿè‘—å¯¦ä½œå½±ç‰‡åš 30 åˆ†é˜ç·´ç¿’ï¼Œç³»çµ±æœƒå¹«æ‚¨ç´€éŒ„æ¯ä¸€æ¬¡ç·´ç¿’è¶³è·¡ã€‚</p>
    <ul>
      <li>0-5 åˆ†é˜ï¼šé›™é¼»å˜†æ¯å‘¼å¸æ³• - ç·©æ…¢å¸æ°£ç·©æ…¢åæ°£</li>
      <li>5-15 åˆ†é˜ï¼šå³å´å–®é¼»æ­£å¿µå‘¼å¸(å¡ä½å·¦é¼»)- æé«˜äº¤æ„Ÿç¥ç¶“æ´»æ€§</li>
      <li>15-20 åˆ†é˜: é›™é¼»å˜†æ¯å‘¼å¸æ³• - ç·©æ…¢å¸æ°£ç·©æ…¢åæ°£ </li>
      <li>20-30 åˆ†é˜: å·¦å´å–®é¼»æ­£å¿µå‘¼å¸(å¡ä½å³é¼»)- æé«˜å‰¯äº¤æ„Ÿç¥ç¶“æ´»æ€§</li>
    </ul>
  </section>

  <!-- æ¨¡å¼åˆ‡æ›æŒ‰éˆ• -->
  <div class="mode-switch" aria-label="ç·´ç¿’æ¨¡å¼é¸æ“‡">
    <button class="mode-btn active" data-target="panel-learn">â‘  å…ˆäº†è§£ï¼šæ•™å­¸å½±ç‰‡</button>
    <button class="mode-btn" data-target="panel-practice">â‘¡ é–‹å§‹å¯¦ä½œï¼šæ¯æ—¥ç·´ç¿’ç´€éŒ„</button>
  </div>

  <!-- é¢æ¿ä¸€ï¼šæ•™å­¸å½±ç‰‡ -->
  <section id="panel-learn" class="panel active" aria-labelledby="learn-title">
    <div class="panel-header">
      <h3 id="learn-title">äº†è§£åŸç†èˆ‡æ“ä½œï½œæ•™å­¸å½±ç‰‡</h3>
      <p>å»ºè­°å…ˆå®Œæ•´çœ‹å®Œä¸€æ¬¡æ•™å­¸å½±ç‰‡ï¼Œç¢ºèªä½ æ¸…æ¥šä»¥ä¸‹å¹¾ä»¶äº‹ï¼šæ“´é¦™å„€æ€éº¼åˆ‡æ›å·¦å³ã€å°æ¯å™¨æ€éº¼ä½¿ç”¨ã€å››å€‹æ®µè½å„åœ¨åšä»€éº¼ã€‚</p>
    </div>

    <div class="two-col">
      <div>
        <div class="video-wrap">
          <!-- ğŸ” é€™è£¡æ›æˆã€Œæ•™å­¸å½±ç‰‡ã€ç¶²å€ -->
          <iframe
            src="https://www.youtube.com/embed/OnvLbczesUU?rel=0&modestbranding=1"
            title="å–®å´èŠ³é¦™ Ã— æ­£å¿µå‘¼å¸ æ•™å­¸å½±ç‰‡"
            allowfullscreen
          ></iframe>
        </div>
      </div>

      <div class="bullet-box">
        <h4>é€™æ”¯æ•™å­¸å½±ç‰‡ï¼Œæœƒå¸¶ä½ çœ‹æ‡‚ï¼š</h4>
        <ul>
          <li>å¦‚ä½•æ­£ç¢ºæ“ä½œæ™ºå¹³è¡¡é›™å™´é ­æ“´é¦™å„€ï¼ˆå·¦ã€å³ç²¾æ²¹åˆ‡æ›ï¼‰</li>
          <li>30 åˆ†é˜çš„ 4 å€‹æ®µè½ï¼šå˜†æ¯å‘¼å¸ Ã— å³é¼»æ­£å¿µ Ã— å˜†æ¯å‘¼å¸ Ã— å·¦é¼»æ­£å¿µ</li>
          <li>å°æ¯å™¨è¦å¡å“ªä¸€é‚Šï¼Ÿä»€éº¼æ™‚å€™æ‹”æ‰ã€ä»€éº¼æ™‚å€™æ›é¦™æ°£ã€‚</li>
          <li>æ¯ä¸€æ®µç·´ç¿’æ™‚ï¼Œèº«é«”èˆ‡æƒ…ç·’å¯èƒ½å‡ºç¾çš„è®ŠåŒ–ï¼Œä»¥åŠå¦‚ä½•æº«æŸ”åœ°å¸¶è‡ªå·±å›ä¾†ã€‚</li>
        </ul>
        <p style="margin-top:6px;">ç•¶ä½ å·²ç¶“ç†Ÿæ‚‰æ•´å€‹ 30 åˆ†é˜çš„ç¯€å¥ï¼Œå°±å¯ä»¥åˆ‡æ›åˆ°ç¬¬äºŒå€‹æ¨¡å¼ï¼šæ¯å¤©è·Ÿè‘—å¯¦ä½œå½±ç‰‡ç·´ç¿’ï¼Œä¸¦é–‹å§‹ç´¯ç©è‡ªå·±çš„ç´€éŒ„ã€‚</p>
      </div>
    </div>
  </section>

  <!-- é¢æ¿äºŒï¼šæ¯æ—¥å¯¦ä½œ -->
  <section id="panel-practice" class="panel" aria-labelledby="practice-title">
    <div class="panel-header">
      <h3 id="practice-title">æ¯æ—¥å¯¦ä½œï½œ30 åˆ†é˜å–®å´èŠ³é¦™ Ã— æ­£å¿µå‘¼å¸</h3>
      <p>è«‹å…ˆæº–å‚™å¥½ï¼šæ“´é¦™å„€ã€å·¦å³å…©ç“¶ç²¾æ²¹ã€å°æ¯å™¨èˆ‡ä¸€å€‹ä¸è¢«æ‰“æ“¾çš„è§’è½ã€‚<br>
      æ¯æ¬¡éƒ½å¾é€™è£¡é–‹å§‹ï¼ŒæŒ‰ä¸‹ã€Œé–‹å§‹æœ¬æ¬¡ç·´ç¿’ã€ï¼Œå½±ç‰‡æœƒå•Ÿå‹•ï¼ŒåŒæ™‚å¹«æ‚¨ç•™ä¸‹ä»Šå¤©çš„ä¸€ç­†ç´€éŒ„ã€‚</p>
    </div>

    <div class="two-col">
      <div>
        <div class="video-wrap">
          <!-- ğŸ” é€™è£¡æ›æˆã€Œæ­£å¼å¯¦ä½œå½±ç‰‡ã€ç¶²å€ -->
          <iframe
            id="practiceVideo"
            src="https://www.youtube.com/embed/v8Jx_GX2mgE?enablejsapi=1&rel=0&modestbranding=1"
            title="å–®å´èŠ³é¦™ Ã— æ­£å¿µå‘¼å¸ å¯¦ä½œå¼•å°"
            allowfullscreen
          ></iframe>
        </div>

        <div class="practice-controls" style="margin-top:14px;">
          <h4>å¯¦ä½œå‰è«‹å…ˆç¢ºèªï¼š</h4>
          <p>æ“´é¦™å„€ä¸­å·¦å³ç²¾æ²¹åˆ†åˆ¥æ”¾å¥½ï¼›å°æ¯å™¨åœ¨æ‰‹é‚Šã€‚æ‰‹æ©Ÿè«‹èª¿æˆéœéŸ³æˆ–é£›èˆªæ¨¡å¼ï¼Œè®“é€™30 åˆ†é˜åªå±¬æ–¼æ‚¨ã€‚</p>
          <button id="btnStart" class="btn-primary">é–‹å§‹æœ¬æ¬¡ 30 åˆ†é˜ç·´ç¿’</button>
          <button id="btnFinish" class="btn-ghost" disabled>æˆ‘å·²å®Œæˆé€™æ¬¡ç·´ç¿’</button>
          <p style="font-size:12px;margin-top:6px;color:var(--muted);">
            âœ… æŒ‰ä¸‹ã€Œé–‹å§‹ã€å¾Œï¼Œç³»çµ±æœƒå…ˆè¨˜éŒ„é–‹å§‹æ™‚é–“ã€‚<br>
            âœ… ç·´ç¿’çµæŸæ™‚ï¼Œè«‹è¨˜å¾—æŒ‰ã€Œæˆ‘å·²å®Œæˆã€ï¼Œæ‰æœƒç®—é€²ç´¯ç©æ¬¡æ•¸ã€‚
          </p>
        </div>
      </div>

      <div class="practice-stats">
        <h4>æˆ‘çš„ç·´ç¿’æˆé•·ç´€éŒ„ </h4>
        <p class="stat-row">ç´¯ç©å®Œæˆæ¬¡æ•¸ï¼š<strong id="statTotal">0</strong> æ¬¡</p>
        <p class="stat-row">æœ€è¿‘ä¸€æ¬¡å®Œæˆæ™‚é–“ï¼š<strong id="statLast">å°šæœªé–‹å§‹</strong></p>
        <p class="stat-row">æŒçºŒç·´ç¿’å¤©æ•¸ï¼ˆè‡³å°‘ä¸€å¤©ä¸€æ¬¡ï¼‰ï¼š<strong id="statStreak">0</strong> å¤©</p>

        <ul id="sessionList" class="session-list"></ul>
      </div>
    </div>
  </section>
</main>

<div id="toast" class="toast" role="status" aria-live="polite"></div>

<footer>Â© 2025 æ™ºå¹³è¡¡å¥åº·é›†åœ˜ â€” æ„Ÿè¬æ‚¨é¡˜æ„èŠ±æ™‚é–“å¥½å¥½ç…§é¡§è‡ªå·±ã€‚</footer>

<!-- YouTube Iframe API -->
<script src="https://www.youtube.com/iframe_api"></script>
<script>
  /* ====== æ¨¡å¼åˆ‡æ› ====== */
  const modeBtns = document.querySelectorAll(".mode-btn");
  const panels = document.querySelectorAll(".panel");
  modeBtns.forEach(btn => {
    btn.addEventListener("click", () => {
      const target = btn.dataset.target;
      modeBtns.forEach(b => b.classList.toggle("active", b === btn));
      panels.forEach(p => p.classList.toggle("active", p.id === target));
    });
  });

  /* ====== YouTube Player for practice ====== */
  let practicePlayer = null;
  let currentSession = null; // {start:timestamp}

  window.onYouTubeIframeAPIReady = function() {
    const iframe = document.getElementById("practiceVideo");
    if (!iframe) return;
    practicePlayer = new YT.Player("practiceVideo", {
      events: {
        onStateChange: (e) => {
          if (e.data === YT.PlayerState.ENDED && currentSession && !currentSession.finishedBy) {
            // å½±ç‰‡æ’­å®Œï¼Œè‹¥ä½¿ç”¨è€…å¿˜è¨˜æŒ‰ã€Œå®Œæˆã€ï¼Œè‡ªå‹•å¹«ä»–çµæŸä¸€æ¬¡
            finishPractice("auto");
          }
        }
      }
    });
  };

  /* ====== ç·´ç¿’ç´€éŒ„ï¼ˆlocalStorageï¼‰ ====== */
  const STORAGE_KEY = "aromaPracticeSessions_v1";

  function loadSessions() {
    try {
      return JSON.parse(localStorage.getItem(STORAGE_KEY) || "[]");
    } catch {
      return [];
    }
  }
  function saveSessions(list) {
    localStorage.setItem(STORAGE_KEY, JSON.stringify(list));
  }

  function formatDate(ts) {
    const d = new Date(ts);
    const pad = n => String(n).padStart(2,"0");
    return `${d.getFullYear()}-${pad(d.getMonth()+1)}-${pad(d.getDate())} ${pad(d.getHours())}:${pad(d.getMinutes())}`;
  }
  function formatDateYMD(ts) {
    const d = new Date(ts);
    const pad = n => String(n).padStart(2,"0");
    return `${d.getFullYear()}-${pad(d.getMonth()+1)}-${pad(d.getDate())}`;
  }

  function computeStreak(sessions) {
    if (!sessions.length) return 0;
    const days = Array.from(new Set(sessions.map(s => formatDateYMD(s.end || s.start)))).sort();
    // å¾æœ€å¾Œä¸€å¤©å¾€å‰ç®—é€£çºŒå¤©æ•¸
    let streak = 1;
    for (let i = days.length - 2; i >= 0; i--) {
      const cur = new Date(days[i]);
      const next = new Date(days[i+1]);
      const diff = (next - cur) / (1000*60*60*24);
      if (diff === 1) {
        streak++;
      } else if (diff > 1) {
        break;
      }
    }
    return streak;
  }

  function renderSessions() {
    const sessions = loadSessions();
    const totalEl = document.getElementById("statTotal");
    const lastEl  = document.getElementById("statLast");
    const listEl  = document.getElementById("sessionList");
    const streakEl= document.getElementById("statStreak");

    totalEl.textContent = sessions.length;
    if (sessions.length) {
      const last = sessions[sessions.length - 1];
      lastEl.textContent = formatDate(last.end || last.start);
    } else {
      lastEl.textContent = "å°šæœªé–‹å§‹";
    }
    streakEl.textContent = computeStreak(sessions);

    listEl.innerHTML = "";
    sessions.slice().reverse().forEach((s, idx) => {
      const li = document.createElement("li");
      const mins = Math.round((s.duration || 0) / 60);
      li.textContent = `${formatDate(s.end || s.start)} â€” å®Œæˆä¸€æ¬¡ç·´ç¿’ï¼ˆç´„ ${mins || 30} åˆ†é˜ï¼‰`;
      listEl.appendChild(li);
    });
  }

  /* ====== æ§åˆ¶æŒ‰éˆ• ====== */
  const btnStart = document.getElementById("btnStart");
  const btnFinish = document.getElementById("btnFinish");
  const toast = document.getElementById("toast");

  function showToast(msg) {
    toast.textContent = msg;
    toast.style.display = "block";
    setTimeout(() => { toast.style.display = "none"; }, 1800);
  }

  function startPractice() {
    if (currentSession) {
      showToast("å·²ç¶“åœ¨é€²è¡Œä¸€å€‹ç·´ç¿’å›‰ã€‚å…ˆå®Œæˆé€™æ¬¡å†é–‹å§‹ä¸‹ä¸€æ¬¡ã€‚");
      return;
    }
    currentSession = { start: Date.now(), finishedBy: null };
    btnStart.disabled = true;
    btnFinish.disabled = false;

    if (practicePlayer && practicePlayer.playVideo) {
      practicePlayer.playVideo();
    }
    showToast("å·²é–‹å§‹æœ¬æ¬¡ç·´ç¿’ï¼Œç¥ä½ æœ‰ä¸€æ®µå®‰ç©©çš„ 30 åˆ†é˜ã€‚");
  }

  function finishPractice(mode) {
    if (!currentSession) {
      showToast("ç›®å‰æ²’æœ‰æ­£åœ¨é€²è¡Œçš„ç·´ç¿’ã€‚");
      return;
    }
    currentSession.end = Date.now();
    currentSession.duration = (currentSession.end - currentSession.start) / 1000; // sec
    currentSession.finishedBy = mode || "manual";

    const sessions = loadSessions();
    sessions.push(currentSession);
    saveSessions(sessions);
    currentSession = null;

    btnStart.disabled = false;
    btnFinish.disabled = true;

    renderSessions();
    showToast("å·²ç‚ºä½ è¨˜éŒ„é€™æ¬¡ç·´ç¿’ï¼Œè¾›è‹¦äº†ï¼");
  }

  btnStart.addEventListener("click", () => startPractice());
  btnFinish.addEventListener("click", () => finishPractice("manual"));

  // åˆå§‹åŒ–
  document.addEventListener("DOMContentLoaded", renderSessions);
</script>

</body>
</html>
