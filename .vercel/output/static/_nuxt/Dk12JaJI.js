import{v as c,x as a,y as s,H as r,z as l,I as d,T as u}from"./HfdH-K36.js";import{_ as h}from"./DlAUqK2U.js";const v={data(){return{status:"請尋找藍牙裝置...",deviceName:null,isConnected:!1,inputText:"",sendStatus:"",selectedDevice:null,characteristic:null}},methods:{async findBluetoothDevice(){try{this.status="尋找藍牙裝置中...";const e=await navigator.bluetooth.requestDevice({acceptAllDevices:!0,optionalServices:["0000ffe0-0000-1000-8000-00805f9b34fb"]});this.deviceName=e.name||"無名稱裝置",this.selectedDevice=e,this.status=`已找到裝置: ${this.deviceName}`,this.connectToDevice()}catch(e){console.error("尋找裝置失敗:",e),this.status="未找到裝置"}},async connectToDevice(){try{this.status="嘗試連接中...";const t=await(await this.selectedDevice.gatt.connect()).getPrimaryService("0000ffe0-0000-1000-8000-00805f9b34fb");this.characteristic=await t.getCharacteristic("0000ffe1-0000-1000-8000-00805f9b34fb"),this.isConnected=!0,this.status="裝置連接成功，準備傳送資料"}catch(e){console.error("連接裝置失敗:",e),this.status="連接裝置失敗"}},async sendData(){if(!this.characteristic||!this.inputText){this.sendStatus="請輸入資料後再傳送";return}try{const t=new TextEncoder().encode(this.inputText);await this.characteristic.writeValue(t),this.sendStatus=`資料已傳送: ${this.inputText}`}catch(e){console.error("傳送資料失敗:",e),this.sendStatus="傳送資料失敗"}}}},f={class:"container"},p={class:"field"},b={class:"status"},m={key:0,class:"field"},x={class:"input-box"},D={key:1,class:"field"},y={key:2,class:"field"},_={class:"send-status"};function T(e,t,w,C,i,o){return a(),c("div",f,[t[6]||(t[6]=s("h2",{class:"title"},"藍芽傳輸資料",-1)),s("div",p,[t[3]||(t[3]=s("label",null,"1.藍牙裝置連接",-1)),s("button",{class:"button",onClick:t[0]||(t[0]=(...n)=>o.findBluetoothDevice&&o.findBluetoothDevice(...n))},"尋找藍牙裝置"),s("p",b,l(i.status),1)]),i.deviceName?(a(),c("div",m,[t[4]||(t[4]=s("label",null,"已配對裝置",-1)),s("div",x,l(i.deviceName),1)])):r("",!0),i.isConnected?(a(),c("div",D,[t[5]||(t[5]=s("label",null,"2. 輸入資料",-1)),d(s("input",{"onUpdate:modelValue":t[1]||(t[1]=n=>i.inputText=n),type:"text",placeholder:"請輸入要傳送的資料",class:"input-box"},null,512),[[u,i.inputText]])])):r("",!0),i.isConnected?(a(),c("div",y,[s("button",{class:"button",onClick:t[2]||(t[2]=(...n)=>o.sendData&&o.sendData(...n))},"傳送"),s("p",_,l(i.sendStatus),1)])):r("",!0)])}const N=h(v,[["render",T],["__scopeId","data-v-5d01ec34"]]);export{N as default};
