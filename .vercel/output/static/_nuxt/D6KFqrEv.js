import{_ as O}from"./-OuEz4cf.js";import{r as p,o as j,e as z,v as n,M as J,K as i,x as t,z as R,L as g,U as y,B as Q,P as T,A as X,a3 as q,t as s,y as c}from"./D70xjexz.js";import{_ as Y,n as N,r as e1,a as b}from"./DW-Wn0DS.js";import{a as S}from"./CCb-kr4I.js";import{_ as t1}from"./C4EKiFTB.js";import{s as a1}from"./Di88QSaI.js";import"./DlAUqK2U.js";const s1="data:image/svg+xml,%3csvg%20width='18'%20height='18'%20viewBox='0%200%2018%2018'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20id='Group'%3e%3cpath%20id='Vector'%20d='M6.33985%200.777349C3.23829%201.28126%200.921882%203.80079%200.722664%206.88282C0.644539%208.1211%200.863289%209.20704%201.40626%2010.3086C3.01173%2013.5586%206.94532%2014.8984%2010.2344%2013.3164C10.6953%2013.0938%2011.1875%2012.7813%2011.5313%2012.4844L11.7422%2012.3086L14.2891%2014.8516C16.2188%2016.7852%2016.8555%2017.3984%2016.9297%2017.4024C17.1289%2017.4102%2017.1875%2017.3906%2017.293%2017.2774C17.3672%2017.1953%2017.3984%2017.1211%2017.3984%2017.0195C17.3984%2016.8789%2017.3086%2016.7813%2014.8594%2014.332C13.4649%2012.9336%2012.3203%2011.7774%2012.3203%2011.7617C12.3203%2011.7461%2012.3984%2011.6367%2012.4961%2011.5195C12.9609%2010.9492%2013.4141%2010.1094%2013.6445%209.40235C13.8828%208.67579%2013.9414%208.25001%2013.9375%207.32032C13.9375%206.36719%2013.8828%206.02735%2013.6094%205.20704C12.8711%202.98438%2010.9805%201.32032%208.63673%200.832037C8.1211%200.722662%206.85157%200.691412%206.33985%200.777349ZM8.49219%201.59766C9.43751%201.8086%2010.2227%202.17188%2010.9297%202.72657C12.0938%203.64063%2012.8555%204.92188%2013.1055%206.38673C13.1758%206.80079%2013.1836%206.96876%2013.168%207.53516C13.1367%208.44141%2012.9766%209.11329%2012.6094%209.88282C11.2109%2012.8164%207.63282%2014.043%204.72266%2012.5859C2.85938%2011.6484%201.65626%209.84766%201.50391%207.76954C1.37891%206.05469%201.9961%204.40235%203.21876%203.19141C4.15626%202.26563%205.25391%201.73047%206.63673%201.52344C6.91407%201.48438%208.20704%201.53516%208.49219%201.59766Z'%20fill='%2374BC1F'/%3e%3c/g%3e%3c/svg%3e",o1=""+new URL("notPackageImg.CXEnH_dB.png",import.meta.url).href,l1={class:"packageWrap"},n1={key:0,class:"packageGroup"},r1=["onClick"],u1={class:"packageTitle"},c1={class:"packageNumber"},i1={key:0},d1={key:1},p1={key:1,class:"notPackageWrap"},v1={class:"recommend"},m1={key:0,class:"recommendTitle"},h1={key:0},C1={key:1,class:"recommendWrap"},g1={class:"imgGroup"},f1=["src"],_1={key:0,class:"robotImg",src:Y,alt:"robot image"},k1={class:"recommendName"},w1={class:"priceGroup"},y1={class:"priceValue"},P1={class:"pricePeriod"},L1={class:"featureListGroup"},N1={__name:"package",setup(x1){const v=p(!1),f=p(!1),P=localStorage.getItem("userData");let _=P?JSON.parse(P):null;(!_||!_.MID)&&(window.location.href="/");const{MID:L,Token:x,MAID:B,Mobile:I}=_,m=p(!1),k=p([]),h=p([]),o=p([]),G={雙效紅光活力衣:e1,全效調節衣:b,三效深眠衣:N,居家治療儀:b};function U(a){return G[a]||N}function V(a){return a==="居家治療儀"}const r=p(0);let C=null;function H(){o.value.length<=1||(r.value=(r.value-1+o.value.length)%o.value.length,M())}function D(){o.value.length<=1||(r.value=(r.value+1)%o.value.length,M())}function A(){w(),o.value.length>1&&(C=a1(()=>{D()},7e3))}function w(){C&&(clearInterval(C),C=null)}function M(){w(),A()}function Z(a){return a?a.split(";").map(e=>{const[u,l]=e.trim().split("/");return{value:u.trim(),period:l?l.trim():""}}):[]}function $(){window.location.href="tel:0800000760"}function E(a){a.sURL&&window.open(a.sURL,"_blank")}async function W(){v.value=!0;try{const a=await S.post("https://23700999.com:8081/HMA/api/fr/QueryPack",{MID:L,Token:x,MAID:B,Mobile:I});if(a.data&&a.data.Result==="OK"&&a.data.RetPack){const e=a.data.RetPack;e.sort((u,l)=>{const d=new Date(u.CheckTime.replace(/\//g,"-"));return new Date(l.CheckTime.replace(/\//g,"-"))-d}),k.value=e,m.value=k.value.length>0}else m.value=!1}catch(a){console.error("API 抓取失敗",a),m.value=!1}finally{v.value=!1,f.value=!0}}async function F(){v.value=!0;try{const a=await S.post("https://23700999.com:8081/HMA/API_USE1.jsp",{MID:L,Token:x,MAID:B,Mobile:I});if(a.status===200&&a.data){h.value=a.data.PurchaseProduct||[];const e=a.data.PromoteProduct||[];o.value=e.map(u=>({name:u.ProductName,price:u.Desc1,features:u.Desc2?u.Desc2.split("。").filter(Boolean):[],slogan:u.Desc3}))}}catch(a){console.error("API 抓取失敗",a)}finally{v.value=!1,f.value=!0}}return j(async()=>{await W(),await F(),h.value.length<4&&o.value.length>1&&A()}),z(()=>{w()}),(a,e)=>{const u=O;return s(),n(g,null,[v.value?(s(),J(u,{key:0})):i("",!0),t("div",l1,[R(t1,{Text:"包裹查詢",link:"/user"}),m.value?(s(),n("div",n1,[e[1]||(e[1]=t("h3",null,"您所有的包裹編號",-1)),e[2]||(e[2]=t("p",null,"點擊該筆編號會直接跳轉到該物流的查詢頁面，自動幫您查詢包裹狀態!",-1)),(s(!0),n(g,null,y(k.value,(l,d)=>(s(),n("div",{class:"package",key:d,onClick:K=>E(l)},[t("div",u1,[t("h4",null,c(l.ProductName),1),e[0]||(e[0]=t("img",{src:s1,alt:""},null,-1))]),t("div",c1,c(l.SendNumber),1),t("h5",null,c(l.SendChannelName),1),l.CheckTime?(s(),n("h6",i1,"寄送時間 "+c(l.CheckTime),1)):i("",!0),l.SendAddr?(s(),n("h6",d1,"寄件地址 "+c(l.SendAddr),1)):i("",!0)],8,r1))),128))])):f.value?(s(),n("div",p1,[e[8]||(e[8]=t("div",{class:"notPackageGroup"},[t("img",{src:o1,alt:""}),t("p",null,"沒有包裹？不妨先看看這些為您精選的健康方案")],-1)),t("div",v1,[h.value.length<4&&o.value.length>0?(s(),n("h3",m1,[e[5]||(e[5]=Q(" 健康方案推薦 ")),o.value.length>1?(s(),n("span",h1,[(s(),n("svg",{onClick:T(H,["stop"]),xmlns:"http://www.w3.org/2000/svg",width:"24",height:"25",viewBox:"0 0 24 25",fill:"none"},e[3]||(e[3]=[t("path",{d:"M16.011 5.04146L8.70297 12.5385L16.011 20.0355C16.1418 20.1694 16.2151 20.3492 16.2151 20.5365C16.2151 20.7237 16.1418 20.9035 16.011 21.0375C15.9474 21.1023 15.8716 21.1538 15.7879 21.189C15.7042 21.2242 15.6143 21.2423 15.5235 21.2423C15.4327 21.2423 15.3428 21.2242 15.2591 21.189C15.1754 21.1538 15.0995 21.1023 15.036 21.0375L7.25997 13.062C7.12345 12.9219 7.04705 12.734 7.04705 12.5385C7.04705 12.3429 7.12345 12.155 7.25997 12.015L15.0345 4.03946C15.0981 3.97414 15.1741 3.92223 15.2581 3.88678C15.3421 3.85134 15.4323 3.83307 15.5235 3.83307C15.6146 3.83307 15.7049 3.85134 15.7889 3.88678C15.8728 3.92223 15.9489 3.97414 16.0125 4.03946C16.1433 4.17341 16.2166 4.35322 16.2166 4.54046C16.2166 4.7277 16.1433 4.90751 16.0125 5.04146H16.011Z",fill:"$raphael-black"},null,-1)]))),(s(),n("svg",{onClick:T(D,["stop"]),xmlns:"http://www.w3.org/2000/svg",width:"24",height:"25",viewBox:"0 0 24 25",fill:"none"},e[4]||(e[4]=[t("path",{d:"M7.98903 5.04146L15.297 12.5385L7.98903 20.0355C7.85819 20.1694 7.78495 20.3492 7.78495 20.5365C7.78495 20.7237 7.85819 20.9035 7.98903 21.0375C8.05257 21.1023 8.12842 21.1538 8.21213 21.189C8.29584 21.2242 8.38573 21.2423 8.47653 21.2423C8.56733 21.2423 8.65721 21.2242 8.74092 21.189C8.82463 21.1538 8.90048 21.1023 8.96403 21.0375L16.74 13.062C16.8765 12.9219 16.953 12.734 16.953 12.5385C16.953 12.3429 16.8765 12.155 16.74 12.015L8.96553 4.03946C8.90193 3.97414 8.8259 3.92223 8.74191 3.88678C8.65792 3.85134 8.56769 3.83307 8.47653 3.83307C8.38537 3.83307 8.29513 3.85134 8.21114 3.88678C8.12715 3.92223 8.05112 3.97414 7.98753 4.03946C7.85669 4.17341 7.78345 4.35322 7.78345 4.54046C7.78345 4.7277 7.85669 4.90751 7.98753 5.04146H7.98903Z",fill:"$raphael-black"},null,-1)])))])):i("",!0)])):i("",!0),h.value.length<4&&o.value.length>0?(s(),n("div",C1,[R(q,{name:"fade",mode:"out-in"},{default:X(()=>[o.value[r.value]?(s(),n("div",{class:"recommendDiv",key:r.value},[t("div",g1,[t("img",{src:U(o.value[r.value].name),alt:"product image"},null,8,f1),V(o.value[r.value].name)?(s(),n("img",_1)):i("",!0),e[6]||(e[6]=t("div",{class:"circle"},null,-1))]),t("h3",k1,c(o.value[r.value].name),1),t("p",null,c(o.value[r.value].slogan),1),t("div",w1,[(s(!0),n(g,null,y(Z(o.value[r.value].price),(l,d)=>(s(),n("div",{class:"priceItem",key:d},[t("span",y1,c(l.value),1),t("span",P1,"/"+c(l.period),1)]))),128))]),t("button",{class:"contactBtn",onClick:$}," 聯絡客服 "),e[7]||(e[7]=t("div",{class:"featureTitle"},"產品特色",-1)),t("ul",L1,[(s(!0),n(g,null,y(o.value[r.value].features,(l,d)=>(s(),n("li",{key:d},c(l),1))),128))])])):i("",!0)]),_:1})])):i("",!0)])])):i("",!0)])],64)}}};export{N1 as default};
