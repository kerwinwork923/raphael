import{_ as G}from"./-OuEz4cf.js";import{_ as j}from"./C4EKiFTB.js";import{P as g}from"./B1QmaLQs.js";import{f as _,c as b,s as D}from"./D7B7LOx5.js";import{i as L,t as m,v as p,x as o,y as c,_ as d,z as C,B as I,N as B,K as x,a6 as P,r as R,o as E,M,L as A,U as V}from"./D70xjexz.js";import{a as O}from"./CCb-kr4I.js";import{_ as W}from"./C2uo4fds.js";import{_ as $}from"./DlAUqK2U.js";const z={class:"resultList"},H={class:"titleGroup"},J={key:0},K={key:1},F={__name:"SymptomResult2Compare",props:{symptomName:String,current:{type:Object,default:null},previous:{type:Object,default:null},sex:String},setup(e){const s=e;L(()=>{if(!s.current||!s.previous)return null;const t=parseFloat(s.current.Ratio)||0,a=parseFloat(s.previous.Ratio)||0;return(t-a).toFixed(2)});function n(t){if(!t)return 0;const a=parseFloat(t.replace("%",""));return isNaN(a)?0:a}return(t,a)=>(m(),p("div",z,[o("div",H,[o("h3",null,c(e.symptomName),1)]),e.current?(m(),p("div",J,[o("h5",null,"(本次) "+c(d(_)(e.current.CheckTime||"")),1),C(g,{score:n(e.current.Ratio),emojiSrc:d(b)(n(e.current.Ratio))},null,8,["score","emojiSrc"]),o("h4",null,[a[0]||(a[0]=I(" 嚴重程度 : ")),o("span",{style:B({color:d(D)(n(e.current.Ratio),e.sex)})},c(e.current.Ratio)+"% ("+c(e.current.Serious)+") ",5)])])):x("",!0),e.previous?(m(),p("div",K,[o("h5",null,"(前次) "+c(d(_)(e.previous.CheckTime||"")),1),C(g,{score:n(e.previous.Ratio),emojiSrc:d(b)(n(e.previous.Ratio))},null,8,["score","emojiSrc"]),o("h4",null,[a[1]||(a[1]=I(" 嚴重程度 : ")),o("span",{style:B({color:d(D)(n(e.previous.Ratio),e.sex)})},c(e.previous.Ratio)+"% ("+c(e.previous.Serious)+") ",5)])])):x("",!0)]))}},q={components:{SymptomResult2Compare:F,TitleMenu:j},setup(){const e=P(),s=R({}),n=R([]),t=R(!0),a=async()=>{const f=JSON.parse(localStorage.getItem("userData")||"{}"),{MID:h,Token:k,MAID:S,Mobile:y}=f,l=e.params.detail;try{const i=await O.post("https://23700999.com:8081/HMA/API_BB_GrowthCompare.jsp",{MID:String(h),Token:String(k),MAID:String(S),Mobile:String(y),AID:l});if(i.status===200){s.value=i.data;const T=i.data.ChildScore||[],N=i.data.preChildScore||[],v=T.map(r=>{const u=N.find(w=>w.Type===r.Type);return{Type:r.Type,TypeName:r.TypeName,current:{CheckTime:r.CheckTime,Ratio:r.Ratio,Score:r.Score,Serious:r.Serious},previous:u?{CheckTime:u.CheckTime,Ratio:u.Ratio,Score:u.Score,Serious:u.Serious}:null}});N.forEach(r=>{v.find(u=>u.Type===r.Type)||v.push({Type:r.Type,TypeName:r.TypeName,current:null,previous:{CheckTime:r.CheckTime,Ratio:r.Ratio,Score:r.Score,Serious:r.Serious}})}),n.value=v}}catch(i){console.error("Error fetching data:",i)}finally{t.value=!1}};return E(()=>{a()}),{compareData:s,combinedScores:n,loading:t,backToUser:()=>{window.location.href="/user"}}}},Q={class:"resultWrapDetail"},X={class:"resultTopGroup"},Y={class:"resultInfo"},Z={class:"resultListGroup"},ee={class:"backToUserBtnGroupWeekly"};function oe(e,s,n,t,a,U){var S,y;const f=G,h=j,k=F;return m(),p(A,null,[t.loading?(m(),M(f,{key:0})):x("",!0),o("div",Q,[C(h,{Text:"結果分析",link:"/weekly2",scrollToBottom:!0}),o("div",X,[o("div",Y,[o("h4",null,"姓名 : "+c(((y=(S=t.compareData.ChildInfo)==null?void 0:S[0])==null?void 0:y.Name)||"寶貝"),1)]),s[1]||(s[1]=o("img",{class:"doctorImg",src:W,alt:""},null,-1))]),s[2]||(s[2]=o("h4",{class:"textResultText"},"以下為兒童指標的綜合分析結果",-1)),o("div",Z,[(m(!0),p(A,null,V(t.combinedScores,(l,i)=>{var T;return m(),M(k,{key:i,symptomName:l.TypeName,current:l.current||{},previous:l.previous||{},sex:((T=t.compareData.ChildInfo)==null?void 0:T.Sex)||""},null,8,["symptomName","current","previous","sex"])}),128))]),o("div",ee,[o("button",{class:"backToUserBtnWeekly",onClick:s[0]||(s[0]=(...l)=>t.backToUser&&t.backToUser(...l))}," 返回會員中心 ")])])],64)}const ue=$(q,[["render",oe]]);export{ue as default};
