import{a as k}from"./CCb-kr4I.js";import{_ as G}from"./DlAUqK2U.js";import{r as O,i as S,F as z,t as a,v as i,L as b,U as w,x as t,y as v,N as D,O as N,W as q,Q as W,S as ee,X as se,V as oe,g as re,R as ne,z as E,B as K,P as ae,Y as ie,Z as le,D as ce,K as A,_ as Q,M as de}from"./D70xjexz.js";import{_ as Y,a as ue}from"./DHyqCC35.js";import{_ as me}from"./CkGzrrY6.js";import{a as ye,i as he,_ as ve}from"./VCNQH0xW.js";import{_ as pe}from"./BDSW-ypD.js";import{P as J}from"./B1QmaLQs.js";import{f as X,c as Z,s as $}from"./D7B7LOx5.js";import{_ as fe}from"./C2uo4fds.js";const Ce={name:"QAList",props:{questions:{type:Array,default:()=>[]},CID:{type:String,default:""},currentPage:{type:Number,default:1},pageSize:{type:Number,default:7}},emits:["update-page"],setup(n,{emit:s}){const r=O(null),e=localStorage.getItem("userData"),{MID:y,Token:h,MAID:o,Mobile:u}=e?JSON.parse(e):{},c=O(n.currentPage),p=S(()=>Math.ceil(n.questions.length/n.pageSize)),L=S(()=>(c.value-1)*n.pageSize),I=S(()=>{const l=L.value,m=l+n.pageSize;return n.questions.slice(l,m).map(f=>(f.selectedScore===void 0&&(f.selectedScore=0),f))});function x(l,m){l.selectedScore=String(m)}function V(l,m){return m&&m[l]?m[l]:"未知"}const j=S(()=>I.value.every(l=>l.selectedScore!==void 0));function U(){q(()=>{r.value&&(r.value.scrollTop=0)})}function g(){c.value<p.value&&(c.value++,U())}function F(){c.value>1&&(c.value--,U())}z(()=>c.value,l=>{s("update-page",l)});async function d(){try{const l=n.questions.map(T=>({QueSeq:T.id,QueAns:String(T.selectedScore)})),m={MID:y,Token:h,MAID:o,Mobile:u,CID:n.CID,ChildAns:l};console.log("🚀 送出 API_ChildAnsSave",m);const f=await k.post("https://23700999.com:8081/HMA/API_ChildAnsSave.jsp",m);if(console.log("✅ 收到 API_ChildAnsSave 回應",f.data),f.data.Result!=="OK"){alert("❌ API_ChildAnsSave 失敗："+f.data.Message);return}const{ChildInfo:C,ChildAns:H}=f.data,P=C.find(T=>T.CID===n.CID),M=(P==null?void 0:P.AID)||"",B={MID:y,Token:h,MAID:o,Mobile:u,CID:n.CID,AID:M};console.log("🚀 送出 API_GrowthRecTimes",B);const _=await k.post("https://23700999.com:8081/HMA/API_GrowthRecTimes.jsp",B);if(console.log("✅ 收到 API_GrowthRecTimes 回應",_.data),_.data.Result!=="OK"){alert("❌ API_GrowthRecTimes 失敗："+_.data.Message);return}s("go-times",_.data)}catch(l){console.error("❌ 提交失敗",l)}}return{qaListRef:r,localCurrentPage:c,totalPages:p,pageStartIndex:L,displayedQuestions:I,isPageFilled:j,onClickScore:x,getAnswerText:V,goNextPage:g,goPrevPage:F,submitAllAnswers:d}}},ge={ref:"qaListRef",class:"QAList"},_e={class:"scrollBarTitle"},Se={class:"scoreText"},Ae={class:"scoreBarGroup"},be={class:"numberGroup"},we=["onClick"];function Le(n,s,r,e,y,h){return a(),i("div",ge,[(a(!0),i(b,null,w(e.displayedQuestions,(o,u)=>(a(),i("div",{class:"scoreBarGroupWrap",key:o.id},[t("div",_e,v(e.pageStartIndex+u+1)+". "+v(o.question),1),t("div",Se,v(e.getAnswerText(o.selectedScore,o.answers)),1),t("div",Ae,[t("div",{class:"scoreBar",style:D({width:`${o.selectedScore*33.33}%`})},null,4),t("div",{class:"remainingBar",style:D({width:`${(3-o.selectedScore)*33.33}%`})},null,4),t("div",be,[(a(!0),i(b,null,w(o.answers,(c,p)=>(a(),i("div",{key:p,class:N(["number",{selected:p<=o.selectedScore}]),onClick:L=>e.onClickScore(o,p)},v(p),11,we))),128))])])]))),128))],512)}const _s=G(Ce,[["render",Le],["__scopeId","data-v-72adea7c"]]),Te={name:"TimesSelect",props:{timesQuestions:{type:Array,default:()=>[]},indexOnThisPage:{type:Number,default:0},currentPage:{type:Number,default:1}},setup(n){const s=O(null),r=[{value:"0",label:"0 次"},{value:"1",label:"1 次"},{value:"2",label:"2 次"},{value:"3",label:"3~4 次"},{value:"4",label:">5 次"}];function e(){q(()=>{s.value&&s.value.scrollIntoView({behavior:"smooth",block:"start"})})}return z(()=>n.currentPage,()=>{e()}),{timesListRef:s,scoreOptions:r,scrollToTop:e}}},De={ref:"timesListRef",class:"tagTimesList"},Ie={class:"selectWrapper"},Pe=["onUpdate:modelValue"],Re=["value"];function ke(n,s,r,e,y,h){return a(),i("div",De,[(a(!0),i(b,null,w(r.timesQuestions,(o,u)=>(a(),i("div",{class:"timesList",key:o.id},[t("h4",null,v(r.indexOnThisPage+u+1)+". "+v(o.question),1),t("div",Ie,[W(t("select",{"onUpdate:modelValue":c=>o.selectScore=c,style:D({color:o.selectScore?"#74bc1f":"#ccc"})},[s[0]||(s[0]=t("option",{value:"",disabled:"",hidden:""},"請選擇次數",-1)),(a(!0),i(b,null,w(e.scoreOptions,c=>(a(),i("option",{key:c.value,value:c.value},v(c.label),9,Re))),128))],12,Pe),[[ee,o.selectScore]])])]))),128))],512)}const Ss=G(Te,[["render",ke],["__scopeId","data-v-a1558642"]]),xe={name:"BabyIntro"},Me={class:"ANSGroup"};function Be(n,s,r,e,y,h){return a(),i("div",Me,s[0]||(s[0]=[se('<h4>寶貝紀錄量表</h4><div class="desCard"><div class="slogan"> 寶貝紀錄幫助醫師了解孩子的成長以利做最有效率的調整， 涵蓋專注力、情緒、動作與語言發展等指標 </div><ul><li>掌握孩子的成長狀況</li><li>早期發現問題並提供支持</li><li>記錄每個階段的點滴變化</li></ul></div><div class="stepCard"><div class="item"><div class="icon"><img src="'+Y+'"></div><div class="content"><hgroup><sub>Step 1</sub><h3>六大指標</h3></hgroup><div class="text"> 請先選擇以下六個指標，以便我們更精確地了解您的需求 </div></div></div><div class="item"><div class="icon"><img src="'+me+'"></div><div class="content"><hgroup><sub>Step 2</sub><h3>症狀評估</h3></hgroup><div class="text">依當下感覺逐題評估，填寫每項症狀的嚴重程度</div></div></div><div class="item"><div class="icon"><img src="'+ue+'"></div><div class="content"><hgroup><sub>Step 3</sub><h3>頻率記錄</h3></hgroup><div class="text">針對困擾您的症狀，填寫每週發生的頻率</div></div></div><div class="item"><div class="icon"><img src="'+Y+'"></div><div class="content"><hgroup><sub>Step 4</sub><h3>重點標記</h3></hgroup><div class="text">挑選 3-10項 您目前最困擾的症狀</div></div></div></div>',3)]))}const As=G(xe,[["render",Be]]),Ne="data:image/svg+xml,%3csvg%20width='18'%20height='19'%20viewBox='0%200%2018%2019'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M7.75%207.48047C7.75%207.39759%207.71708%207.3181%207.65847%207.2595C7.59987%207.20089%207.52038%207.16797%207.4375%207.16797C7.35462%207.16797%207.27513%207.20089%207.21653%207.2595C7.15792%207.3181%207.125%207.39759%207.125%207.48047V14.3555C7.125%2014.4383%207.15792%2014.5178%207.21653%2014.5764C7.27513%2014.635%207.35462%2014.668%207.4375%2014.668C7.52038%2014.668%207.59987%2014.635%207.65847%2014.5764C7.71708%2014.5178%207.75%2014.4383%207.75%2014.3555V7.48047ZM10.5625%207.16797C10.6454%207.16797%2010.7249%207.20089%2010.7835%207.2595C10.8421%207.3181%2010.875%207.39759%2010.875%207.48047V14.3555C10.875%2014.4383%2010.8421%2014.5178%2010.7835%2014.5764C10.7249%2014.635%2010.6454%2014.668%2010.5625%2014.668C10.4796%2014.668%2010.4001%2014.635%2010.3415%2014.5764C10.2829%2014.5178%2010.25%2014.4383%2010.25%2014.3555V7.48047C10.25%207.39759%2010.2829%207.3181%2010.3415%207.2595C10.4001%207.20089%2010.4796%207.16797%2010.5625%207.16797ZM11.8125%203.73047V4.04297H16.8125C16.8954%204.04297%2016.9749%204.07589%2017.0335%204.1345C17.0921%204.1931%2017.125%204.27259%2017.125%204.35547C17.125%204.43835%2017.0921%204.51783%2017.0335%204.57644C16.9749%204.63504%2016.8954%204.66797%2016.8125%204.66797H15.2231L14.2056%2015.8598C14.1421%2016.5589%2013.8195%2017.209%2013.3012%2017.6823C12.7829%2018.1556%2012.1063%2018.418%2011.4044%2018.418H6.59562C5.89369%2018.418%205.2171%2018.1556%204.69878%2017.6823C4.18045%2017.209%203.85786%2016.5589%203.79437%2015.8598L2.77688%204.66797H1.1875C1.10462%204.66797%201.02513%204.63504%200.966529%204.57644C0.907924%204.51783%200.875%204.43835%200.875%204.35547C0.875%204.27259%200.907924%204.1931%200.966529%204.1345C1.02513%204.07589%201.10462%204.04297%201.1875%204.04297H6.1875V3.73047C6.1875%202.98455%206.48382%202.26918%207.01126%201.74173C7.53871%201.21428%208.25408%200.917969%209%200.917969C9.74592%200.917969%2010.4613%201.21428%2010.9887%201.74173C11.5162%202.26918%2011.8125%202.98455%2011.8125%203.73047ZM6.8125%203.73047V4.04297H11.1875V3.73047C11.1875%203.15031%2010.957%202.59391%2010.5468%202.18367C10.1366%201.77344%209.58016%201.54297%209%201.54297C8.41984%201.54297%207.86344%201.77344%207.4532%202.18367C7.04297%202.59391%206.8125%203.15031%206.8125%203.73047ZM3.405%204.66797L4.4175%2015.8036C4.46692%2016.347%204.71768%2016.8524%205.12055%2017.2205C5.52342%2017.5885%206.04931%2017.7927%206.595%2017.793H11.4038C11.9497%2017.793%2012.4759%2017.589%2012.879%2017.2209C13.2821%2016.8528%2013.5331%2016.3473%2013.5825%2015.8036L14.5956%204.66797H3.405Z'%20fill='%23666666'/%3e%3c/svg%3e",Ge="data:image/svg+xml,%3csvg%20width='16'%20height='21'%20viewBox='0%200%2016%2021'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M13.438%2020.105H2.56201C1.89897%2020.105%201.26309%2019.8416%200.794245%2019.3727C0.325404%2018.9039%200.0620117%2018.268%200.0620117%2017.605V16.778C0.0620117%2012.809%203.62301%209.57796%208.00001%209.57796C12.377%209.57796%2015.938%2012.807%2015.938%2016.778V17.605C15.938%2018.268%2015.6746%2018.9039%2015.2058%2019.3727C14.7369%2019.8416%2014.1011%2020.105%2013.438%2020.105ZM8.00001%2010.58C4.17401%2010.58%201.06201%2013.36%201.06201%2016.78V17.607C1.06201%2018.0048%201.22005%2018.3863%201.50135%2018.6676C1.78266%2018.9489%202.16419%2019.107%202.56201%2019.107H13.438C13.8358%2019.107%2014.2174%2018.9489%2014.4987%2018.6676C14.78%2018.3863%2014.938%2018.0048%2014.938%2017.607V16.778C14.938%2013.36%2011.826%2010.58%208.00001%2010.58ZM8.00001%208.07896C7.22388%208.07916%206.46511%207.84919%205.81968%207.41813C5.17425%206.98708%204.67115%206.3743%204.374%205.6573C4.07684%204.9403%203.99899%204.15128%204.15029%203.39004C4.30158%202.62879%204.67523%201.92951%205.22397%201.38063C5.77271%200.831744%206.4719%200.45792%207.23311%200.306431C7.99432%200.154941%208.78336%200.232591%209.50043%200.52956C10.2175%200.826529%2010.8304%201.32948%2011.2616%201.9748C11.6928%202.62012%2011.923%203.37882%2011.923%204.15496C11.9222%205.19525%2011.5087%206.19272%2010.7732%206.92841C10.0377%207.66411%209.0403%208.0779%208.00001%208.07896ZM8.00001%201.23196C7.42161%201.23176%206.85615%201.40311%206.37515%201.72432C5.89415%202.04554%205.51921%202.5022%205.29778%203.03653C5.07634%203.57086%205.01836%204.15886%205.13115%204.72616C5.24394%205.29345%205.52244%205.81455%205.93143%206.22354C6.34042%206.63253%206.86152%206.91103%207.42881%207.02382C7.99611%207.13661%208.58411%207.07863%209.11844%206.85719C9.65277%206.63576%2010.1094%206.26082%2010.4306%205.77982C10.7519%205.29882%2010.9232%204.73336%2010.923%204.15496C10.9222%203.37997%2010.614%202.63696%2010.066%202.08896C9.51801%201.54097%208.775%201.23275%208.00001%201.23196Z'%20fill='%2374BC1F'/%3e%3c/svg%3e",Fe=""+new URL("babyRecordS.CHGkX81p.svg",import.meta.url).href,He="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAZCAYAAAArK+5dAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAM5SURBVHgB5VXNThpRFL7n3hnQpuJ01yZVxieQrrtQwK6FJwCfQBq1bdIFdNGkFozwBMITgKsurIKLroUncMA23YKtqeDMPb0HHAUEtenSk0wyc3++79zvfucMYw8qEl+emmv7z/z/sgfusyhRNAx9yhdDBhFExjhgScJFaSv8s/5fBD3g6R2FaQDIAnDhl1IanLOqlMy0T09zwjc57RLRejHl295aaqy4GHwsuJJDm5ouIkIus1QPpsMneZROXZ2g+jnYKGTCjQ/e6Sf+iYmJqz2az5cEgMib8mzsVoIuuO7d8U7yeOaVVRmXxGbouHbWwdb6nv8oUTYMRfqac0xQArcSCN2T5ALzH18ej9V4fW9mmUCzQavJhExpti9J4/3gIwkoe2BgDi8cAN+fTQLn8Wyw2aTvTOhklwEEiHB47Q0CXfcsU/ajgJWL/Bwg1X1HZm4cPF9w58gEuuOLDe8ZcBG5gC7WkU6KC93SoGMgiIC0WQB416IWMswrlxTelU3TkTIplcWAYwkYNlGKlP2rFc1GeycbIFj7OhtT2UUkYnPgiIJV0eY1uuyN/Zm4REAicOe7REwuS4cFuusBFtXxsumlRo6+tWsmiKfD9eDwEUkG7yNhjRrnKutPQaumPnNXKpRNQzjsyB3j1/oy093YDyIlN9vnTvz9t7mBFpEOfT9sg37DZeQqJYt1nbgLVp5dRRviasS0RWvOdYhbNJ3zzqHm8awyqWwsnPxm6EetH7iXudwmBzLAChXiwAnSwUZO0yCqJvM6Pp53x8mu9FDFAtJmCGheT3M4cw2dBaW/YQuIuuADBBRKTwuAl8gN7hhdvnp2aI6B3CUXjSpAlBDxTPBEt/D64kYdpEPWYVeyy7vg1OgQS0R0Jaea678rKk6uxB5FrLERoQlYsW1RVJUZJOlIX13KbUW32MtWWNSnXHDqWyr7+Cisse367cHcvOPIPPJOxG3Hw3VwCV4UXgV+0WFtOKu75riTgIKKyHawqHSvatzJSuQviICBqABz4gwhQuDt339amuYtAjDrQrRW+knu9Ucjq6Jki+rfEFAghqr2CiAv9LdyaoDqR2Td1iTvDJKt/3IfRvwFOwqRJQhfTwIAAAAASUVORK5CYII=",Oe="data:image/svg+xml,%3csvg%20width='18'%20height='17'%20viewBox='0%200%2018%2017'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M1.56031%205.06977L1.56029%205.06981C0.273069%207.72745%200.497914%2010.8109%202.15283%2013.2982C2.64636%2014.036%203.64161%2015.0312%204.3645%2015.5148C6.04429%2016.6264%207.9875%2017.1058%209.93023%2016.8856C13.1116%2016.5234%2015.8578%2014.2863%2016.8513%2011.2519C18.0211%207.66904%2016.6509%203.79735%2013.4786%201.71665C12.4417%201.04171%2011.1639%200.591145%209.87125%200.449147C6.43571%200.0723148%203.07277%201.94205%201.56031%205.06977ZM7.78146%2016.2086L7.78116%2016.2085C5.43597%2015.8451%203.34057%2014.3368%202.23548%2012.1963C1.2651%2010.3252%201.09579%208.2342%201.7627%206.23347C2.37515%204.38131%203.72905%202.8036%205.47125%201.90262C8.26348%200.454259%2011.5342%200.822923%2013.9674%202.86303L13.9675%202.86315C14.9838%203.71999%2015.8097%204.9492%2016.2427%206.24828L16.2427%206.24835C17.4473%209.87695%2015.8293%2013.7745%2012.4053%2015.5064L12.4052%2015.5065C11.0007%2016.2137%209.40283%2016.4523%207.78146%2016.2086Z'%20fill='%23EC4F4F'%20stroke='%23EC4F4F'%20stroke-width='0.133333'/%3e%3cpath%20d='M9.2518%2013.4586L9.39489%2013.3155L9.39489%2011.1148L9.39489%208.91418L11.6054%208.91418L13.8209%208.91418L13.9245%208.8007C14.0626%208.65267%2014.0676%208.40596%2013.9343%208.27274C13.8406%208.17899%2013.7715%208.17406%2011.6153%208.17406L9.39489%208.17406L9.39489%205.99808C9.39489%204.44382%209.38009%203.7925%209.33568%203.71849C9.17286%203.40764%208.82746%203.40764%208.66464%203.71849C8.62023%203.7925%208.60543%204.44382%208.60543%205.99808L8.60543%208.17406L6.38504%208.17406C4.22881%208.17406%204.15973%208.17899%204.06598%208.27274C3.92782%208.4109%203.93769%208.67241%204.08078%208.80563C4.19427%208.91418%204.20414%208.91418%206.39985%208.91418L8.60543%208.91418L8.60543%2011.1148L8.60542%2013.3155L8.74852%2013.4586C8.82746%2013.5375%208.94095%2013.6017%209.00016%2013.6017C9.05937%2013.6017%209.17286%2013.5375%209.2518%2013.4586Z'%20fill='%23EC4F4F'/%3e%3c/svg%3e",Qe={name:"BabyCreateForm",components:{VueDatePicker:oe},props:{babyInfos:{type:Array,default:()=>[]},existingOffset:{type:Number,default:0}},emits:["addBaby","removeBaby"],setup(n,{emit:s}){function r(){s("addBaby")}function e(h){s("removeBaby",h)}function y(h){if(!h)return"";const o=h.getFullYear(),u=String(h.getMonth()+1).padStart(2,"0"),c=String(h.getDate()).padStart(2,"0");return`${o}-${u}-${c}`}return{addOneMoreBaby:r,remove:e,formatDate:y}}},Ve={class:"babyRecordGroup"},je={class:"babyInfoGroup"},Ue={class:"babyInfoOption"},Ee=["onClick"],Ke={class:"babyRecordInfoInput"},We=["onUpdate:modelValue"],Je={class:"babyRecordInfoInput"},Ze=["onUpdate:modelValue"],$e={class:"babyRecordInfoInput"};function ze(n,s,r,e,y,h){const o=re("VueDatePicker");return a(),i("div",Ve,[t("div",je,[s[5]||(s[5]=t("h4",null,"新增寶貝基本資料",-1)),(a(!0),i(b,null,w(r.babyInfos,(u,c)=>(a(),i("div",{class:"babyInfo",key:c},[t("div",Ue,[t("small",null,"#"+v(r.existingOffset+c+1),1),t("img",{src:Ne,alt:"刪除",onClick:p=>e.remove(c)},null,8,Ee)]),t("div",Ke,[s[1]||(s[1]=t("img",{class:"icon1",src:Ge,alt:"姓名"},null,-1)),W(t("input",{type:"text","onUpdate:modelValue":p=>u.name=p,placeholder:"請輸入寶貝姓名"},null,8,We),[[ne,u.name]])]),t("div",Je,[s[3]||(s[3]=t("img",{class:"icon1",src:Fe,alt:"性別"},null,-1)),W(t("select",{"onUpdate:modelValue":p=>u.gender=p,required:""},s[2]||(s[2]=[t("option",{value:"",disabled:"",hidden:""},"請選擇性別",-1),t("option",{value:"male"},"男性",-1),t("option",{value:"female"},"女性",-1)]),8,Ze),[[ee,u.gender]])]),t("div",$e,[s[4]||(s[4]=t("img",{class:"icon1",src:He,alt:"生日"},null,-1)),E(o,{modelValue:u.birthDate,"onUpdate:modelValue":p=>u.birthDate=p,format:e.formatDate,locale:"zh-TW","enable-time-picker":!1,"cancel-text":"取消","select-text":"確定","max-date":new Date,placeholder:"請選擇寶貝的生日","no-today":"",teleport:"body",class:"date-picker no-icon"},null,8,["modelValue","onUpdate:modelValue","format","max-date"])])]))),128))]),t("div",{class:"babyInfoAdd",onClick:s[0]||(s[0]=(...u)=>e.addOneMoreBaby&&e.addOneMoreBaby(...u))},s[6]||(s[6]=[K(" 繼續新增寶貝 "),t("img",{src:Oe,alt:"新增"},null,-1)]))])}const bs=G(Qe,[["render",ze]]),Ye="data:image/svg+xml,%3csvg%20width='13'%20height='13'%20viewBox='0%200%2013%2013'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M1.33317%209.3346L0.666504%2012.0013L3.33317%2011.3346L11.0572%203.6106C11.3071%203.36056%2011.4476%203.02148%2011.4476%202.66793C11.4476%202.31438%2011.3071%201.9753%2011.0572%201.72526L10.9425%201.6106C10.6925%201.36064%2010.3534%201.22021%209.99984%201.22021C9.64628%201.22021%209.30721%201.36064%209.05717%201.6106L1.33317%209.3346ZM7.99984%202.66793L9.99984%204.66793L7.99984%202.66793ZM6.6665%2012.0013H11.9998H6.6665Z'%20fill='white'/%3e%3cpath%20d='M7.99984%202.66793L9.99984%204.66793M6.6665%2012.0013H11.9998M1.33317%209.3346L0.666504%2012.0013L3.33317%2011.3346L11.0572%203.6106C11.3071%203.36056%2011.4476%203.02148%2011.4476%202.66793C11.4476%202.31438%2011.3071%201.9753%2011.0572%201.72526L10.9425%201.6106C10.6925%201.36064%2010.3534%201.22021%209.99984%201.22021C9.64628%201.22021%209.30721%201.36064%209.05717%201.6106L1.33317%209.3346Z'%20stroke='%23666666'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",Xe={name:"BabyProgress",props:{babyList:{type:Array,default:()=>[]},selectedChildID:{type:String,default:""}},emits:["selectChild","editChild"],setup(n,{emit:s}){function r(y){s("selectChild",y)}function e(y){s("editChild",y)}return{select:r,onEditChild:e}}},qe={class:"babyProgressGroup"},et=["onClick"],tt={class:"babyProgressTitle"},st={class:"babyProgressTitleLeft"},ot=["onClick"],rt={key:0,class:"babyProgressDiffDay"},nt={key:1},at={class:"babyProgressText"};function it(n,s,r,e,y,h){return a(),i("div",qe,[(a(!0),i(b,null,w(r.babyList,o=>(a(),i("div",{key:o.CID,class:N([{active:o.CID===r.selectedChildID},"babyProgressCard"]),onClick:u=>e.select(o.CID)},[t("div",tt,[t("div",st,[t("div",{class:N(["babyProgressState",{babyProgressStateActive:o.CID===r.selectedChildID}])},null,2),t("h4",null,v(o.Name),1)]),t("img",{src:Ye,alt:"編輯",style:{cursor:"pointer"},onClick:ae(u=>e.onEditChild(o),["stop"])},null,8,ot)]),o.diffDaysFromToday&&o.diffDaysFromToday>0?(a(),i("div",rt,v(o.diffDaysFromToday)+"天 後再檢測 ",1)):(a(),i("div",nt,[t("div",at,[s[0]||(s[0]=t("h5",null,"問卷進度",-1)),t("h6",null,v(o.ratioComplete)+"%",1)]),s[1]||(s[1]=t("div",{class:"babyProgress"},null,-1))]))],10,et))),128))])}const ws=G(Xe,[["render",it]]),lt="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='12'%20height='12'%20viewBox='0%200%2012%2012'%20fill='none'%3e%3cpath%20d='M10%203.5L5%208.5L2.5%206'%20stroke='%2374BC1F'%20stroke-width='1.25'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",ct=""+new URL("babyTypePlus.BiyfkgQi.svg",import.meta.url).href,dt={name:"IndicatorSelect",props:{ansTypes:{type:Object,default:()=>({})},curChildData:{type:Object,default:null}},setup(n){function s(e){var y;return(y=n.curChildData)==null?void 0:y.selectedAnsTypes.has(e)}function r(e){var h;const y=(h=n.curChildData)==null?void 0:h.selectedAnsTypes;y&&(y.has(e)?y.delete(e):y.add(e))}return{isTypeSelected:s,toggleSelect:r,babyTypeCheck:lt,babyTypePlus:ct}}},ut={class:"babyAnsTypeGroup"},mt={key:0,class:"babyAnsTypeInfoGroup"},yt=["onClick"],ht=["src"],vt={key:1};function pt(n,s,r,e,y,h){return a(),i("div",ut,[s[0]||(s[0]=t("p",null,"請挑選幾個指標，讓我們更了解您的需求。",-1)),r.ansTypes&&Object.keys(r.ansTypes).length>0?(a(),i("div",mt,[(a(!0),i(b,null,w(r.ansTypes,(o,u)=>(a(),i("div",{key:u,class:N(["babyAnsTypeCard",{babyAnsTypeCardSelected:e.isTypeSelected(u)}]),onClick:c=>e.toggleSelect(u)},[t("img",{src:e.isTypeSelected(u)?e.babyTypeCheck:e.babyTypePlus,alt:"icon"},null,8,ht),t("h3",null,v(u),1),t("p",null,v(o),1)],10,yt))),128))])):(a(),i("p",vt))])}const Ls=G(dt,[["render",pt]]),ft=ie("babyStore",()=>{const n=O([]),s=O(""),r=le({}),e=localStorage.getItem("babyStore_childRecords");if(e)try{const d=JSON.parse(e);Object.keys(d).forEach(l=>{const m=d[l];Array.isArray(m.selectedAnsTypes)&&(m.selectedAnsTypes=new Set(m.selectedAnsTypes)),Array.isArray(m.selectedPriority)&&(m.selectedPriority=new Set(m.selectedPriority))}),Object.assign(r,d)}catch(d){console.error("LocalStorage parse error:",d)}let y,h,o,u;const c=localStorage.getItem("userData");if(c)try{({MID:y,Token:h,MAID:o,Mobile:u}=JSON.parse(c))}catch(d){console.error("parse userData fail:",d)}const p={注意力指標:"1",好動指標:"2",情緒指標:"3",粗大動作指標:"4",精細動作指標:"5",語言認知指標:"6"};async function L(){if(!(!y||!h||!o||!u))try{const d={MID:y,MAID:o,Token:h,Mobile:u},{data:l}=await k.post("https://23700999.com:8081/HMA/API_Growth.jsp",d);l.Result==="OK"?(n.value=l.ChildInfo||[],n.value.forEach(m=>{r[m.CID]||(r[m.CID]={isFetched:!1,flowStage:"",version:"tracking",growthRec:null,selectedAnsTypes:new Set,childQuestions:[],childTimesQues:[],selectedPriority:new Set,reportData:null,AID:null})}),n.value.length>0&&(s.value=n.value[0].CID)):console.warn("API_Growth fail:",l.Message)}catch(d){console.error("fetchGrowth error:",d)}}async function I(d){var l,m;if(d)try{const f={MID:y,MAID:o,Token:h,Mobile:u,CID:d},{data:C}=await k.post("https://23700999.com:8081/HMA/API_GrowthFirst.jsp",f);C.Result==="OK"?(r[d].reportData={Data:((l=C.Recent)==null?void 0:l.CurData)||null,PreData:((m=C.Recent)==null?void 0:m.PreData)||null,History:C.ChildHistoryScore||[]},r[d].isFetched=!0):console.warn("API_GrowthFirst fail:",C.Message)}catch(f){console.error(f)}}async function x(d,l,m=""){if(!(!d||!l))try{const f={MID:y,MAID:o,Token:h,Mobile:u,CID:d,AID:l,preAID:m},{data:C}=await k.post("https://23700999.com:8081/HMA/API_GrowthCompare.jsp",f);C.Result==="OK"?r[d].reportData={Data:C.ChildScore||null,PreData:C.preChildScore||null,History:C.ChildHistoryScore||[]}:console.warn("API_GrowthCompare fail:",C.Message)}catch(f){console.error("fetchGrowthCompare error:",f)}}async function V(d){if(d)try{r[d]||(r[d]={isFetched:!1,flowStage:"",version:"tracking",growthRec:null,selectedAnsTypes:new Set,childQuestions:[],childTimesQues:[],selectedPriority:new Set,reportData:null,AID:null});const l={MID:y,MAID:o,Token:h,Mobile:u,CID:d},{data:m}=await k.post("https://23700999.com:8081/HMA/API_GrowthRec.jsp",l);m.Result==="OK"?(r[d].isFetched=!0,r[d].growthRec=m):console.warn("API_GrowthRec fail:",m.Message)}catch(l){console.error(l)}}function j(d,l){if(!r[d])return;const m=r[d].selectedAnsTypes;m.has(l)?m.delete(l):m.add(l)}async function U(d){var M,B;if(!d)return;const l=r[d],m=((B=(M=l.growthRec)==null?void 0:M.CIDChildAnsLast)==null?void 0:B.AID)||"",f=m?"Second":"First",C=l.version==="tracking"?"Short":"Complete",H=[...l.selectedAnsTypes].map(_=>p[_]||"").filter(Boolean).join(","),P=H?`,${H},`:"";try{const _={MID:y,MAID:o,Token:h,Mobile:u,CID:d,AID:m,FirstSecond:f,ShortComplete:C,ALLType:P},{data:T}=await k.post("https://23700999.com:8081/HMA/API_GrowthRec2.jsp",_);T.Result==="OK"&&T.ChildQues?(l.childQuestions=T.ChildQues.map(R=>({id:R.QueSeq,question:R.Question,selectScore:R.QAns??"",answers:[R.AnswerName_0,R.AnswerName_1,R.AnswerName_2,R.AnswerName_3],Type:R.Type,TypeName:R.TypeName})),l.flowStage="qa"):console.warn("API_GrowthRec2 fail:",T.Message)}catch(_){console.error(_)}}async function g(d,l){if(d)try{const m={MID:y,MAID:o,Token:h,Mobile:u,CID:d,AID:l},{data:f}=await k.post("https://23700999.com:8081/HMA/API_GrowthRecTimes.jsp",m);f.Result==="OK"&&f.ChildAns?(r[d]||(r[d]={isFetched:!1,flowStage:"",version:"tracking",growthRec:null,selectedAnsTypes:new Set,childQuestions:[],childTimesQues:[],selectedPriority:new Set,reportData:null,AID:null}),r[d].childTimesQues=f.ChildAns.map(C=>({id:C.QueSeq,question:C.Question,selectScore:"",answers:[C.AnswerName_0||"未提供",C.AnswerName_1||"未提供",C.AnswerName_2||"未提供",C.AnswerName_3||"未提供"],Type:C.Type,TypeName:C.TypeName})),r[d].flowStage="times"):console.warn("API_GrowthRecTimes fail:",f.Message)}catch(m){console.error(m)}}async function F(d,l,m,f){let C,H,P,M;const B=localStorage.getItem("userData");if(B){const _=JSON.parse(B);C=_.MID,H=_.Token,P=_.MAID,M=_.Mobile}if(!C||!H||!P||!M)return console.error("尚未登入，無法修改寶貝資料"),{success:!1,message:"尚未登入"};try{const _={MID:C,MAID:P,Token:H,Mobile:M,CID:d,Name:l,Sex:m,BirthDay:f},T=await k.post("https://23700999.com:8081/HMA/API_ModifyChild.jsp",_);return T.data.Result==="OK"?(await L(),{success:!0}):{success:!1,message:T.data.Message}}catch(_){return console.error("modifyChild error:",_),{success:!1,message:"系統或網路錯誤"}}}return z(()=>r,d=>{const l={};Object.keys(d).forEach(m=>{const f={...d[m]};f.selectedAnsTypes=Array.from(f.selectedAnsTypes||[]),f.selectedPriority=Array.from(f.selectedPriority||[]),l[m]=f}),localStorage.setItem("babyStore_childRecords",JSON.stringify(l))},{deep:!0}),{babyAPIData:n,selectedChildID:s,childRecords:r,fetchGrowth:L,fetchGrowthFirst:I,fetchGrowthCompare:x,fetchGrowthRecord:V,toggleAnsType:j,fetchChildQuestions:U,fetchGrowthRecTimes:g,modifyChild:F}}),Ct={name:"SolvePrioritySelect",props:{symptoms:{type:Array,default:()=>[]}},emits:["selection-changed"],setup(n,{emit:s}){const r=ft(),e=S(()=>r.childRecords[r.selectedChildID]),y=O([]);return ce(()=>{var o;(o=e.value)!=null&&o.childTimesQues&&(y.value=e.value.childTimesQues.map(u=>({...u,selected:e.value.selectedPriority.has(u.id)})))}),{questions:y,toggleSelect:o=>{const u=y.value.filter(c=>c.selected).length;if(!o.selected&&u>=10){alert("已選擇10個最想解決的症狀了");return}o.selected=!o.selected,o.selected?e.value.selectedPriority.add(o.id):e.value.selectedPriority.delete(o.id),s("selection-changed",e.value.selectedPriority.size)},activeIcon:ye,inactiveIcon:he}}},gt={class:"solvePriorityBox"},_t=["onClick"],St=["src"];function At(n,s,r,e,y,h){return a(),i("div",gt,[(a(!0),i(b,null,w(e.questions,o=>(a(),i("div",{class:N(["priorityItem",{active:o.selected}]),key:o.id,onClick:u=>e.toggleSelect(o)},[t("img",{src:o.selected?e.activeIcon:e.inactiveIcon,alt:""},null,8,St),t("h3",null,v(o.question),1)],10,_t))),128))])}const Ts=G(Ct,[["render",At],["__scopeId","data-v-8fb89efb"]]),bt={class:"resultList"},wt={class:"titleGroup"},Lt={key:0,class:"pGroup"},Tt={key:0,class:"upIcon"},Dt={key:1,class:"downIcon"},It={key:2,class:"titleScoreUp"},Pt={key:3,class:"titleScoreDown"},Rt={key:0,class:"nextGroup"},te={__name:"SymptomResultBaby",props:{symptomName:String,symptomDifference:String,symptomSolve:Array,symptomRatio:String,symptomPreRatio:String,symptomDesc:String,symptomPreDesc:String,theLatestHistory:Object,theLatestHistoryPre:Object,sex:String},setup(n){const s=n,r=S(()=>s.symptomDifference?Number(s.symptomDifference.replace("%","")):0);function e(y){if(!y)return 0;const h=parseFloat(y.replace("%",""));return isNaN(h)?0:h}return(y,h)=>{var o;return a(),i("div",bt,[t("div",wt,[t("h3",null,v(n.symptomName),1),(o=n.theLatestHistoryPre)!=null&&o.CheckTime?(a(),i("div",Lt,[r.value>0?(a(),i("p",Tt,"▲")):r.value<0?(a(),i("p",Dt,"▼")):A("",!0),r.value>0?(a(),i("div",It,v(n.symptomDifference),1)):r.value<0?(a(),i("div",Pt,v(n.symptomDifference),1)):A("",!0)])):A("",!0)]),t("h5",null,"(本次)"+v(Q(X)(n.theLatestHistory.CheckTime||"")),1),E(J,{score:e(n.symptomRatio),emojiSrc:Q(Z)(e(n.symptomRatio))},null,8,["score","emojiSrc"]),t("h4",null,[h[0]||(h[0]=K(" 嚴重程度 : ")),t("span",{style:D({color:Q($)(e(n.symptomRatio),n.sex)})},v(n.symptomRatio)+"("+v(n.symptomDesc)+") ",5)]),n.theLatestHistoryPre&&n.theLatestHistoryPre.CheckTime?(a(),i("div",Rt,[t("h5",null,"(前次)"+v(Q(X)(n.theLatestHistoryPre.CheckTime)),1),E(J,{score:e(n.symptomPreRatio),emojiSrc:Q(Z)(e(n.symptomPreRatio))},null,8,["score","emojiSrc"]),t("h4",null,[h[1]||(h[1]=K(" 嚴重程度 : ")),t("span",{style:D({color:Q($)(e(n.symptomPreRatio),n.sex)})},v(n.symptomPreRatio)+"("+v(n.symptomPreDesc)+") ",5)])])):A("",!0)])}}},kt={name:"BabyReportResult",components:{SymptomResultBaby:te,ProgressBar2:J},props:{reportData:{type:Object,default:()=>({})}},setup(n){const s=S(()=>{var g;return((g=n.reportData)==null?void 0:g.Data)||[]}),r=S(()=>{var g;return((g=n.reportData)==null?void 0:g.PreData)||[]}),e=S(()=>s.value[0]||null),y=S(()=>r.value[0]||null),h=S(()=>[]),o=S(()=>[]),u=S(()=>[]),c=S(()=>h.value.length>0||o.value.length>0||u.value.length>0),p=S(()=>{var g;return((g=n.reportData)==null?void 0:g.History)||[]}),L=g=>{const F=s.value[g],d=r.value[g];if(!F||!d)return"0分";const l=Number(F.Score)-Number(d.Score);return l===0?"0分":(l>0?"+":"")+l+"分"},I=O("Serious");function x(g){I.value=g}function V(){console.log("返回會員中心")}function j(g){console.log("查看檢測紀錄：",g)}return{latestChildScore:s,previousChildScore:r,latestScore:e,previousScore:y,historyList:p,seriousList:h,middleList:o,lightList:u,selectedType:I,hasSeverityData:c,changeSymptomLavel:x,computeDifference:L,goHome:V,goDetail:j,scoreColorFn:$,computedEmoji2:Z,removeTime:g=>typeof g!="string"?(console.error("Invalid timestamp:",g),""):g.split(" ")[0]||""}}},xt={class:"resultWrap"},Mt={class:"resultTopGroup"},Bt={class:"resultInfo"},Nt={key:0},Gt={class:"subText"},Ft={class:"severity"},Ht={class:"imgGroup"},Ot=["src"],Qt={class:"scoreText"},Vt={class:"severityText"},jt={key:1,class:"subText nextSunText"},Ut={key:2,class:"severity"},Et={class:"imgGroup"},Kt=["src"],Wt={class:"scoreText"},Jt={class:"severityText"},Zt={class:"resultListGroup"},$t={key:0,class:"textResultText"},zt={key:1,class:"symptomWrap"},Yt={class:"symptomGroup"},Xt={class:"symptomButtonGroup"},qt={key:0,class:"symptomMenuList symptomSeriousList"},es={key:1,class:"symptomMenuList symptomMeddleList"},ts={key:2,class:"symptomMenuList symptomLightList"},ss={key:2,class:"textResultText"},os={key:3,class:"detectionWrap"},rs=["onClick"],ns={class:"detectionDate"},as={class:"detectionGroup"},is={class:"scroeTotal"},ls={class:"seriousDegreeGroup"};function cs(n,s,r,e,y,h){const o=pe,u=te;return a(),i("div",xt,[t("div",Mt,[t("div",Bt,[e.latestScore?(a(),i("div",Nt,[t("h5",Gt,"(本次)"+v(e.removeTime(e.latestScore.CheckTime)),1),t("div",Ft,[t("div",Ht,[t("img",{src:e.computedEmoji2(e.latestScore.ALL_Score),alt:""},null,8,Ot),t("div",Qt,[t("div",{class:"score",style:D({color:e.scoreColorFn(e.latestScore.ALL_Score)})},v(e.latestScore.ALL_Score),5),s[3]||(s[3]=t("h5",null,"分",-1))])]),E(o,{score:Number(e.latestScore.ALL_Ratio),colorProp:e.scoreColorFn(e.latestScore.ALL_Score)},null,8,["score","colorProp"]),t("h6",Vt,[s[4]||(s[4]=K(" 嚴重程度 : ")),t("span",{style:D({color:e.scoreColorFn(e.latestScore.ALL_Score)})},v(e.latestScore.ALL_Ratio)+"% ("+v(e.latestScore.ALL_Serious)+") ",5)])])])):A("",!0),e.previousScore?(a(),i("h5",jt," (前次)"+v(e.removeTime(e.previousScore.CheckTime)),1)):A("",!0),e.previousScore?(a(),i("div",Ut,[t("div",Et,[t("img",{src:e.computedEmoji2(e.previousScore.ALL_Score),alt:""},null,8,Kt),t("div",Wt,[t("div",{class:"score",style:D({color:e.scoreColorFn(e.previousScore.ALL_Score)})},v(e.previousScore.ALL_Score),5),s[5]||(s[5]=t("h5",null,"分",-1))])]),E(o,{score:Number(e.previousScore.ALL_Ratio),colorProp:e.scoreColorFn(e.previousScore.ALL_Score)},null,8,["score","colorProp"]),t("h6",Jt,[s[6]||(s[6]=K(" 嚴重程度 : ")),t("span",{style:D({color:e.scoreColorFn(e.previousScore.ALL_Score)})},v(e.previousScore.ALL_Ratio)+"% ("+v(e.previousScore.ALL_Serious)+") ",5)])])):A("",!0)]),s[7]||(s[7]=t("img",{class:"doctorImg",src:fe,alt:""},null,-1))]),s[11]||(s[11]=t("h4",{class:"textResultText"},"以下為兒童指標的綜合分析結果",-1)),t("div",Zt,[(a(!0),i(b,null,w(e.latestChildScore,(c,p)=>{var L,I,x;return a(),de(u,{key:c.Type,symptomName:c.TypeName,symptomSolve:c.Solve,symptomRatio:c.Ratio+"%",symptomDesc:c.Serious,symptomPreRatio:((L=e.previousChildScore[p])==null?void 0:L.Ratio)+"%",symptomPreDesc:(I=e.previousChildScore[p])==null?void 0:I.Serious,symptomDifference:e.computeDifference(p),theLatestHistory:{CheckTime:c.CheckTime},theLatestHistoryPre:{CheckTime:(x=e.previousChildScore[p])==null?void 0:x.CheckTime},sex:""},null,8,["symptomName","symptomSolve","symptomRatio","symptomDesc","symptomPreRatio","symptomPreDesc","symptomDifference","theLatestHistory","theLatestHistoryPre"])}),128))]),e.hasSeverityData?(a(),i("h4",$t," 您最近常出現的症狀依困擾程度排序 ")):A("",!0),e.hasSeverityData?(a(),i("div",zt,[t("div",Yt,[t("div",Xt,[t("button",{class:N(["symptomBtn",{symptomBtnActive:e.selectedType==="Serious"}]),onClick:s[0]||(s[0]=c=>e.changeSymptomLavel("Serious"))}," 嚴重 ",2),t("button",{class:N(["symptomBtn",{symptomBtnActive:e.selectedType==="Middle"}]),onClick:s[1]||(s[1]=c=>e.changeSymptomLavel("Middle"))}," 中等 ",2),t("button",{class:N(["symptomBtn",{symptomBtnActive:e.selectedType==="Light"}]),onClick:s[2]||(s[2]=c=>e.changeSymptomLavel("Light"))}," 輕微 ",2)]),e.selectedType==="Serious"?(a(),i("div",qt,[(a(!0),i(b,null,w(e.seriousList,(c,p)=>(a(),i("div",{class:"symptomList",key:p},v(c),1))),128))])):A("",!0),e.selectedType==="Middle"?(a(),i("div",es,[(a(!0),i(b,null,w(e.middleList,(c,p)=>(a(),i("div",{class:"symptomList",key:p},v(c),1))),128))])):A("",!0),e.selectedType==="Light"?(a(),i("div",ts,[(a(!0),i(b,null,w(e.lightList,(c,p)=>(a(),i("div",{class:"symptomList",key:p},v(c),1))),128))])):A("",!0)])])):A("",!0),e.historyList.length>0?(a(),i("h4",ss,"檢測紀錄")):A("",!0),e.historyList.length>0?(a(),i("div",os,[(a(!0),i(b,null,w(e.historyList,(c,p)=>(a(),i("div",{class:"detection",key:p,onClick:L=>e.goDetail(c)},[s[10]||(s[10]=t("div",{class:"cGroup"},[t("img",{class:"img",src:ve,alt:""})],-1)),t("h3",ns,v(c.CheckTime),1),t("div",as,[t("div",is,[s[8]||(s[8]=t("h5",null,"總分",-1)),t("div",{class:"totalScore",style:D({color:e.scoreColorFn(Number(c.Score))})},v(c.Score),5)]),t("div",ls,[s[9]||(s[9]=t("h5",null,"嚴重程度",-1)),t("div",{class:"seriousScore",style:D({color:e.scoreColorFn(Number(c.Score))})},v(c.Ratio),5)])])],8,rs))),128))])):A("",!0)])}const Ds=G(kt,[["render",cs]]);export{As as B,Ls as I,Ts as S,_s as _,bs as a,ws as b,Ss as c,Ds as d,Ge as e,Fe as f,He as g,ft as u};
