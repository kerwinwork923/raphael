import{_ as S}from"./BaWquco3.js";import{_ as Y}from"./W3k4iq7y.js";import{_ as T}from"./DGlBoWLk.js";import{v as i,x as r,A as B,O as q,H as D,y as t,I as y,z as c,K as M,N as h,V as R,C as b,L as A,r as g,M as X,o as $,j as p}from"./HfdH-K36.js";import{b as tt}from"./6FQ55jJ2.js";import{u as et}from"./Bf7E4ooc.js";import{u as ot}from"./FcLl_XKH.js";import{u as w}from"./BUsOIeYI.js";import{_ as st}from"./CqYUwD82.js";import{_ as I}from"./DCGXGCbS.js";import{_ as nt}from"./fh2N3Yhm.js";import{_ as at}from"./DlAUqK2U.js";import"./DNAPM-2u.js";import"./xsH4HHeE.js";const lt=""+new URL("faceIcon.BmxQbQek.svg",import.meta.url).href,rt={components:{RaphaelLoading:Y,HRVAlert:S,DSPRSelect:T,useSeo:w},setup(){w({title:"",description:"NeuroPlus神經調節家提供專業的自律神經檢測服務，運用FDA認證AI技術，透過人臉辨識快速分析HRV數據，幫助您了解自律神經狀態。",url:"https://neuroplus.com.tw"});const H=g([]),s=X(),d=JSON.parse(localStorage.getItem("userData")),o=g(new Date().getFullYear()),P=g(new Date().getMonth()+1),m=g(!1),u=g(!1),l=g(1),_=10,e=et(),V=Array.from({length:12},(n,a)=>a+1).reverse(),k=g(!1);ot(),$(async()=>{try{k.value=!0;const n=await fetch("https://23700999.com:8081/HMA/api/fr/HRV3",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({MID:d.MID,MAID:d.MAID,Token:d.Token,Mobile:d.Mobile})});if(n.ok){const a=await n.json();H.value=a.RetHRV3}else console.error("Response not OK",n.status)}catch(n){console.error("Error fetching data",n)}finally{k.value=!1}});const x=p(()=>H.value.filter(n=>{const a=new Date(n.CheckTime);return a.getFullYear()===o.value&&a.getMonth()+1===P.value})),G=p(()=>{const n=new Date().getFullYear(),a=2024,f=[];for(let v=a;v<=n;v++)f.push(v);return f});function L(){m.value=!m.value,u.value=!1}function F(){u.value=!u.value,m.value=!1}function N(n){o.value=n,m.value=!1}function O(n){P.value=n,u.value=!1}const j=p(()=>{const n=(l.value-1)*_,a=n+_;return x.value.slice(n,a)}),C=p(()=>Math.ceil(x.value.length/_)),z=p(()=>{const n=[],a=Math.max(l.value-1,1),f=Math.min(l.value+1,C.value);for(let v=a;v<=f;v++)n.push(v);return n});function E(){l.value=1}function J(){l.value=C.value}function K(n){l.value=n}function Q(){l.value<C.value&&l.value++}function U(){l.value>1&&l.value--}function W(n,a){return n>=0&&n<=29?a==="M"?[29,53]:[30,57]:n>=30&&n<=39?a==="M"?[25,47]:[25,44]:n>=40&&n<=49?a==="M"?[21,40]:[20,40]:n>=50&&n<=59?a==="M"?[15,34]:[18,38]:n>=60?a==="M"?[16,33]:[15,30]:[0,1/0]}function Z(n){const a=d.Birthday?new Date().getFullYear()-new Date(d.Birthday).getFullYear():0,f=W(a,d.Sex);return n<f[0]}return{filteredHRVData:x,selectedYear:o,selectedMonth:P,displayYears:G,months:V,formatTimestampMDH:tt,isHRVBelowAverage:Z,toggleYearBox:L,toggleMonthBox:F,selectYear:N,selectMonth:O,yearBoxVisible:m,monthBoxVisible:u,currentPage:l,totalPages:C,displayedPages:z,nextPage:Q,prevPage:U,firstPage:E,lastPage:J,changePage:K,paginatedData:j,goBack:()=>{s.push("/HRVHistory")},openHRVAlert:async()=>{localStorage.removeItem("form"),e.showHRVAlert=!0},loading:k}}},it={class:"HRVHistoryAll"},ct={class:"titleGroup"},dt={class:"detectWrap"},ut={class:"detectSelectGroup"},vt={class:"yearSelectGroup"},gt={class:"yearBox"},mt=["onClick"],ft={class:"monthSelectGroup"},_t={class:"monthBox"},ht=["onClick"],pt={class:"detectList"},Pt=["href"],Vt={class:"timeGroup"},Ct={class:"time"},Rt={class:"infoGroup"},Ht={class:"detectAgeGroup"},kt={class:"detectHRVGroup"},xt={key:0,class:"notDetectData"},Bt={class:"paginationWrap"},Dt={class:"preBtnGroup"},yt=["disabled"],Mt=["disabled"],bt={class:"paginationCenter"},At=["onClick"],wt={class:"nextBtnGroup"},It=["disabled"],St=["disabled"],Yt={class:"itemsGroup"};function Tt(H,s,d,o,P,m){const u=S,l=Y,_=T;return r(),i(h,null,[B(u),o.loading?(r(),q(l,{key:0})):D("",!0),B(_),t("div",it,[t("div",ct,[t("img",{src:st,alt:"",onClick:s[0]||(s[0]=(...e)=>o.goBack&&o.goBack(...e))}),s[8]||(s[8]=t("h2",null,"HRV 檢測歷史紀錄",-1))]),t("div",dt,[t("div",ut,[t("div",vt,[s[9]||(s[9]=t("img",{src:I,alt:""},null,-1)),t("div",{class:"monthText",onClick:s[1]||(s[1]=(...e)=>o.toggleYearBox&&o.toggleYearBox(...e))},c(o.selectedYear)+"年 ",1),y(t("div",gt,[(r(!0),i(h,null,R(o.displayYears,e=>(r(),i("div",{class:"year",key:e,onClick:V=>o.selectYear(e)},c(e),9,mt))),128))],512),[[M,o.yearBoxVisible]])]),t("div",ft,[s[10]||(s[10]=t("img",{src:I,alt:""},null,-1)),t("div",{class:"monthText",onClick:s[2]||(s[2]=(...e)=>o.toggleMonthBox&&o.toggleMonthBox(...e))},c(o.selectedMonth)+"月份 ",1),y(t("div",_t,[(r(!0),i(h,null,R(o.months,e=>(r(),i("div",{class:"month",key:e,onClick:V=>o.selectMonth(e)},c(e)+"月 ",9,ht))),128))],512),[[M,o.monthBoxVisible]])])]),t("div",pt,[(r(!0),i(h,null,R(o.paginatedData,e=>(r(),i("div",{class:"detectItem",key:e.AID},[t("a",{href:`/Finish?AID=${e.AID}&Version=Detail`},[t("div",Vt,[s[11]||(s[11]=t("div",{class:"timeIcon"},[t("img",{src:nt,alt:""})],-1)),t("div",Ct,[t("h6",null,c(o.formatTimestampMDH(e.CheckTime)),1),t("small",null,c(e==null?void 0:e.ProductName)+" "+c(e==null?void 0:e.Flag),1)])]),t("div",Rt,[t("div",Ht,[s[13]||(s[13]=t("h4",null,"生理年齡",-1)),t("h5",null,[t("span",null,c(e.bioage),1),s[12]||(s[12]=b("歲 "))])]),t("div",kt,[s[15]||(s[15]=t("h4",null,"HRV",-1)),t("h5",{class:A({redValue:o.isHRVBelowAverage(e.HRV)})},[t("span",null,c(Math.round(e.HRV*10)/10),1),s[14]||(s[14]=b("ms "))],2)]),s[16]||(s[16]=t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 18 18",fill:"none"},[t("path",{d:"M5.99159 3.37719L11.4726 8.99994L5.99159 14.6227C5.89346 14.7232 5.83853 14.858 5.83853 14.9984C5.83853 15.1389 5.89346 15.2737 5.99159 15.3742C6.03925 15.4228 6.09613 15.4615 6.15891 15.4879C6.2217 15.5142 6.28911 15.5278 6.35721 15.5278C6.42531 15.5278 6.49273 15.5142 6.55551 15.4879C6.61829 15.4615 6.67518 15.4228 6.72284 15.3742L12.5548 9.39257C12.6572 9.28752 12.7145 9.14664 12.7145 8.99994C12.7145 8.85325 12.6572 8.71236 12.5548 8.60732L6.72396 2.62569C6.67627 2.57671 6.61924 2.53777 6.55625 2.51119C6.49326 2.4846 6.42558 2.4709 6.35721 2.4709C6.28884 2.4709 6.22116 2.4846 6.15817 2.51119C6.09518 2.53777 6.03816 2.57671 5.99046 2.62569C5.89234 2.72615 5.8374 2.86101 5.8374 3.00144C5.8374 3.14187 5.89234 3.27673 5.99046 3.37719L5.99159 3.37719Z",fill:"#666666"})],-1))])],8,Pt)]))),128)),o.filteredHRVData.length===0?(r(),i("div",xt," 無檢測資料 ")):D("",!0)])]),t("div",Bt,[t("div",Dt,[t("button",{class:"firstPageBtn",onClick:s[3]||(s[3]=(...e)=>o.firstPage&&o.firstPage(...e)),disabled:o.currentPage===1}," << ",8,yt),t("button",{class:"prevPageBtn",onClick:s[4]||(s[4]=(...e)=>o.prevPage&&o.prevPage(...e)),disabled:o.currentPage===1}," < ",8,Mt)]),t("div",bt,[(r(!0),i(h,null,R(o.displayedPages,e=>(r(),i("button",{key:e,onClick:V=>o.changePage(e),class:A({activePage:e===o.currentPage})},c(e),11,At))),128))]),t("div",wt,[t("button",{class:"nextPageBtn",onClick:s[5]||(s[5]=(...e)=>o.nextPage&&o.nextPage(...e)),disabled:o.currentPage===o.totalPages}," > ",8,It),t("button",{class:"lastPageBtn",onClick:s[6]||(s[6]=(...e)=>o.lastPage&&o.lastPage(...e)),disabled:o.currentPage===o.totalPages}," >> ",8,St)])]),t("div",Yt,[t("div",{class:"item",onClick:s[7]||(s[7]=(...e)=>o.openHRVAlert&&o.openHRVAlert(...e))},s[17]||(s[17]=[t("div",{class:"topTitle"},"檢測",-1),t("div",{class:"bottomTitle"},"HRV",-1),t("img",{src:lt,alt:""},null,-1)]))])])],64)}const te=at(rt,[["render",Tt],["__scopeId","data-v-a13930a4"]]);export{te as default};
