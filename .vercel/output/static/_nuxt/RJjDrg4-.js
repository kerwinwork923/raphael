import{_ as Ie}from"./-OuEz4cf.js";import{_ as Se}from"./C4EKiFTB.js";import{_ as Ae}from"./DcEmJnRO.js";import{u as ke,e as it,f as rt,g as dt,B as ct,a as ut,b as mt,I as bt,_ as _e,c as Pe,S as ft,d as yt}from"./DfZsC12R.js";import{V as Ct,r as b,F as ht,g as N,t as c,v as u,P as vt,K as A,x as n,Q as ne,R as gt,S as Dt,z as S,L as F,J as Bt,o as wt,i as m,M as ue,y as g,B as me,O as ae,T as Be,U as be,N as It}from"./D70xjexz.js";import{a as j}from"./CCb-kr4I.js";import{_ as St}from"./DNAPM-2u.js";import{_ as xe}from"./DlAUqK2U.js";import{_ as At,a as kt}from"./C8-dJ0e7.js";import{_ as we}from"./CR27s-ts.js";import{_ as _t}from"./fh2N3Yhm.js";import"./DHyqCC35.js";import"./CkGzrrY6.js";import"./VCNQH0xW.js";import"./BDSW-ypD.js";import"./B1QmaLQs.js";import"./D7B7LOx5.js";import"./C2uo4fds.js";const Pt={name:"BabyEditAlert",components:{VueDatePicker:Ct},props:{show:{type:Boolean,default:!1},cid:{type:String,default:""},name:{type:String,default:""},gender:{type:String,default:""},birthDate:{type:Date,default:null}},emits:["close"],setup(B,{emit:e}){const x=ke(),t=b(B.name),p=b(B.gender),C=b(B.birthDate);ht(()=>[B.name,B.gender,B.birthDate],([d,w,h])=>{t.value=d,p.value=w,C.value=h});function G(d){if(!d)return"";const w=d.getFullYear(),h=String(d.getMonth()+1).padStart(2,"0"),D=String(d.getDate()).padStart(2,"0");return`${w}/${h}/${D}`}function f(){e("close")}async function Y(){if(!t.value||!p.value||!C.value){alert("請填寫完整資料");return}const d=p.value==="male"?"1":"2",w=C.value.getFullYear(),h=String(C.value.getMonth()+1).padStart(2,"0"),D=String(C.value.getDate()).padStart(2,"0"),k=`${w}${h}${D}`,I=await x.modifyChild(B.cid,t.value.trim(),d,k);I.success?(alert("寶貝資料已更新！"),f()):alert(`修改失敗：${I.message||"請稍後再試"}`)}return{tempName:t,tempGender:p,tempBirthDate:C,formatDate:G,onClose:f,onSubmitEdit:Y}}},xt={key:1,class:"babyEditAlert"},pt={class:"babyEditAlertCloseWrap"},Tt={class:"babyRecordInfoInput"},Rt={class:"babyRecordInfoInput"},Lt={class:"babyRecordInfoInput"};function Nt(B,e,x,t,p,C){const G=N("VueDatePicker");return c(),u(F,null,[x.show?(c(),u("div",{key:0,class:"babyEditAlertCover",onClick:e[0]||(e[0]=vt((...f)=>t.onClose&&t.onClose(...f),["self"]))})):A("",!0),x.show?(c(),u("div",xt,[n("div",pt,[n("img",{class:"babyEditAlertClose",src:St,alt:"關閉",onClick:e[1]||(e[1]=(...f)=>t.onClose&&t.onClose(...f))})]),e[10]||(e[10]=n("h4",null,"編輯寶貝基本資料",-1)),n("div",Tt,[e[6]||(e[6]=n("img",{class:"icon1",src:it,alt:"姓名"},null,-1)),ne(n("input",{"onUpdate:modelValue":e[2]||(e[2]=f=>t.tempName=f),type:"text",placeholder:"請輸入寶貝姓名"},null,512),[[gt,t.tempName]])]),n("div",Rt,[e[8]||(e[8]=n("img",{class:"icon1",src:rt,alt:"性別"},null,-1)),ne(n("select",{"onUpdate:modelValue":e[3]||(e[3]=f=>t.tempGender=f)},e[7]||(e[7]=[n("option",{value:"",disabled:"",hidden:""},"請選擇性別",-1),n("option",{value:"male"},"男性",-1),n("option",{value:"female"},"女性",-1)]),512),[[Dt,t.tempGender]])]),n("div",Lt,[e[9]||(e[9]=n("img",{class:"icon1",src:dt,alt:"生日"},null,-1)),S(G,{modelValue:t.tempBirthDate,"onUpdate:modelValue":e[4]||(e[4]=f=>t.tempBirthDate=f),format:t.formatDate,locale:"zh-TW","max-date":new Date,"enable-time-picker":!1,placeholder:"請選擇寶貝的生日",class:"date-picker no-icon","cancel-text":"取消","select-text":"確定","no-today":""},null,8,["modelValue","format","max-date"])]),n("div",{class:"babyEditAlertBtn",onClick:e[5]||(e[5]=(...f)=>t.onSubmitEdit&&t.onSubmitEdit(...f))},"送出")])):A("",!0)],64)}const Gt=xe(Pt,[["render",Nt]]),Mt="data:image/svg+xml,%3csvg%20width='17'%20height='17'%20viewBox='0%200%2017%2017'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20id='Group'%3e%3cpath%20id='Vector'%20d='M1.06031%205.06977L1.06029%205.06981C-0.226931%207.72745%20-0.00208565%2010.8109%201.65283%2013.2982C2.14636%2014.036%203.14161%2015.0312%203.8645%2015.5148C5.54429%2016.6264%207.4875%2017.1058%209.43023%2016.8856C12.6116%2016.5234%2015.3578%2014.2863%2016.3513%2011.2519C17.5211%207.66904%2016.1509%203.79735%2012.9786%201.71665C11.9417%201.04171%2010.6639%200.591145%209.37125%200.449147C5.93571%200.0723148%202.57277%201.94205%201.06031%205.06977ZM7.28146%2016.2086L7.28116%2016.2085C4.93597%2015.8451%202.84057%2014.3368%201.73548%2012.1963C0.765098%2010.3252%200.595788%208.2342%201.2627%206.23347C1.87515%204.38131%203.22905%202.8036%204.97125%201.90262C7.76348%200.454259%2011.0342%200.822923%2013.4674%202.86303L13.4675%202.86315C14.4838%203.71999%2015.3097%204.9492%2015.7427%206.24828L15.7427%206.24835C16.9473%209.87695%2015.3293%2013.7745%2011.9053%2015.5064L11.9052%2015.5065C10.5007%2016.2137%208.90283%2016.4523%207.28146%2016.2086Z'%20fill='%23EC4F4F'%20stroke='%23EC4F4F'%20stroke-width='0.133333'/%3e%3cpath%20id='Vector_2'%20d='M8.7518%2013.4586L8.89489%2013.3155L8.89489%2011.1148L8.89489%208.91418L11.1054%208.91418L13.3209%208.91418L13.4245%208.8007C13.5626%208.65267%2013.5676%208.40596%2013.4343%208.27274C13.3406%208.17899%2013.2715%208.17406%2011.1153%208.17406L8.89489%208.17406L8.89489%205.99808C8.89489%204.44382%208.88009%203.7925%208.83568%203.71849C8.67286%203.40764%208.32746%203.40764%208.16464%203.71849C8.12023%203.7925%208.10543%204.44382%208.10543%205.99808L8.10543%208.17406L5.88504%208.17406C3.72881%208.17406%203.65973%208.17899%203.56598%208.27274C3.42782%208.4109%203.43769%208.67241%203.58078%208.80563C3.69427%208.91418%203.70414%208.91418%205.89985%208.91418L8.10543%208.91418L8.10543%2011.1148L8.10542%2013.3155L8.24852%2013.4586C8.32746%2013.5375%208.44095%2013.6017%208.50016%2013.6017C8.55937%2013.6017%208.67286%2013.5375%208.7518%2013.4586Z'%20fill='%23EC4F4F'/%3e%3c/g%3e%3c/svg%3e",Vt="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='18'%20height='19'%20viewBox='0%200%2018%2019'%20fill='none'%3e%3cpath%20d='M5.99159%204.04516L11.4726%209.66791L5.99159%2015.2907C5.89346%2015.3911%205.83853%2015.526%205.83853%2015.6664C5.83853%2015.8068%205.89346%2015.9417%205.99159%2016.0422C6.03925%2016.0908%206.09613%2016.1294%206.15891%2016.1558C6.2217%2016.1822%206.28911%2016.1958%206.35721%2016.1958C6.42531%2016.1958%206.49273%2016.1822%206.55551%2016.1558C6.61829%2016.1294%206.67518%2016.0908%206.72284%2016.0422L12.5548%2010.0605C12.6572%209.95549%2012.7145%209.8146%2012.7145%209.66791C12.7145%209.52122%2012.6572%209.38033%2012.5548%209.27529L6.72396%203.29366C6.67627%203.24468%206.61924%203.20574%206.55625%203.17916C6.49326%203.15257%206.42558%203.13887%206.35721%203.13887C6.28884%203.13887%206.22116%203.15257%206.15817%203.17916C6.09518%203.20574%206.03816%203.24468%205.99046%203.29366C5.89234%203.39412%205.8374%203.52898%205.8374%203.66941C5.8374%203.80984%205.89234%203.9447%205.99046%204.04516L5.99159%204.04516Z'%20fill='%23666666'/%3e%3c/svg%3e",Ft={name:"BabyRecord",components:{RaphaelLoading:Ie,TitleMenu:Se,TagList:Ae,BabyIntro:ct,BabyCreateForm:ut,BabyProgress:mt,IndicatorSelect:bt,QAList:_e,TimesSelect:Pe,SolvePrioritySelect:ft,BabyReportResult:yt,BabyEditAlert:Gt},setup(){const B=Bt(),e=ke(),x=b(!1),t=b([{name:"",gender:"",birthDate:null}]),p=b(!1),C=b({CID:"",name:"",gender:"",birthDate:null});function G(o){var l;if(p.value=!0,C.value.CID=o.CID||"",C.value.name=o.Name||"",C.value.gender=o.Sex==="1"?"male":o.Sex==="2"?"female":"",((l=o.BirthDay)==null?void 0:l.length)===8){const a=Number(o.BirthDay.slice(0,4)),i=Number(o.BirthDay.slice(4,6)),r=Number(o.BirthDay.slice(6,8));C.value.birthDate=new Date(a,i-1,r)}else C.value.birthDate=null}function f(){t.value=[{name:"",gender:"",birthDate:null}],x.value=!0}async function Y(){try{for(const a of t.value)if(!a.name||!a.gender||!a.birthDate){alert("請完整填寫寶貝資料");return}d.value=!0;const o={MID:h,Token:D,MAID:k,Mobile:I,Child:t.value.map(a=>({Name:a.name,Sex:a.gender==="male"?"1":"2",BirthDay:ie(a.birthDate)}))},l=await j.post("https://23700999.com:8081/HMA/API_ChildSave.jsp",o);if(l.data.Result==="OK"){if(T.value=!1,M.value=!1,x.value=!1,await e.fetchGrowth(),e.babyAPIData.length>0){const a=e.babyAPIData[e.babyAPIData.length-1];e.selectedChildID=a.CID,await e.fetchGrowthRecord(a.CID);const i=e.childRecords[a.CID];i.flowStage="indicator"}}else alert("新增寶貝失敗："+l.data.Message)}catch(o){console.error(o),alert("伺服器錯誤")}finally{d.value=!1}}const d=b(!1),w=localStorage.getItem("userData"),{MID:h,Token:D,MAID:k,Mobile:I}=w?JSON.parse(w):{};(!h||!D||!k||!I)&&B.push("/"),wt(()=>{e.fetchGrowth().then(()=>{e.babyAPIData.forEach(o=>{const l=o.CID,a=e.childRecords[l];o.ChildANSTime?(Number(o.diffDaysFromToday)||0)>0?(a.flowStage="historyView",e.fetchGrowthFirst(l)):a.flowStage||(a.flowStage="chooseVersion"):(a.flowStage||(a.flowStage="indicator"),e.fetchGrowthRecord(l))})})});const O=m(()=>e.babyAPIData.length>0),y=m(()=>e.childRecords[e.selectedChildID]),M=b(!1),T=b(!1),R=b(!1),_=b([{name:"",gender:"",birthDate:null}]);function U(){var o,l;if(!O.value)R.value?E():R.value=!0;else if(((o=y.value)==null?void 0:o.flowStage)==="indicator"){const i=e.selectedChildID,r=(l=y.value)==null?void 0:l.selectedAnsTypes;if(!r||r.size===0){alert("請至少選一個指標");return}d.value=!0,e.fetchChildQuestions(i).finally(()=>{d.value=!1})}}const Z=m(()=>{var l;if(!O.value)return R.value?"送出寶貝":"前往檢測";const o=(l=y.value)==null?void 0:l.flowStage;return o==="indicator"?"前往檢測":o==="times"?"次數填寫中":"下一步"}),W=m(()=>{var o;return((o=y.value)==null?void 0:o.flowStage)==="times"});function J(){_.value.push({name:"",gender:"",birthDate:null})}function s(o){_.value.length>1&&_.value.splice(o,1)}function E(){for(const o of _.value)if(!o.name||!o.gender||!o.birthDate){alert("請完整填寫寶貝資料");return}M.value=!0,T.value=!0}function fe(){M.value=!1,T.value=!1}async function pe(){try{for(const a of _.value)if(!a.name||!a.gender||!a.birthDate){alert("請完整填寫寶貝資料");return}d.value=!0;const o={MID:h,Token:D,MAID:k,Mobile:I,Child:_.value.map(a=>({Name:a.name,Sex:a.gender==="male"?"1":"2",BirthDay:ie(a.birthDate)}))},l=await j.post("https://23700999.com:8081/HMA/API_ChildSave.jsp",o);if(l.data.Result==="OK"){if(T.value=!1,M.value=!1,R.value=!1,await e.fetchGrowth(),e.babyAPIData.length>0){const a=e.babyAPIData[e.babyAPIData.length-1];e.selectedChildID=a.CID,await e.fetchGrowthRecord(a.CID);const i=e.childRecords[a.CID];i.flowStage="indicator"}}else alert("新增寶貝失敗："+l.data.Message)}catch(o){console.error(o),alert("伺服器錯誤")}finally{d.value=!1}}function Te(o){y.value.version=o}async function Re(){if(!y.value.version){alert("請選擇評估方式");return}const o=e.selectedChildID;d.value=!0,await e.fetchGrowthRecord(o),d.value=!1,y.value.flowStage="indicator"}const Le=m(()=>{var l,a;const o=e.selectedChildID;return((a=(l=e.childRecords[o])==null?void 0:l.growthRec)==null?void 0:a.ChildAnsAllType)||{}}),P=b(null),K=m(()=>{var o;return((o=P.value)==null?void 0:o.currentPage)||1}),X=m(()=>{var o;return((o=P.value)==null?void 0:o.totalPages)||1}),ye=m(()=>{var o;return(o=P.value)==null?void 0:o.isPageFilled});function Ne(){var o;(o=P.value)==null||o.goPrevPage()}function Ge(){if(!P.value.isPageFilled){alert("請先填完題目");return}P.value.currentPage<P.value.totalPages?P.value.goNextPage():P.value.submitAllAnswers()}const Me=m(()=>K.value<X.value?`下一頁 (${K.value}/${X.value})`:`下一步 (${K.value}/${X.value})`),Ve=m(()=>!ye.value),Fe=m(()=>K.value>1);function Ee(o){var i;const l=e.selectedChildID,a=(i=o.ChildInfo)==null?void 0:i.find(r=>r.CID===l);a!=null&&a.AID&&(e.childRecords[l].AID=a.AID),e.childRecords[l].childTimesQues=o.ChildAns.map(r=>({id:r.QueSeq,question:r.Question,selectScore:"",answers:[r.AnswerName_0,r.AnswerName_1,r.AnswerName_2,r.AnswerName_3],Type:r.Type,TypeName:r.TypeName})),e.childRecords[l].flowStage="times"}const L=b(1),le=7,Ce=m(()=>{var o;return((o=y.value)==null?void 0:o.childTimesQues)||[]}),$=m(()=>Math.ceil(Ce.value.length/le||1)),se=m(()=>(L.value-1)*le),he=m(()=>Ce.value.slice(se.value,se.value+le)),ve=m(()=>he.value.every(o=>o.selectScore!==""));function He(){L.value>1&&L.value--}const Qe=m(()=>L.value<$.value?`下一頁 (${L.value}/${$.value})`:"下一步");async function Ye(){if(!ve.value){alert("請先填完本頁");return}L.value<$.value?L.value++:(d.value=!0,await Oe(),await Ke(),d.value=!1,y.value.flowStage="priority")}async function Oe(){const o=e.selectedChildID,l=e.childRecords[o],a=l.childTimesQues.map(i=>({QueSeq:i.id,QueTimesAns:i.selectScore}));if(a.length)try{const i={MID:h,MAID:k,Token:D,Mobile:I,AID:l.AID,CID:o,ChildAnsTimes:a},r=await j.post("https://23700999.com:8081/HMA/API_ChildAnsTimesSave.jsp",i);r.data.Result==="OK"?r.data.AID&&(l.AID=r.data.AID):alert("儲存次數失敗："+r.data.Message)}catch(i){console.error("times error:",i)}}async function Ke(){const o=e.selectedChildID,l=e.childRecords[o];if(!l.AID){alert("缺少 AID");return}try{const a={MID:h,MAID:k,Token:D,Mobile:I,CID:o,AID:l.AID},i=await j.post("https://23700999.com:8081/HMA/API_GrowthSolve.jsp",a);i.data.Result!=="OK"&&alert("送出解決方案失敗："+i.data.Message)}catch(a){console.error(a)}}const ee=b(0);function qe(o){ee.value=o}const ze=m(()=>({backgroundColor:ee.value>0?"#74bc1f":"#bdbdbd"}));async function je(){var q,oe,z,ge;if(ee.value===0){alert("至少選一項");return}d.value=!0;const o=e.selectedChildID;if(!await Ue()){d.value=!1;return}await e.fetchGrowthFirst(o);const a=e.childRecords[o],i=a.AID||((oe=(q=a==null?void 0:a.growthRec)==null?void 0:q.CIDChildAnsLast)==null?void 0:oe.AID);if(!i){alert("目前無檢測資料"),d.value=!1;return}let r="";const v=((z=a.reportData)==null?void 0:z.History)||[],V=v.findIndex(De=>De.length>0&&De[0].AID===i);V>=0&&V<v.length-1&&(r=((ge=v[V+1][0])==null?void 0:ge.AID)||""),await e.fetchGrowthCompare(o,i,r),a.flowStage="result",d.value=!1}async function Ue(){const o=e.selectedChildID,l=e.childRecords[o];if(!l.AID)return alert("缺少 AID"),!1;const a=l.childTimesQues.filter(i=>l.selectedPriority.has(i.id)).map(i=>({QueSeq:i.id}));try{const i={MID:h,MAID:k,Token:D,Mobile:I,CID:o,AID:l.AID,ChildAnsSolve:a},r=await j.post("https://23700999.com:8081/HMA/API_ChildAnsSolveSave.jsp",i);return r.data.Result==="OK"?!0:(alert("儲存想解決的症狀失敗："+r.data.Message),!1)}catch(i){return console.error(i),alert("儲存想解決的症狀錯誤"),!1}}function Ze(o){e.selectedChildID=o;const l=e.childRecords[o],a=e.babyAPIData.find(i=>i.CID===o);a&&!a.ChildANSTime&&(l.flowStage||(l.flowStage="indicator",l.growthRec||(d.value=!0,e.fetchGrowthRecord(o).finally(()=>{d.value=!1}))))}async function We(){const o=e.selectedChildID;if(o){d.value=!0;try{await e.fetchGrowthFirst(o),y.value.flowStage="historyView"}catch(l){console.error("獲取歷史紀錄失敗:",l)}finally{d.value=!1}}}function ie(o){const l=o.getFullYear(),a=String(o.getMonth()+1).padStart(2,"0"),i=String(o.getDate()).padStart(2,"0");return`${l}${a}${i}`}function Je(o){if(!o)return"";const l=Number(o.slice(5,7)),a=Number(o.slice(8,10)),i=o.slice(11,16);return`${l}/${a} ${i}`}function te(o){if(!o)return null;const[l,a]=o.split(" ");if(!l)return null;const[i,r,v]=l.split("/");return{year:Number(i),month:Number(r),day:Number(v),timeStr:a||""}}const re=b(new Date().getFullYear()),de=b(new Date().getMonth()+1),H=b(!1),Q=b(!1);function Xe(){H.value=!H.value,H.value&&(Q.value=!1)}function $e(){Q.value=!Q.value,Q.value&&(H.value=!1)}function et(o){re.value=o,H.value=!1}function tt(o){de.value=o,Q.value=!1}const ot=new Date().getFullYear(),ce=m(()=>{var o,l;return((l=(o=y.value)==null?void 0:o.reportData)==null?void 0:l.History)||[]}),at=m(()=>{const o=new Set;return ce.value.flat().forEach(l=>{if(l.CheckTime){const a=te(l.CheckTime);a&&a.year&&o.add(a.year)}}),Array.from(o).sort((l,a)=>a-l)}),nt=Array.from({length:12},(o,l)=>l+1),lt=m(()=>{const o=new Set;return ce.value.flat().filter(i=>{const r=te(i.CheckTime);return r?r.year===re.value&&r.month===de.value:!1}).sort((i,r)=>{const v=new Date(i.CheckTime);return new Date(r.CheckTime)-v}).filter(i=>{const r=te(i.CheckTime),v=`${r.year}-${String(r.month).padStart(2,"0")}-${String(r.day).padStart(2,"0")}`;return o.has(v)?!1:(o.add(v),!0)})});async function st(o){var v,V,q;if(!(o!=null&&o.AID))return;const l=e.selectedChildID,a=((V=(v=y.value)==null?void 0:v.reportData)==null?void 0:V.History)||[];let i="";const r=a.findIndex(oe=>oe.some(z=>z.AID===o.AID&&z.CheckTime===o.CheckTime));r>=0&&r<a.length-1&&(i=((q=a[r+1][0])==null?void 0:q.AID)||""),d.value=!0,await e.fetchGrowthCompare(l,o.AID,i),d.value=!1,y.value.flowStage="result"}return{babyStore:e,curChildData:y,isLoading:d,hasChild:O,babyInfos:_,showBabyCover:M,showBabyAlert:T,showAddBabyForm:R,onCommonButtonClick:U,commonButtonLabel:Z,isDisableCommonBtn:W,addBabyInfo:J,removeBaby:s,checkAndShowBabyAlert:E,closeBabyAlert:fe,submitBabyData:pe,setVersion:Te,onChooseVersionNext:Re,ansTypes:Le,qaListRef:P,currentPage:K,totalPages:X,isPageFilled:ye,onPrevPageClick:Ne,onNextPageClick:Ge,nextButtonLabel:Me,isDisableNextBtn:Ve,hasTwoButtons:Fe,onGoTimes:Ee,timesCurrentPage:L,timesTotalPages:$,timesStartIndex:se,timesDisplayedQuestions:he,isTimesPageFilled:ve,timesNextButtonLabel:Qe,onTimesPrevPage:He,onTimesNextClick:Ye,selectedPriorityCount:ee,onPrioritySelectionChanged:qe,priorityButtonStyle:ze,onPrioritySubmit:je,onClickChild:Ze,goBackToHistory:We,formatDateToYYYYMMDD:ie,formatCheckTime:Je,parseCheckTime:te,selectedYear:re,selectedMonth:de,yearBoxVisible:H,monthBoxVisible:Q,toggleYearBox:Xe,toggleMonthBox:$e,selectYear:et,selectMonth:tt,currentYear:ot,displayYears:at,months:nt,rawHistoryList:ce,filteredHistoryList:lt,onClickHistoryItem:st,showAddBabyFormInHasChild:x,newBabyInfos:t,onAddNewBabyClick:f,submitNewBabyData:Y,showEditAlert:p,editChildData:C,onEditChild:G}}},Et={class:"babyRecord"},Ht={class:"babyRerordBtnGroup"},Qt=["disabled"],Yt={key:1,class:"babyCreateForm"},Ot={class:"babyRerordBtnGroup"},Kt={key:2,class:"chooseVersion"},qt={class:"chooseGroup"},zt={class:"babyRerordBtnGroup"},jt={key:3,class:"historyView"},Ut={class:"historyViewGroup"},Zt={class:"detectSelectGroup"},Wt={class:"yearSelectGroup"},Jt={class:"yearBox"},Xt=["onClick"],$t={class:"monthSelectGroup"},eo={class:"monthBox"},to=["onClick"],oo={class:"historyViewItemGroup"},ao=["onClick"],no={class:"historyViewLeft"},lo={key:0,style:{"text-align":"center","margin-top":"1rem",color:"#999"}},so={key:4},io={class:"babyRerordBtnGroup"},ro={key:5,class:"babyRecordWrap"},co={class:"babyRerordBtnGroup"},uo=["disabled"],mo={key:6,class:"babyQAGroup"},bo=["disabled"],fo={key:7,class:"babyTimesGroup"},yo=["disabled"],Co={key:8,class:"babyPriority"},ho={class:"babyRerordBtnGroup"},vo=["disabled"],go={key:2,class:"babyCover"},Do={key:3,class:"babyAlert"},Bo={class:"babyAlertBtnGroup"};function wo(B,e,x,t,p,C){var T,R,_,U,Z,W,J;const G=Ie,f=Se,Y=Ae,d=N("BabyIntro"),w=N("BabyCreateForm"),h=N("BabyProgress"),D=N("BabyReportResult"),k=N("IndicatorSelect"),I=_e,O=Pe,y=N("SolvePrioritySelect"),M=N("BabyEditAlert");return c(),u(F,null,[t.isLoading?(c(),ue(G,{key:0})):A("",!0),n("div",Et,[S(f,{Text:"健康紀錄",link:"/user"}),S(Y),t.hasChild?(c(),u(F,{key:1},[t.showAddBabyFormInHasChild?A("",!0):(c(),u("h6",{key:0,onClick:e[1]||(e[1]=(...s)=>t.onAddNewBabyClick&&t.onAddNewBabyClick(...s))},e[22]||(e[22]=[me(" 新增寶貝 "),n("img",{src:Mt,alt:""},null,-1)]))),S(h,{babyList:t.babyStore.babyAPIData,selectedChildID:t.babyStore.selectedChildID,onSelectChild:t.onClickChild,onEditChild:t.onEditChild},null,8,["babyList","selectedChildID","onSelectChild","onEditChild"]),t.showAddBabyFormInHasChild?(c(),u("div",Yt,[S(w,{babyInfos:t.newBabyInfos,existingOffset:t.babyStore.babyAPIData.length,onAddBaby:e[2]||(e[2]=()=>t.newBabyInfos.push({name:"",gender:"",birthDate:null})),onRemoveBaby:e[3]||(e[3]=s=>{t.newBabyInfos.length>1&&t.newBabyInfos.splice(s,1)})},null,8,["babyInfos","existingOffset"]),n("div",Ot,[n("button",{class:"babyRerordCommonBtn babyRerordPrevBtn",onClick:e[4]||(e[4]=s=>t.showAddBabyFormInHasChild=!1)}," 取消 "),n("button",{class:"babyRerordCommonBtn",onClick:e[5]||(e[5]=(...s)=>t.submitNewBabyData&&t.submitNewBabyData(...s))}," 儲存 ")])])):A("",!0),((T=t.curChildData)==null?void 0:T.flowStage)==="chooseVersion"?(c(),u("div",Kt,[e[25]||(e[25]=n("h3",null,"請依照您今日的需求，選擇您想要的評估方式",-1)),n("div",qt,[n("div",{class:ae(["chooseBox",{active:t.curChildData.version==="tracking"}]),onClick:e[6]||(e[6]=s=>t.setVersion("tracking"))},e[23]||(e[23]=[n("h4",null,"症狀追蹤",-1),n("p",null,"只評估上次有問題的症狀，約5~10分鐘",-1),n("div",{class:"bgImg"},[n("img",{src:At,alt:"症狀追蹤"})],-1)]),2),n("div",{class:ae(["chooseBox",{active:t.curChildData.version==="full"}]),onClick:e[7]||(e[7]=s=>t.setVersion("full"))},e[24]||(e[24]=[n("h4",null,"完整評估",-1),n("p",null,"檢查所有可能的症狀，約25分鐘",-1),n("div",{class:"bgImg"},[n("img",{src:kt,alt:"完整評估"})],-1)]),2)]),n("div",zt,[n("button",{class:"babyRerordCommonBtn",onClick:e[8]||(e[8]=(...s)=>t.onChooseVersionNext&&t.onChooseVersionNext(...s))}," 下一步 ")])])):((R=t.curChildData)==null?void 0:R.flowStage)==="historyView"?(c(),u("div",jt,[n("div",Ut,[n("div",Zt,[n("div",Wt,[e[26]||(e[26]=n("img",{src:we,alt:"年份篩選"},null,-1)),n("div",{class:"monthText",onClick:e[9]||(e[9]=(...s)=>t.toggleYearBox&&t.toggleYearBox(...s))},g(t.selectedYear)+"年 ",1),ne(n("div",Jt,[(c(!0),u(F,null,be(t.displayYears,s=>(c(),u("div",{class:"year",key:s,onClick:E=>t.selectYear(s)},g(s),9,Xt))),128))],512),[[Be,t.yearBoxVisible]])]),n("div",$t,[e[27]||(e[27]=n("img",{src:we,alt:"月份篩選"},null,-1)),n("div",{class:"monthText",onClick:e[10]||(e[10]=(...s)=>t.toggleMonthBox&&t.toggleMonthBox(...s))},g(t.selectedMonth)+"月份 ",1),ne(n("div",eo,[(c(!0),u(F,null,be(t.months,s=>(c(),u("div",{class:"month",key:s,onClick:E=>t.selectMonth(s)},g(s)+"月 ",9,to))),128))],512),[[Be,t.monthBoxVisible]])])]),n("div",oo,[(c(!0),u(F,null,be(t.filteredHistoryList,(s,E)=>(c(),u("div",{class:"historyViewItem",key:E,onClick:fe=>t.onClickHistoryItem(s)},[n("div",no,[e[28]||(e[28]=n("img",{src:_t,alt:""},null,-1)),n("h6",null,g(t.formatCheckTime(s.CheckTime)),1)]),e[29]||(e[29]=n("img",{src:Vt,alt:""},null,-1))],8,ao))),128)),t.filteredHistoryList.length===0?(c(),u("div",lo," 此月份無檢測紀錄 ")):A("",!0)])])])):((_=t.curChildData)==null?void 0:_.flowStage)==="result"?(c(),u("div",so,[S(D,{reportData:t.curChildData.reportData},null,8,["reportData"]),n("div",io,[n("button",{class:"babyRerordCommonBtn",onClick:e[11]||(e[11]=(...s)=>t.goBackToHistory&&t.goBackToHistory(...s))}," 返回 ")])])):((U=t.curChildData)==null?void 0:U.flowStage)==="indicator"?(c(),u("div",ro,[S(k,{ansTypes:t.ansTypes,curChildData:t.curChildData},null,8,["ansTypes","curChildData"]),n("div",co,[n("button",{class:"babyRerordCommonBtn",disabled:t.isDisableCommonBtn,onClick:e[12]||(e[12]=(...s)=>t.onCommonButtonClick&&t.onCommonButtonClick(...s))},g(t.commonButtonLabel),9,uo)])])):((Z=t.curChildData)==null?void 0:Z.flowStage)==="qa"?(c(),u("div",mo,[e[30]||(e[30]=n("p",null,"以下問題的困擾程度",-1)),S(I,{ref:"qaListRef",questions:t.curChildData.childQuestions,CID:t.babyStore.selectedChildID,currentPage:t.curChildData.currentPage,onUpdatePage:e[13]||(e[13]=s=>t.curChildData.currentPage=s),onGoTimes:t.onGoTimes},null,8,["questions","CID","currentPage","onGoTimes"]),n("div",{class:ae(["babyRerordBtnGroup",{"double-btn":t.hasTwoButtons}])},[t.currentPage>1?(c(),u("button",{key:0,class:"babyRerordCommonBtn babyRerordPrevBtn",onClick:e[14]||(e[14]=(...s)=>t.onPrevPageClick&&t.onPrevPageClick(...s))}," 上一頁 ("+g(t.currentPage)+"/"+g(t.totalPages)+") ",1)):A("",!0),n("button",{class:"babyRerordCommonBtn",disabled:t.isDisableNextBtn,onClick:e[15]||(e[15]=(...s)=>t.onNextPageClick&&t.onNextPageClick(...s))},g(t.nextButtonLabel),9,bo)],2)])):((W=t.curChildData)==null?void 0:W.flowStage)==="times"?(c(),u("div",fo,[e[31]||(e[31]=n("h3",null,"以下問題上週發生幾次",-1)),S(O,{timesQuestions:t.timesDisplayedQuestions,indexOnThisPage:t.timesStartIndex},null,8,["timesQuestions","indexOnThisPage"]),n("div",{class:ae(["babyRerordBtnGroup",{"double-btn":t.timesCurrentPage>1}])},[t.timesCurrentPage>1?(c(),u("button",{key:0,class:"babyRerordCommonBtn babyRerordPrevBtn",onClick:e[16]||(e[16]=(...s)=>t.onTimesPrevPage&&t.onTimesPrevPage(...s))}," 上一頁 ("+g(t.timesCurrentPage)+"/"+g(t.timesTotalPages)+") ",1)):A("",!0),n("button",{class:"babyRerordCommonBtn",disabled:!t.isTimesPageFilled,onClick:e[17]||(e[17]=(...s)=>t.onTimesNextClick&&t.onTimesNextClick(...s))},g(t.timesNextButtonLabel),9,yo)],2)])):((J=t.curChildData)==null?void 0:J.flowStage)==="priority"?(c(),u("div",Co,[e[32]||(e[32]=n("h3",null,"請從中選擇最多10個 目前最想解決的症狀",-1)),S(y,{symptoms:t.curChildData.childTimesQues,onSelectionChanged:t.onPrioritySelectionChanged},null,8,["symptoms","onSelectionChanged"]),n("div",ho,[n("button",{class:"babyRerordCommonBtn",disabled:t.selectedPriorityCount===0,style:It(t.priorityButtonStyle),onClick:e[18]||(e[18]=(...s)=>t.onPrioritySubmit&&t.onPrioritySubmit(...s))}," 看報告 ",12,vo)])])):A("",!0)],64)):(c(),u(F,{key:0},[t.showAddBabyForm?(c(),ue(w,{key:1,babyInfos:t.babyInfos,onAddBaby:t.addBabyInfo,onRemoveBaby:t.removeBaby},null,8,["babyInfos","onAddBaby","onRemoveBaby"])):(c(),ue(d,{key:0})),n("div",Ht,[n("button",{class:"babyRerordCommonBtn",disabled:t.isDisableCommonBtn,onClick:e[0]||(e[0]=(...s)=>t.onCommonButtonClick&&t.onCommonButtonClick(...s))},g(t.commonButtonLabel),9,Qt)])],64)),t.showBabyCover?(c(),u("div",go)):A("",!0),t.showBabyAlert?(c(),u("div",Do,[e[33]||(e[33]=n("h5",null,[me("寶貝基本資料"),n("br"),me("確認填寫正確？")],-1)),n("div",Bo,[n("button",{class:"babyAlertBtn babyAlertBtnNot",onClick:e[19]||(e[19]=(...s)=>t.closeBabyAlert&&t.closeBabyAlert(...s))}," 不確定 "),n("button",{class:"babyAlertBtn babyAlertBtnRight",onClick:e[20]||(e[20]=(...s)=>t.submitBabyData&&t.submitBabyData(...s))}," 確定 ")])])):A("",!0),S(M,{show:t.showEditAlert,cid:t.editChildData.CID,name:t.editChildData.name,gender:t.editChildData.gender,birthDate:t.editChildData.birthDate,onClose:e[21]||(e[21]=s=>t.showEditAlert=!1)},null,8,["show","cid","name","gender","birthDate"])])],64)}const Qo=xe(Ft,[["render",wo]]);export{Qo as default};
