import{_ as A}from"./-OuEz4cf.js";import{_ as h}from"./C4EKiFTB.js";import{U as V}from"./B6CxJwg3.js";import{a as B}from"./CCb-kr4I.js";import{r as a,J as H,g as N,v as F,M as P,K as J,x as v,z as R,L as W,t as b}from"./D70xjexz.js";import{_ as Y}from"./DlAUqK2U.js";import"./C7_Xho3L.js";import"./B0rTVoH9.js";import"./fh2N3Yhm.js";const E={components:{UserInfoForm:V,TitleMenu:h},setup(){const s=a(""),e=a(""),l=a(""),t=a(""),n=a(""),u=a(""),i=a(""),m=a(""),d=a(""),o=a(""),p=H(),g=a(!1),w=async()=>{try{g.value=!0;const r=localStorage.getItem("userData"),{MID:U,Token:D,MAID:S,Mobile:M}=r?JSON.parse(r):{};if(!U||!D||!S||!M||!s.value||!e.value||!l.value||!t.value||!n.value)throw new Error("資料不完整");let x="";if(n.value){const c=new Date(n.value);x=`${c.getFullYear()-1911}/${c.getMonth()+1}/${c.getDate()}`}const I=await B.post("https://23700999.com:8081/HMA/API_AA5.jsp",{MID:U,Token:D,MAID:S,Mobile:M,Name:s.value,Height:e.value,Weight:l.value,Sex:t.value,Birthday:x,DSPR:u.value||"",City:i.value,Zone:m.value,Address:d.value,HRVCalTime:o.value});I.status===200&&(p.push("/user"),console.log(I.data))}catch(r){alert(r.message||"資料不完整"),console.error(r)}finally{g.value=!1}},y=()=>{localStorage.removeItem("userData"),p.push("/")},f=localStorage.getItem("userData"),{MID:T,Token:k,MAID:C,Mobile:_}=f?JSON.parse(f):{};return(!T||!k||!C||!_)&&p.push("/"),{name:s,height:e,weight:l,sex:t,date:n,DSPR:u,city:i,area:m,address:d,addUser:w,logout:y,HRVCalTime:o,loading:g}}},L={class:"changeMemberWrap"},O={class:"changeMemberGroup"};function j(s,e,l,t,n,u){const i=A,m=h,d=N("UserInfoForm");return b(),F(W,null,[t.loading?(b(),P(i,{key:0})):J("",!0),v("div",L,[R(m,{Text:"基本資料設定",link:"./user"}),v("div",O,[R(d,{"onUpdate:name":e[0]||(e[0]=o=>t.name=o),"onUpdate:height":e[1]||(e[1]=o=>t.height=o),"onUpdate:weight":e[2]||(e[2]=o=>t.weight=o),"onUpdate:sex":e[3]||(e[3]=o=>t.sex=o),"onUpdate:date":e[4]||(e[4]=o=>t.date=o),"onUpdate:DSPR":e[5]||(e[5]=o=>t.DSPR=o),"onUpdate:city":e[6]||(e[6]=o=>t.city=o),"onUpdate:area":e[7]||(e[7]=o=>t.area=o),"onUpdate:address":e[8]||(e[8]=o=>t.address=o),"onUpdate:HRVCalTime":e[9]||(e[9]=o=>t.HRVCalTime=o),phoneShow:"true",addressShow:"true",timeShow:"true",onSubmit:t.addUser},null,8,["onSubmit"])]),v("button",{class:"logoutBtn",onClick:e[10]||(e[10]=(...o)=>t.logout&&t.logout(...o))},"登出")])],64)}const te=Y(E,[["render",j]]);export{te as default};
